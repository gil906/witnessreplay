/**
 * WitnessReplay ‚Äî Professional Law Enforcement Design System
 * Incident Reporting & Scene Reconstruction Tool
 *
 * Layout: 2-column desktop (Chat 60% | Scene+Timeline 40%)
 *         Single-column stacked mobile
 */

/* =========================================================
   1. CSS CUSTOM PROPERTIES ‚Äî MODERN 2026 DESIGN SYSTEM
   ========================================================= */
:root {
    /* --- Colour palette (refined dark mode) --- */
    --bg-primary: #050809;
    --bg-secondary: rgba(12, 17, 24, 0.92);
    --bg-surface: rgba(18, 26, 38, 0.75);
    --bg-surface-alt: rgba(28, 40, 56, 0.6);
    --border-color: rgba(255, 255, 255, 0.06);
    --border-color-hover: rgba(255, 255, 255, 0.14);

    /* Liquid Glass ‚Äî layered frosted panels */
    --glass-bg: rgba(16, 22, 32, 0.55);
    --glass-bg-elevated: rgba(22, 30, 44, 0.62);
    --glass-border: rgba(255, 255, 255, 0.08);
    --glass-border-vivid: rgba(255, 255, 255, 0.13);
    --glass-blur: blur(24px);
    --glass-blur-heavy: blur(40px);
    --glass-saturate: saturate(180%);
    --glass-shine: linear-gradient(135deg, rgba(255,255,255,0.06) 0%, transparent 40%, transparent 60%, rgba(255,255,255,0.03) 100%);

    --accent-blue: #60a5fa;
    --accent-blue-hover: #3b82f6;
    --accent-blue-muted: rgba(96, 165, 250, 0.12);
    --accent-green: #4ade80;
    --accent-green-muted: rgba(74, 222, 128, 0.12);
    --accent-amber: #fbbf24;
    --accent-amber-muted: rgba(251, 191, 36, 0.12);
    --accent-red: #f87171;
    --accent-red-muted: rgba(248, 113, 113, 0.12);
    --accent-purple: #a78bfa;
    --accent-purple-muted: rgba(167, 139, 250, 0.12);

    /* Gradients ‚Äî richer layering */
    --gradient-primary: linear-gradient(135deg, rgba(96, 165, 250, 0.12) 0%, rgba(167, 139, 250, 0.08) 50%, rgba(74, 222, 128, 0.05) 100%);
    --gradient-surface: linear-gradient(180deg, rgba(255, 255, 255, 0.04) 0%, transparent 100%);
    --gradient-accent: linear-gradient(135deg, #60a5fa 0%, #a78bfa 50%, #818cf8 100%);
    --gradient-glow: radial-gradient(ellipse at 50% 0%, rgba(96, 165, 250, 0.12) 0%, transparent 60%);
    --gradient-mesh: radial-gradient(at 40% 20%, rgba(96,165,250,0.06) 0, transparent 50%),
                     radial-gradient(at 80% 80%, rgba(167,139,250,0.06) 0, transparent 50%),
                     radial-gradient(at 10% 90%, rgba(74,222,128,0.04) 0, transparent 50%);

    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --text-muted: #64748b;

    /* --- Soft shadows ‚Äî layered depth --- */
    --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.2);
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.2), 0 1px 3px rgba(0, 0, 0, 0.15);
    --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.25), 0 4px 12px rgba(0, 0, 0, 0.18);
    --shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.35), 0 8px 24px rgba(0, 0, 0, 0.2);
    --shadow-glow-blue: 0 0 30px rgba(96, 165, 250, 0.2), 0 0 60px rgba(96, 165, 250, 0.08);
    --shadow-glow-green: 0 0 20px rgba(74, 222, 128, 0.15);
    --shadow-glow-purple: 0 0 30px rgba(167, 139, 250, 0.15);
    --shadow-inset: inset 0 1px 0 rgba(255, 255, 255, 0.06);
    --shadow-inset-deep: inset 0 2px 4px rgba(0, 0, 0, 0.15);

    /* --- Transitions ‚Äî spring-based for premium feel --- */
    --transition-fast: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --transition-base: 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --transition-slow: 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --transition-bounce: 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    --transition-spring: 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);

    /* --- Spacing (fluid) --- */
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;
    --spacing-2xl: 3rem;

    /* --- Typography (modern) --- */
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto,
        'Helvetica Neue', sans-serif;
    --font-mono: 'JetBrains Mono', 'SF Mono', Consolas, 'Liberation Mono', monospace;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --letter-spacing-tight: -0.02em;
    --letter-spacing-normal: -0.01em;
    --letter-spacing-wide: 0.02em;
    --letter-spacing-wider: 0.04em;

    /* --- Layout (refined) --- */
    --header-height: 68px;
    --panel-radius: 16px;
    --card-radius: 12px;
    --btn-radius: 10px;
    --input-radius: 12px;
    --input-area-height: 64px;
}

/* =========================================================
   2. RESET & BASE
   ========================================================= */
*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
}

body {
    font-family: var(--font-family);
    font-size: clamp(13px, 1.5vw, 15px);
    line-height: 1.65;
    font-weight: var(--font-weight-normal);
    letter-spacing: var(--letter-spacing-normal);
    color: var(--text-primary);
    background: var(--bg-primary);
    min-height: 100vh;
    min-height: 100dvh;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Subtle animated gradient background ‚Äî premium mesh */
body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: 
        var(--gradient-mesh),
        var(--gradient-glow);
    pointer-events: none;
    z-index: 0;
    animation: meshDrift 20s ease-in-out infinite alternate;
}

@keyframes meshDrift {
    0% { opacity: 0.6; }
    50% { opacity: 0.85; }
    100% { opacity: 0.6; }
}

a {
    color: var(--accent-blue);
    text-decoration: none;
}
a:hover {
    text-decoration: underline;
}

img {
    max-width: 100%;
    height: auto;
    display: block;
}

/* =========================================================
   3. UTILITY CLASSES
   ========================================================= */
.hidden {
    display: none !important;
}

.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
}

/* Particle canvas ‚Äî disabled */
.particle-canvas {
    display: none !important;
}

/* =========================================================
   4. CONTAINER
   ========================================================= */
.container {
    max-width: 1680px;
    margin: 0 auto;
    padding: var(--spacing-lg);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    min-height: 100dvh;
    position: relative;
    z-index: 1;
}

/* =========================================================
   5. HEADER ‚Äî Liquid Glass
   ========================================================= */
.header {
    background: rgba(12, 18, 28, 0.6);
    backdrop-filter: blur(32px) saturate(200%);
    -webkit-backdrop-filter: blur(32px) saturate(200%);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: var(--panel-radius);
    margin-bottom: var(--spacing-md);
    padding: 0 var(--spacing-xl);
    height: auto;
    min-height: var(--header-height);
    flex-shrink: 0;
    animation: fadeSlideDown 0.5s cubic-bezier(0.22, 1, 0.36, 1);
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.04);
    position: relative;
    overflow: hidden;
}

/* Liquid glass shimmer ‚Äî top accent */
.header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(96,165,250,0.5), rgba(167,139,250,0.4), transparent);
    opacity: 0.8;
}

/* Inner glass shine layer */
.header::after {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--glass-shine);
    pointer-events: none;
    border-radius: inherit;
}

@keyframes fadeSlideDown {
    from {
        opacity: 0;
        transform: translateY(-12px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    min-height: var(--header-height);
    gap: var(--spacing-lg);
    padding: var(--spacing-sm) 0;
}

.logo-section {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    flex-shrink: 0;
}

.logo-icon {
    font-size: 2rem;
    line-height: 1;
    filter: drop-shadow(0 3px 8px rgba(96, 165, 250, 0.25));
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.logo-icon:hover {
    transform: scale(1.08) rotate(-3deg);
}

.logo-text {
    display: flex;
    flex-direction: column;
    line-height: 1.3;
    gap: 2px;
}

.logo-text h1 {
    font-size: clamp(1.1rem, 2vw, 1.35rem);
    font-weight: var(--font-weight-bold);
    color: var(--text-primary);
    letter-spacing: var(--letter-spacing-tight);
    background: var(--gradient-accent);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.tagline {
    font-size: 0.72rem;
    color: var(--text-secondary);
    font-weight: var(--font-weight-medium);
    letter-spacing: var(--letter-spacing-wide);
}

.tagline-sub {
    font-size: 0.65rem;
    color: var(--text-muted);
    font-weight: var(--font-weight-normal);
    letter-spacing: var(--letter-spacing-wide);
    opacity: 0.85;
}

.challenge-badge {
    font-size: 0.6rem;
    font-weight: var(--font-weight-semibold);
    color: var(--accent-blue);
    background: var(--accent-blue-muted);
    border: 1px solid rgba(96, 165, 250, 0.2);
    border-radius: 20px;
    padding: 4px 12px;
    white-space: nowrap;
    letter-spacing: var(--letter-spacing-wider);
    text-transform: uppercase;
    backdrop-filter: blur(8px);
    transition: all var(--transition-base);
}

.challenge-badge:hover {
    background: rgba(96, 165, 250, 0.18);
    box-shadow: 0 0 16px rgba(96, 165, 250, 0.2);
}

/* Session info (right side of header) */
.session-info {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
    justify-content: flex-end;
}

/* Connection Status Indicator ‚Äî Liquid Glass pill */
.connection-status {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.73rem;
    color: var(--text-secondary);
    padding: 5px 12px;
    background: rgba(12, 18, 28, 0.5);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.06);
    transition: all 0.2s ease;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12);
    cursor: pointer;
    position: relative;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

.connection-status:hover {
    border-color: rgba(96, 165, 250, 0.4);
    box-shadow: var(--shadow-xs), 0 0 12px rgba(96, 165, 250, 0.15);
}

.connection-status .status-spinner {
    display: none;
    width: 12px;
    height: 12px;
    border: 2px solid rgba(251, 191, 36, 0.3);
    border-top-color: var(--accent-amber);
    border-radius: 50%;
    animation: connectionSpin 0.8s linear infinite;
    flex-shrink: 0;
}

.connection-status.connecting .status-spinner {
    display: block;
}

.connection-status.connecting .status-dot {
    display: none;
}

@keyframes connectionSpin {
    to { transform: rotate(360deg); }
}

.connection-status .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--accent-amber);
    animation: statusPulse 2s ease-in-out infinite;
    flex-shrink: 0;
    transition: all var(--transition-base);
}

.connection-status.connected .status-dot {
    background: var(--accent-green);
    box-shadow: 0 0 12px var(--accent-green), 0 0 4px var(--accent-green);
    animation: none;
}

.connection-status.reconnecting .status-dot {
    background: var(--accent-amber);
    box-shadow: 0 0 12px var(--accent-amber);
    animation: statusPulse 1s ease-in-out infinite;
}

.connection-status.disconnected .status-dot {
    background: var(--accent-red);
    box-shadow: 0 0 12px var(--accent-red);
    animation: none;
}

.connection-status .status-text {
    font-weight: var(--font-weight-medium);
    white-space: nowrap;
    letter-spacing: var(--letter-spacing-wide);
}

.connection-status.connected .status-text {
    color: var(--accent-green);
}

.connection-quality-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 5px 10px;
    border-radius: 999px;
    border: 1px solid var(--glass-border);
    background: var(--glass-bg);
    color: var(--text-secondary);
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 0.03em;
    text-transform: uppercase;
}

.connection-quality-badge::before {
    content: '';
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: var(--accent-amber);
}

.connection-quality-badge[data-level="good"] {
    color: var(--accent-green);
}

.connection-quality-badge[data-level="good"]::before {
    background: var(--accent-green);
    box-shadow: 0 0 8px var(--accent-green);
}

.connection-quality-badge[data-level="unstable"] {
    color: var(--accent-amber);
}

.connection-quality-badge[data-level="unstable"]::before {
    background: var(--accent-amber);
    box-shadow: 0 0 8px var(--accent-amber);
}

.connection-quality-badge[data-level="disconnected"] {
    color: var(--accent-red);
}

.connection-quality-badge[data-level="disconnected"]::before {
    background: var(--accent-red);
    box-shadow: 0 0 8px var(--accent-red);
}

/* Connection Status Popup */
.connection-popup {
    display: none;
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    min-width: 260px;
    max-width: 340px;
    background: var(--bg-surface);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    text-align: left;
    animation: popupFadeIn 0.2s ease;
    overflow: hidden;
}

.connection-status.popup-open .connection-popup {
    display: block;
}

@keyframes popupFadeIn {
    from { opacity: 0; transform: translateY(-4px); }
    to { opacity: 1; transform: translateY(0); }
}

.connection-popup-body {
    padding: 12px 14px;
}

.connection-popup-state {
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 6px;
}

.connection-popup-detail {
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-bottom: 4px;
    font-family: var(--font-mono);
    word-break: break-all;
}

.connection-popup-session {
    font-size: 0.7rem;
    color: var(--text-secondary);
    margin-bottom: 4px;
    font-family: var(--font-mono);
    word-break: break-all;
}

.connection-popup-error {
    font-size: 0.75rem;
    color: var(--accent-red);
    margin: 8px 0 4px;
    padding: 6px 8px;
    background: rgba(239, 68, 68, 0.1);
    border-radius: 6px;
    line-height: 1.4;
}

.connection-popup-steps {
    margin-top: 8px;
    max-height: 120px;
    overflow-y: auto;
    font-size: 0.7rem;
    font-family: var(--font-mono);
    color: var(--text-muted);
    border-top: 1px solid var(--glass-border);
    padding-top: 6px;
}

.connection-popup-steps .step-line {
    padding: 2px 0;
    line-height: 1.4;
}

.connection-popup-steps .step-time {
    color: var(--text-secondary);
    margin-right: 6px;
}

.connection-popup-retry {
    width: 100%;
    padding: 10px 12px;
    border: none;
    border-top: 1px solid var(--glass-border);
    background: transparent;
    color: var(--accent-blue);
    font-size: 0.8rem;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-base);
}

.connection-popup-retry:hover {
    background: var(--accent-blue-muted);
}

.session-status {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.78rem;
    color: var(--text-secondary);
    padding: 6px 14px;
    background: var(--glass-bg);
    backdrop-filter: blur(12px);
    border-radius: 24px;
    border: 1px solid var(--glass-border);
    box-shadow: var(--shadow-xs);
}

.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--accent-green);
    animation: statusPulse 2s ease-in-out infinite;
}

@keyframes statusPulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(0.9); }
}

/* =========================================================
   6. INFO BANNER ‚Äî Modern Glass Card
   ========================================================= */
.info-banner {
    background: var(--glass-bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--glass-border);
    border-radius: var(--card-radius);
    padding: var(--spacing-md) var(--spacing-lg);
    margin-bottom: var(--spacing-md);
    font-size: 0.88rem;
    color: var(--text-secondary);
    line-height: 1.6;
    box-shadow: var(--shadow-sm), var(--shadow-inset);
    position: relative;
    overflow: hidden;
}

.info-banner::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: var(--gradient-accent);
    border-radius: 4px 0 0 4px;
}

/* =========================================================
   7. MAIN CONTENT ‚Äî 2-COLUMN LAYOUT
   ========================================================= */
.main-content {
    display: grid;
    grid-template-columns: 6fr 4fr;
    grid-template-rows: 1fr;
    gap: var(--spacing-lg);
    flex: 1;
    min-height: 0;
    animation: fadeSlideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.1s both;
}

@keyframes fadeSlideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* =========================================================
   8. CHAT PANEL ‚Äî Modern Messaging App Style
   ========================================================= */
.chat-panel {
    background: rgba(12, 18, 28, 0.55);
    backdrop-filter: blur(32px) saturate(180%);
    -webkit-backdrop-filter: blur(32px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: var(--panel-radius);
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
    order: -1;
    max-height: calc(100vh - var(--header-height) - 3rem);
    max-height: calc(100dvh - var(--header-height) - 3rem);
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.03);
    position: relative;
}

/* Liquid glass shine overlay */
.chat-panel::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 100px;
    background: linear-gradient(180deg, rgba(255,255,255,0.03) 0%, transparent 100%);
    pointer-events: none;
    z-index: 1;
    border-radius: var(--panel-radius) var(--panel-radius) 0 0;
}

.chat-panel h3 {
    padding: var(--spacing-md) var(--spacing-xl);
    font-size: 0.82rem;
    font-weight: var(--font-weight-semibold);
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: var(--letter-spacing-wider);
    border-bottom: 1px solid var(--glass-border);
    flex-shrink: 0;
    position: relative;
    z-index: 2;
}

/* Reporting Steps ‚Äî Modern pill design */
.reporting-steps {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 10px var(--spacing-lg);
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
    flex-shrink: 0;
    background: rgba(0, 0, 0, 0.1);
    position: relative;
    z-index: 2;
}

.reporting-steps .step {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.73rem;
    font-weight: var(--font-weight-medium);
    color: var(--text-muted);
    white-space: nowrap;
    padding: 6px 12px;
    border-radius: 20px;
    transition: all 0.2s ease;
    background: transparent;
}

.reporting-steps .step:hover {
    background: rgba(255, 255, 255, 0.04);
}

.reporting-steps .step.active {
    color: var(--accent-blue);
    background: var(--accent-blue-muted);
}

.reporting-steps .step.completed {
    color: var(--accent-green);
}

.reporting-steps .step-num {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: rgba(30, 40, 55, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.08);
    font-size: 0.65rem;
    font-weight: var(--font-weight-semibold);
    flex-shrink: 0;
    transition: all 0.2s ease;
}

.reporting-steps .step.active .step-num {
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    border-color: transparent;
    color: #fff;
    box-shadow: 0 0 10px rgba(59, 130, 246, 0.35);
}

.reporting-steps .step.completed .step-num {
    background: var(--accent-green);
    border-color: transparent;
    color: #fff;
}

/* Chat transcript ‚Äî Modern messaging style */
.chat-transcript {
    flex: 1;
    overflow-y: auto;
    padding: var(--spacing-lg) var(--spacing-xl);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    scroll-behavior: smooth;
    position: relative;
    z-index: 2;
}

.chat-transcript::-webkit-scrollbar {
    width: 4px;
}
.chat-transcript::-webkit-scrollbar-track {
    background: transparent;
}
.chat-transcript::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.08);
    border-radius: 10px;
}
.chat-transcript::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.15);
}

body.compact-chat .chat-transcript {
    gap: var(--spacing-xs);
    padding: var(--spacing-md) var(--spacing-lg);
}

body.compact-chat .message {
    font-size: 0.88rem;
    line-height: 1.45;
}

body.compact-chat .msg-time {
    font-size: 0.68rem;
}

/* Chat messages ‚Äî Premium bubble design */
.chat-message {
    display: flex;
    gap: var(--spacing-sm);
    animation: messageSlideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    max-width: 80%;
    padding: var(--spacing-xs) 0;
}

.chat-message.user {
    align-self: flex-end;
    flex-direction: row-reverse;
}

.chat-message.assistant {
    align-self: flex-start;
}

.message-avatar {
    width: 34px;
    height: 34px;
    border-radius: 50%;
    background: rgba(22, 30, 44, 0.6);
    backdrop-filter: blur(8px);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
    flex-shrink: 0;
    border: 1px solid rgba(255, 255, 255, 0.06);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.message-avatar:hover {
    transform: scale(1.08);
}

.chat-message.user .message-avatar {
    background: var(--accent-blue-muted);
    border-color: rgba(96, 165, 250, 0.25);
}

.chat-message.assistant .message-avatar {
    background: var(--accent-green-muted);
    border-color: rgba(74, 222, 128, 0.2);
}

.message-content {
    background: rgba(22, 30, 44, 0.65);
    backdrop-filter: blur(20px) saturate(160%);
    -webkit-backdrop-filter: blur(20px) saturate(160%);
    border: 1px solid rgba(255, 255, 255, 0.07);
    border-radius: 18px 18px 18px 4px;
    padding: 10px 16px;
    font-size: 0.92rem;
    line-height: 1.65;
    color: var(--text-primary);
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.04);
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
    position: relative;
    overflow: hidden;
}

/* Glass shine on message bubbles */
.message-content::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--glass-shine);
    pointer-events: none;
    border-radius: inherit;
}

.message-content:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.chat-message.user .message-content {
    background: linear-gradient(135deg, rgba(96, 165, 250, 0.22) 0%, rgba(139, 92, 246, 0.15) 100%);
    border-color: rgba(96, 165, 250, 0.12);
    border-radius: 18px 18px 4px 18px;
}

.chat-message.assistant .message-content {
    background: rgba(16, 22, 34, 0.72);
    border-color: rgba(255, 255, 255, 0.06);
}

.message-time {
    font-size: 0.65rem;
    color: var(--text-muted);
    margin-top: 4px;
    opacity: 0.8;
}

@keyframes messageSlideIn {
    from {
        opacity: 0;
        transform: translateY(8px);
        filter: blur(2px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
        filter: blur(0);
    }
}

/* Typing indicator ‚Äî Professional thinking animation */
.typing-indicator {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-xl);
    color: var(--text-muted);
    font-size: 0.85rem;
    animation: messageSlideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.typing-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: var(--accent-green-muted);
    border: 1.5px solid rgba(74, 222, 128, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
    flex-shrink: 0;
    animation: typingPulseAvatar 2s ease-in-out infinite;
}

@keyframes typingPulseAvatar {
    0%, 100% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.25); }
    50% { box-shadow: 0 0 0 8px rgba(74, 222, 128, 0); }
}

.typing-content {
    display: flex;
    flex-direction: column;
    gap: 4px;
    background: var(--glass-bg-elevated);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(74, 222, 128, 0.1);
    border-radius: 16px;
    padding: 10px 16px;
    box-shadow: var(--shadow-sm), var(--shadow-inset);
}

.typing-label {
    font-size: 0.78rem;
    color: var(--accent-green);
    font-weight: 500;
    letter-spacing: 0.01em;
    animation: typingLabelPulse 2.5s ease-in-out infinite;
}

@keyframes typingLabelPulse {
    0%, 100% { opacity: 0.7; }
    50% { opacity: 1; }
}

.typing-dots {
    display: flex;
    gap: 5px;
    align-items: center;
}

.typing-dots .dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: var(--accent-green);
    opacity: 0.5;
    animation: typingBounce 1.4s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
.typing-dots .dot:nth-child(2) {
    animation-delay: 0.2s;
}
.typing-dots .dot:nth-child(3) {
    animation-delay: 0.4s;
}

@keyframes typingBounce {
    0%, 70%, 100% { opacity: 0.35; transform: translateY(0) scale(1); }
    35% { opacity: 1; transform: translateY(-4px) scale(1.15); }
}

/* Streaming text cursor */
.message.streaming .stream-cursor {
    display: inline-block;
    animation: cursorBlink 0.8s infinite;
    color: var(--accent-green);
    font-weight: var(--font-weight-bold);
    margin-left: 2px;
    text-shadow: 0 0 8px var(--accent-green);
}

@keyframes cursorBlink {
    0%, 45% { opacity: 1; }
    50%, 100% { opacity: 0; }
}

.message.streaming .stream-content {
    display: inline;
}

/* Suggested actions ‚Äî Modern chip design */
.suggested-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    padding: 10px var(--spacing-xl);
    border-top: 1px solid rgba(255, 255, 255, 0.03);
    flex-shrink: 0;
    background: transparent;
}

.suggestion-btn {
    background: rgba(22, 30, 44, 0.4);
    backdrop-filter: blur(8px);
    color: var(--text-secondary);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 20px;
    padding: 7px 14px;
    font-size: 0.78rem;
    font-weight: var(--font-weight-medium);
    font-family: var(--font-family);
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
    box-shadow: none;
}

.suggestion-btn:hover {
    background: rgba(96, 165, 250, 0.1);
    border-color: rgba(96, 165, 250, 0.2);
    color: var(--accent-blue);
    transform: translateY(-1px);
}

.suggestion-btn:active {
    transform: translateY(0);
}

/* Text input area ‚Äî Voice-first collapsed style */
.text-input {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    border-top: 1px solid rgba(255, 255, 255, 0.04);
    background: rgba(8, 12, 18, 0.65);
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);
    flex-shrink: 0;
    order: 10;
    position: relative;
    z-index: 3;
}

.text-input input,
.text-input textarea {
    flex: 1;
    background: rgba(18, 26, 38, 0.5);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 22px;
    padding: 10px 18px;
    color: var(--text-primary);
    font-size: 0.9rem;
    font-family: var(--font-family);
    font-weight: var(--font-weight-normal);
    outline: none;
    transition: all 0.2s ease;
    resize: none;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}

.text-input input:focus,
.text-input textarea:focus {
    border-color: rgba(96, 165, 250, 0.3);
    box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.08), inset 0 1px 3px rgba(0, 0, 0, 0.08);
    background: rgba(22, 30, 44, 0.7);
}

.text-input input::placeholder,
.text-input textarea::placeholder {
    color: var(--text-muted);
    font-weight: var(--font-weight-normal);
}

.text-char-counter {
    min-width: 62px;
    text-align: right;
    font-size: 0.72rem;
    color: var(--text-muted);
    font-family: var(--font-mono);
    flex-shrink: 0;
}

.text-char-counter.warning {
    color: var(--accent-amber);
}

.text-input button,
.btn-mic {
    width: 40px;
    height: 40px;
    min-width: 40px;
    border-radius: 50%;
    border: 1px solid rgba(255, 255, 255, 0.06);
    background: rgba(22, 30, 44, 0.5);
    backdrop-filter: blur(8px);
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    transition: all 0.2s ease;
    flex-shrink: 0;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12);
}

.text-input button:hover,
.btn-mic:hover:not(:disabled) {
    background: rgba(96, 165, 250, 0.12);
    border-color: rgba(96, 165, 250, 0.2);
    color: var(--accent-blue);
    box-shadow: 0 2px 8px rgba(96, 165, 250, 0.15);
    transform: scale(1.05);
}

.text-input button:active,
.btn-mic:active:not(:disabled) {
    transform: scale(0.98);
}

#retry-last-btn:disabled {
    opacity: 0.45;
}

#auto-scroll-toggle.is-off,
#compact-mode-toggle.active {
    color: var(--accent-blue);
    border-color: rgba(96, 165, 250, 0.35);
    background: var(--accent-blue-muted);
}

/* Language Selector for Translation */
.language-selector {
    height: 44px;
    min-width: 120px;
    max-width: 150px;
    padding: 0 14px;
    border-radius: 22px;
    border: 1px solid var(--glass-border);
    background: var(--glass-bg);
    backdrop-filter: blur(8px);
    color: var(--text-primary);
    font-size: 0.85rem;
    font-weight: var(--font-weight-medium);
    font-family: var(--font-family);
    cursor: pointer;
    outline: none;
    transition: all var(--transition-base);
    flex-shrink: 0;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23a1adc0' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 30px;
    box-shadow: var(--shadow-xs);
}

.language-selector:hover,
.language-selector:focus {
    border-color: rgba(96, 165, 250, 0.3);
    background-color: var(--accent-blue-muted);
    box-shadow: var(--shadow-sm), 0 0 16px rgba(96, 165, 250, 0.15);
}

.language-selector option {
    background: var(--bg-surface);
    color: var(--text-primary);
    padding: 8px;
}

/* Language indicator badge */
.language-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: 12px;
    background: var(--accent-blue-muted);
    color: var(--accent-blue);
    font-size: 0.7rem;
    font-weight: 500;
    text-transform: uppercase;
}

/* Translation indicator in chat messages */
.translation-indicator {
    display: flex;
    align-items: center;
    gap: 4px;
    margin-top: 4px;
    padding-top: 4px;
    border-top: 1px dashed var(--border-color);
    font-size: 0.75rem;
    color: var(--text-muted);
}

.translation-indicator .original-text {
    font-style: italic;
    color: var(--text-secondary);
}

.translation-toggle {
    cursor: pointer;
    color: var(--accent-blue);
    text-decoration: underline;
}

.translation-toggle:hover {
    color: var(--accent-blue-hover);
}

.message-actions {
    display: flex;
    justify-content: flex-end;
    margin-top: 6px;
}

.msg-copy-btn {
    border: 1px solid var(--border-color);
    background: var(--bg-surface);
    color: var(--text-secondary);
    border-radius: 999px;
    padding: 2px 10px;
    font-size: 0.72rem;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.msg-copy-btn:hover {
    color: var(--accent-blue);
    border-color: rgba(96, 165, 250, 0.35);
    background: var(--accent-blue-muted);
}

/* =========================================================
   9. VOICE / MIC CONTROLS ‚Äî Voice-First Design
   ========================================================= */
.controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-lg) var(--spacing-xl);
    border-top: 1px solid var(--glass-border);
    background: rgba(10, 14, 20, 0.5);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    flex-shrink: 0;
    order: 8;
}

.controls.expanded {
    display: flex;
}

/* Mobile voice UX defaults (enabled in mobile media queries) */
.mobile-call-header,
.quick-phrase-rail,
.voice-dock,
.tap-interrupt-affordance {
    display: none;
}

.voice-dock {
    border-top: 1px solid rgba(255, 255, 255, 0.04);
    background: rgba(8, 12, 18, 0.88);
    backdrop-filter: blur(32px) saturate(180%);
    -webkit-backdrop-filter: blur(32px) saturate(180%);
    padding: var(--spacing-sm) var(--spacing-md) calc(var(--spacing-sm) + env(safe-area-inset-bottom, 0px));
    position: sticky;
    bottom: 0;
    z-index: 960;
    gap: var(--spacing-sm);
    flex-direction: column;
    flex-shrink: 0;
}

.voice-dock-mic-btn {
    width: 100%;
    border-radius: 14px;
    border: 1px solid rgba(96, 165, 250, 0.2);
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.88), rgba(79, 70, 229, 0.84));
    color: #fff;
    min-height: 54px;
    font-size: 0.95rem;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    box-shadow: 0 6px 20px rgba(37, 99, 235, 0.25), inset 0 1px 0 rgba(255,255,255,0.12);
    cursor: pointer;
    transition: all 0.2s ease;
    -webkit-tap-highlight-color: transparent;
}

.voice-dock-mic-btn:active {
    transform: scale(0.97);
    box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
}

.voice-dock-mic-btn.is-recording {
    background: linear-gradient(135deg, rgba(185, 28, 28, 0.95), rgba(239, 68, 68, 0.9));
    border-color: rgba(248, 113, 113, 0.65);
}

.voice-dock-mic-btn.is-busy {
    background: linear-gradient(135deg, rgba(30, 64, 175, 0.9), rgba(14, 116, 144, 0.86));
}

.voice-dock-mic-icon {
    font-size: 1.2rem;
}

.voice-dock-mic-text {
    letter-spacing: 0.02em;
}

.voice-dock-actions,
.voice-dock-more-panel {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.voice-dock-actions::-webkit-scrollbar,
.voice-dock-more-panel::-webkit-scrollbar {
    display: none;
}

.voice-dock-action-btn {
    border: 1px solid var(--glass-border);
    background: var(--glass-bg);
    color: var(--text-secondary);
    border-radius: 999px;
    min-height: 44px;
    padding: 8px 12px;
    font-size: 0.8rem;
    white-space: nowrap;
    cursor: pointer;
}

.voice-dock-action-btn.is-muted {
    border-color: rgba(248, 113, 113, 0.45);
    background: rgba(153, 27, 27, 0.22);
    color: #fecaca;
}

.voice-speed-group {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 2px;
}

.voice-speed-label {
    font-size: 0.72rem;
    color: var(--text-muted);
    margin-right: 2px;
}

.voice-speed-btn.is-active {
    border-color: rgba(96, 165, 250, 0.55);
    color: var(--accent-blue);
    background: rgba(30, 64, 175, 0.22);
}

.voice-dock-more-btn {
    margin-left: auto;
}

.tap-interrupt-affordance {
    margin: 0 var(--spacing-md);
    padding: 10px 12px;
    border: 1px solid rgba(74, 222, 128, 0.3);
    background: rgba(20, 83, 45, 0.18);
    color: var(--text-secondary);
    border-radius: 12px;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    flex-shrink: 0;
}

.tap-interrupt-affordance.visible {
    display: flex;
}

.voice-dock.voice-dock-more-open .voice-dock-more-panel {
    display: flex;
    flex-wrap: wrap;
    border-top: 1px solid var(--glass-border);
    padding-top: 8px;
}

.mic-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-sm);
    position: relative;
    padding: 50px;
}

/* Position the audio visualizer canvas behind the mic button */
.mic-container canvas {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 2;
    opacity: 0.75;
}

/* ===== MAIN MIC BUTTON ‚Äî Liquid Glass Premium ===== */
.mic-btn {
    width: 110px;
    height: 110px;
    min-width: 110px;
    border-radius: 50%;
    border: 2px solid rgba(96, 165, 250, 0.25);
    background: linear-gradient(145deg, rgba(22, 44, 76, 0.8) 0%, rgba(16, 32, 60, 0.9) 50%, rgba(24, 48, 80, 0.85) 100%);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    color: var(--accent-blue);
    font-size: 2rem;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    z-index: 10;
    overflow: visible;
    box-shadow: 
        0 0 30px rgba(96, 165, 250, 0.15),
        0 0 60px rgba(96, 165, 250, 0.06),
        0 8px 28px rgba(0, 0, 0, 0.25),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        inset 0 -2px 4px rgba(0, 0, 0, 0.15);
}

.mic-icon {
    font-size: 2.5rem;
    transition: transform 0.3s ease;
}

.mic-btn:not(:disabled) .mic-icon {
    animation: micIconBreathe 2s ease-in-out infinite;
}

@keyframes micIconBreathe {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.08); }
}

.mic-btn:hover:not(:disabled) {
    border-color: rgba(147, 197, 253, 0.5);
    background: linear-gradient(145deg, #2563eb 0%, #1d4ed8 50%, #3b82f6 100%);
    color: #fff;
    box-shadow: 
        0 0 35px rgba(59, 130, 246, 0.4),
        0 0 70px rgba(59, 130, 246, 0.2),
        inset 0 2px 4px rgba(255, 255, 255, 0.15);
    transform: scale(1.06);
}

.mic-btn:hover:not(:disabled) .mic-icon {
    animation: none;
    transform: scale(1.15);
}

.mic-btn:disabled {
    opacity: 0.35;
    cursor: default;
    border-color: #475569;
    background: linear-gradient(145deg, #1e293b 0%, #0f172a 100%);
    box-shadow: none;
}

/* Mic connecting state ‚Äî loading spinner feel */
.mic-btn.connecting,
.mic-btn.processing {
    opacity: 0.6;
    cursor: wait;
    border-color: rgba(251, 191, 36, 0.4);
    animation: micConnectingPulse 2s ease-in-out infinite;
}

.mic-btn.processing {
    border-color: rgba(59, 130, 246, 0.5);
    animation: micProcessingPulse 1s ease-in-out infinite;
}

@keyframes micProcessingPulse {
    0%, 100% { opacity: 0.5; border-color: rgba(59, 130, 246, 0.3); }
    50% { opacity: 0.8; border-color: rgba(59, 130, 246, 0.7); }
}

@keyframes micConnectingPulse {
    0%, 100% { opacity: 0.5; border-color: rgba(251, 191, 36, 0.3); }
    50% { opacity: 0.7; border-color: rgba(251, 191, 36, 0.6); }
}

/* Mic disconnected state ‚Äî tap to reconnect */
.mic-btn.disconnected {
    opacity: 0.6;
    cursor: pointer;
    border-color: rgba(239, 68, 68, 0.4);
    background: linear-gradient(145deg, rgba(30, 30, 40, 0.9) 0%, rgba(50, 20, 20, 0.9) 100%);
}

.mic-btn.disconnected:hover {
    opacity: 0.8;
    border-color: rgba(239, 68, 68, 0.6);
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.2);
}

.mic-status-hint {
    display: none;
    font-size: 0.55rem;
    color: var(--text-muted);
    position: absolute;
    bottom: -18px;
    white-space: nowrap;
    letter-spacing: 0.02em;
}

.mic-btn.connecting .mic-status-hint,
.mic-btn.disconnected .mic-status-hint {
    display: block;
}

.mic-btn:disabled .mic-icon {
    animation: none;
}

/* ===== RECORDING STATE ===== */
.mic-btn.recording {
    border-color: #f87171;
    background: linear-gradient(145deg, #7f1d1d 0%, #991b1b 50%, #b91c1c 100%);
    color: #fff;
    box-shadow: 
        0 0 40px rgba(239, 68, 68, 0.5),
        0 0 80px rgba(239, 68, 68, 0.25),
        inset 0 2px 4px rgba(255, 255, 255, 0.15);
    animation: micRecordingGlow 1.2s ease-in-out infinite;
}

.mic-btn.recording .mic-icon {
    animation: micRecordingBounce 0.6s ease-in-out infinite;
}

@keyframes micRecordingGlow {
    0%, 100% { 
        box-shadow: 
            0 0 40px rgba(239, 68, 68, 0.5),
            0 0 80px rgba(239, 68, 68, 0.25),
            inset 0 2px 4px rgba(255, 255, 255, 0.15);
    }
    50% { 
        box-shadow: 
            0 0 60px rgba(239, 68, 68, 0.7),
            0 0 100px rgba(239, 68, 68, 0.4),
            inset 0 2px 4px rgba(255, 255, 255, 0.2);
    }
}

@keyframes micRecordingBounce {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.12); }
}

.btn-text {
    font-size: 0.7rem;
    font-weight: 600;
    color: currentColor;
    opacity: 0.9;
    text-align: center;
    line-height: 1.1;
    white-space: nowrap;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* ===== IDLE PULSE RINGS ===== */
.mic-pulse-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 120px;
    height: 120px;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    border: 2px solid rgba(59, 130, 246, 0.4);
    pointer-events: none;
    z-index: 1;
    opacity: 0;
}

.mic-btn:not(:disabled) ~ .mic-pulse-ring,
.mic-container:has(.mic-btn:not(:disabled)) .mic-pulse-ring {
    animation: micPulseRing 3s ease-out infinite;
}

.mic-pulse-ring-1 { animation-delay: 0s; }
.mic-pulse-ring-2 { animation-delay: 1s; }
.mic-pulse-ring-3 { animation-delay: 2s; }

@keyframes micPulseRing {
    0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.6;
        border-color: rgba(59, 130, 246, 0.5);
    }
    100% {
        transform: translate(-50%, -50%) scale(1.8);
        opacity: 0;
        border-color: rgba(59, 130, 246, 0);
    }
}

/* Hide pulse rings when recording */
.mic-container:has(.mic-btn.recording) .mic-pulse-ring {
    animation: none;
    opacity: 0;
}

/* ===== SOUND WAVE RINGS (Recording) ===== */
.mic-wave-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 120px;
    height: 120px;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    border: 3px solid rgba(239, 68, 68, 0);
    pointer-events: none;
    z-index: 1;
    opacity: 0;
}

.mic-container:has(.mic-btn.recording) .mic-wave-ring {
    animation: micWaveExpand 1.5s ease-out infinite;
}

.mic-wave-ring-1 { animation-delay: 0s; }
.mic-wave-ring-2 { animation-delay: 0.5s; }
.mic-wave-ring-3 { animation-delay: 1s; }

@keyframes micWaveExpand {
    0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.8;
        border-color: rgba(248, 113, 113, 0.8);
    }
    50% {
        opacity: 0.4;
        border-color: rgba(251, 146, 60, 0.6);
    }
    100% {
        transform: translate(-50%, -50%) scale(2.2);
        opacity: 0;
        border-color: rgba(251, 191, 36, 0);
    }
}

/* ===== WAVEFORM RING (Original, enhanced) ===== */
.waveform-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 140px;
    height: 140px;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    border: 2px solid transparent;
    pointer-events: none;
    z-index: 3;
    transition: all 0.3s ease;
}

.waveform-ring.active {
    border-color: rgba(239, 68, 68, 0.5);
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
    animation: waveformPulse 1.2s ease-in-out infinite;
}

@keyframes waveformPulse {
    0%, 100% { 
        transform: translate(-50%, -50%) scale(1); 
        opacity: 0.7;
        border-color: rgba(239, 68, 68, 0.5);
    }
    50% { 
        transform: translate(-50%, -50%) scale(1.1); 
        opacity: 0.3;
        border-color: rgba(251, 146, 60, 0.4);
    }
}

/* Status indicator ‚Äî voice-first prominent */
.status-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    font-size: 0.9rem;
    color: var(--text-secondary);
    padding: var(--spacing-xs) 0;
}

#status-text {
    font-weight: 600;
    letter-spacing: 0.02em;
}

/* Keyboard hint */
.keyboard-hint {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-align: center;
    padding: 4px var(--spacing-md);
    flex-shrink: 0;
}

.keyboard-hint kbd {
    display: inline-block;
    padding: 2px 6px;
    font-family: var(--font-mono);
    font-size: 0.7rem;
    color: var(--text-secondary);
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: 4px;
}

/* ===== MIC BUTTON: PROCESSING STATE ===== */
.mic-btn.processing {
    border-color: rgba(251, 191, 36, 0.5);
    background: linear-gradient(145deg, rgba(60, 50, 20, 0.9) 0%, rgba(80, 60, 10, 0.95) 50%, rgba(60, 50, 20, 0.9) 100%);
    color: var(--accent-amber);
    cursor: wait;
    animation: micProcessingPulse 1.5s ease-in-out infinite;
    box-shadow: 
        0 0 30px rgba(251, 191, 36, 0.25),
        0 0 60px rgba(251, 191, 36, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.mic-btn.processing .mic-icon::after {
    content: '‚è≥';
    font-size: 2.5rem;
}

.mic-btn.processing .mic-icon {
    font-size: 0;
}

@keyframes micProcessingPulse {
    0%, 100% { 
        opacity: 0.8;
        box-shadow: 0 0 30px rgba(251, 191, 36, 0.25), 0 0 60px rgba(251, 191, 36, 0.1);
    }
    50% { 
        opacity: 1;
        box-shadow: 0 0 50px rgba(251, 191, 36, 0.4), 0 0 80px rgba(251, 191, 36, 0.2);
    }
}

/* ===== MIC BUTTON: AI SPEAKING STATE ===== */
.mic-btn.ai-speaking {
    border-color: rgba(74, 222, 128, 0.5);
    background: linear-gradient(145deg, rgba(20, 60, 30, 0.9) 0%, rgba(10, 80, 40, 0.95) 50%, rgba(20, 60, 30, 0.9) 100%);
    color: var(--accent-green);
    animation: micSpeakingPulse 1.2s ease-in-out infinite;
    box-shadow: 
        0 0 30px rgba(74, 222, 128, 0.25),
        0 0 60px rgba(74, 222, 128, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.mic-btn.ai-speaking .mic-icon::after {
    content: 'üîä';
    font-size: 2.5rem;
}

.mic-btn.ai-speaking .mic-icon {
    font-size: 0;
}

@keyframes micSpeakingPulse {
    0%, 100% { 
        transform: scale(1);
        box-shadow: 0 0 30px rgba(74, 222, 128, 0.25), 0 0 60px rgba(74, 222, 128, 0.1);
    }
    50% { 
        transform: scale(1.03);
        box-shadow: 0 0 50px rgba(74, 222, 128, 0.4), 0 0 80px rgba(74, 222, 128, 0.2);
    }
}

/* ===== TEXT INPUT: COLLAPSED/EXPANDED (Voice-First) ===== */
.text-input-expand-btn {
    display: none;
    background: rgba(22, 30, 44, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 20px;
    color: var(--text-muted);
    font-size: 0.82rem;
    padding: 8px 18px;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.text-input-expand-btn:hover {
    background: rgba(96, 165, 250, 0.08);
    color: var(--text-secondary);
    border-color: rgba(96, 165, 250, 0.15);
}

/* =========================================================
   10. SCENE PANEL (RIGHT COLUMN)
   ========================================================= */
.scene-panel {
    background: rgba(12, 18, 28, 0.5);
    backdrop-filter: blur(28px) saturate(180%);
    -webkit-backdrop-filter: blur(28px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: var(--panel-radius);
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow-y: auto;
    overflow-x: hidden;
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.03);
}

.scene-panel::-webkit-scrollbar {
    width: 5px;
}
.scene-panel::-webkit-scrollbar-track {
    background: transparent;
}
.scene-panel::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
}

.scene-panel h2 {
    padding: var(--spacing-md) var(--spacing-xl);
    font-size: 0.82rem;
    font-weight: var(--font-weight-semibold);
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: var(--letter-spacing-wider);
    border-bottom: 1px solid var(--glass-border);
    flex-shrink: 0;
    background: var(--gradient-surface);
}

/* Scene display */
.scene-display {
    position: relative;
    width: 100%;
    min-height: 400px;
    aspect-ratio: 16 / 10;
    background: rgba(0, 0, 0, 0.15);
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
    overflow: hidden;
    flex-shrink: 0;
}

.scene-display img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    animation: sceneFadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes sceneFadeIn {
    from { opacity: 0; filter: blur(8px); transform: scale(1.02); }
    to { opacity: 1; filter: blur(0); transform: scale(1); }
}

/* Gradient overlay at bottom of scene */
.scene-display::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 80px;
    background: linear-gradient(transparent, rgba(10, 14, 20, 0.85));
    pointer-events: none;
    z-index: 3;
}

/* Placeholder */
.placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    gap: var(--spacing-md);
    color: var(--text-muted);
    padding: var(--spacing-xl);
    text-align: center;
    background: radial-gradient(ellipse at center, rgba(96, 165, 250, 0.05) 0%, transparent 70%);
}

.placeholder-icon {
    font-size: 3.5rem;
    opacity: 0.5;
    animation: placeholderFloat 3s ease-in-out infinite;
    filter: drop-shadow(0 4px 12px rgba(96, 165, 250, 0.2));
}

@keyframes placeholderFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
}

.placeholder p {
    font-size: 0.85rem;
}

.placeholder-hint {
    font-size: 0.75rem !important;
    color: var(--text-muted);
    opacity: 0.7;
    margin-top: var(--spacing-xs);
}

/* Scene controls overlay */
.scene-controls {
    position: absolute;
    bottom: var(--spacing-md);
    right: var(--spacing-md);
    display: flex;
    gap: 6px;
    opacity: 0;
    transition: opacity var(--transition-base);
    z-index: 5;
}

.scene-display:hover .scene-controls {
    opacity: 1;
}

.scene-control-btn {
    width: 40px;
    height: 40px;
    border-radius: var(--card-radius);
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(15, 25, 35, 0.9);
    color: var(--text-primary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    transition: all var(--transition-fast);
    backdrop-filter: blur(12px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}
.scene-control-btn:hover {
    background: var(--accent-blue);
    border-color: var(--accent-blue);
    transform: scale(1.1);
}

.scene-control-btn.active {
    background: var(--accent-blue);
    border-color: var(--accent-blue);
}

/* =========================================================
   MEASUREMENT TOOL STYLES
   ========================================================= */

.measurement-canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10;
}

.measurement-canvas.active {
    pointer-events: auto;
    cursor: crosshair;
}

.measurement-menu {
    position: absolute;
    top: 60px;
    right: 12px;
    width: 260px;
    background: rgba(15, 25, 35, 0.95);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    z-index: 20;
    backdrop-filter: blur(12px);
    overflow: hidden;
}

.measurement-menu.hidden {
    display: none;
}

.measurement-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: rgba(0, 212, 255, 0.1);
    border-bottom: 1px solid var(--border-color);
    font-weight: 600;
    color: var(--accent-blue);
}

.measurement-menu-close {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.25rem;
    cursor: pointer;
    padding: 0;
    line-height: 1;
}

.measurement-menu-close:hover {
    color: var(--text-primary);
}

.measurement-menu-tools {
    display: flex;
    gap: 8px;
    padding: 12px;
}

.measurement-tool-btn {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 12px 8px;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
    color: var(--text-primary);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.measurement-tool-btn:hover {
    background: rgba(0, 212, 255, 0.1);
    border-color: var(--accent-blue);
}

.measurement-tool-btn.active {
    background: var(--accent-blue);
    border-color: var(--accent-blue);
    color: #000;
}

.measurement-tool-btn .tool-icon {
    font-size: 1.5rem;
}

.measurement-tool-btn .tool-name {
    font-weight: 600;
    font-size: 0.85rem;
}

.measurement-tool-btn .tool-desc {
    font-size: 0.7rem;
    color: var(--text-muted);
}

.measurement-tool-btn.active .tool-desc {
    color: rgba(0, 0, 0, 0.6);
}

.measurement-menu-options {
    display: flex;
    gap: 12px;
    padding: 12px;
    border-bottom: 1px solid var(--border-color);
}

.measurement-menu-options label {
    display: flex;
    flex-direction: column;
    gap: 4px;
    font-size: 0.75rem;
    color: var(--text-muted);
}

.measurement-menu-options select,
.measurement-menu-options input {
    padding: 6px 8px;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    color: var(--text-primary);
    font-size: 0.85rem;
}

.measurement-menu-options input {
    width: 70px;
}

.measurement-menu-list {
    padding: 12px;
    max-height: 200px;
    overflow-y: auto;
}

.measurement-menu-list h4 {
    margin: 0 0 8px;
    font-size: 0.8rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.measurement-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px;
    background: var(--bg-surface);
    border-radius: 4px;
    margin-bottom: 6px;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.measurement-item:hover {
    background: rgba(0, 212, 255, 0.1);
}

.measurement-item.selected {
    background: rgba(0, 212, 255, 0.2);
    box-shadow: 0 0 0 1px var(--accent-blue);
}

.measurement-icon {
    font-size: 1rem;
}

.measurement-value {
    flex: 1;
    font-weight: 600;
    font-size: 0.9rem;
}

.measurement-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    max-width: 60px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.measurement-edit,
.measurement-delete {
    background: none;
    border: none;
    padding: 4px;
    cursor: pointer;
    font-size: 0.85rem;
    opacity: 0.6;
    transition: opacity var(--transition-fast);
}

.measurement-edit:hover,
.measurement-delete:hover {
    opacity: 1;
}

.measurement-menu-actions {
    display: flex;
    gap: 8px;
    padding: 12px;
    border-top: 1px solid var(--border-color);
}

.measurement-menu-actions .btn {
    flex: 1;
    padding: 8px 12px;
    font-size: 0.8rem;
}

.btn-sm {
    padding: 6px 12px !important;
    font-size: 0.8rem !important;
}

/* ==================== Evidence Marker Styles ==================== */

.evidence-marker-canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 11;
}

.evidence-marker-canvas.active {
    pointer-events: auto;
    cursor: crosshair;
}

.evidence-marker-menu {
    position: absolute;
    right: 10px;
    top: 50px;
    width: 280px;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    overflow: hidden;
}

.evidence-marker-menu.hidden {
    display: none;
}

.marker-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: var(--bg-surface-alt);
    font-weight: 600;
    color: var(--text-primary);
}

.marker-menu-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0;
    line-height: 1;
}

.marker-menu-close:hover {
    color: var(--text-primary);
}

.marker-menu-numbers {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color);
}

.marker-menu-numbers label {
    display: block;
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.marker-number-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 6px;
}

.marker-number-btn {
    width: 40px;
    height: 40px;
    border: 2px solid var(--border-color);
    border-radius: 50%;
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-weight: bold;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.marker-number-btn:hover:not(:disabled) {
    border-color: var(--accent-blue);
    background: var(--accent-blue-muted);
}

.marker-number-btn.selected {
    border-color: var(--accent-blue);
    background: var(--accent-blue);
    color: white;
}

.marker-number-btn.used {
    opacity: 0.4;
    cursor: not-allowed;
    background: var(--bg-surface-alt);
}

.marker-number-btn.used::after {
    content: '‚úì';
    position: absolute;
    font-size: 0.7rem;
}

.marker-menu-categories {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color);
}

.marker-menu-categories label {
    display: block;
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.marker-category-btns {
    display: flex;
    gap: 8px;
}

.marker-category-btn {
    width: 40px;
    height: 40px;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    background: var(--bg-secondary);
    font-size: 1.2rem;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.marker-category-btn:hover {
    border-color: var(--cat-color, var(--accent-blue));
    background: color-mix(in srgb, var(--cat-color, var(--accent-blue)) 20%, transparent);
}

.marker-category-btn.active {
    border-color: var(--cat-color, var(--accent-blue));
    background: color-mix(in srgb, var(--cat-color, var(--accent-blue)) 30%, transparent);
}

.marker-menu-actions {
    display: flex;
    gap: 8px;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color);
}

.marker-menu-list {
    max-height: 200px;
    overflow-y: auto;
    padding: 8px;
}

.marker-menu-list h4 {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin: 0 0 8px 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.marker-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    margin-bottom: 4px;
    background: var(--bg-secondary);
    border-radius: 6px;
    cursor: pointer;
    transition: background var(--transition-fast);
}

.marker-item:hover {
    background: var(--bg-surface-alt);
}

.marker-item.selected {
    background: var(--accent-blue-muted);
    border-color: var(--accent-blue);
}

.marker-num {
    font-weight: bold;
    color: var(--text-primary);
    min-width: 28px;
}

.marker-cat {
    font-size: 1rem;
}

.marker-label {
    flex: 1;
    color: var(--text-secondary);
    font-size: 0.85rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.marker-edit,
.marker-delete {
    background: none;
    border: none;
    padding: 4px;
    cursor: pointer;
    opacity: 0.6;
    transition: opacity var(--transition-fast);
}

.marker-edit:hover,
.marker-delete:hover {
    opacity: 1;
}

.marker-menu-footer {
    display: flex;
    gap: 8px;
    padding: 12px 16px;
    border-top: 1px solid var(--border-color);
}

.marker-menu-footer .btn {
    flex: 1;
}

/* Scene description */
.scene-description {
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: 0.85rem;
    color: var(--text-secondary);
    line-height: 1.6;
    border-bottom: 1px solid var(--border-color);
}

.scene-description:empty {
    display: none;
}

/* =========================================================
   11. SCENE STATS
   ========================================================= */
.scene-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
    gap: var(--spacing-sm);
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
}

.stat-card {
    text-align: center;
    padding: var(--spacing-sm);
    background: var(--bg-surface);
    border-radius: var(--card-radius);
    border: 1px solid var(--border-color);
}

.stat-value {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--accent-blue);
    line-height: 1.2;
}

.stat-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin-top: 2px;
}

.stat-card.warning .stat-value {
    color: var(--accent-amber);
}

/* =========================================================
   12. INVESTIGATION PROGRESS
   ========================================================= */
.investigation-progress {
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
}

.progress-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-sm);
}

.progress-title {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.progress-pct {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--accent-blue);
}

.progress-bar-track {
    height: 8px;
    background: var(--bg-surface);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: var(--spacing-sm);
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
}

.progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
    border-radius: 4px;
    transition: width 0.6s ease;
    position: relative;
}

.progress-bar-fill::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
    animation: progressShimmer 2s infinite;
}

@keyframes progressShimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.progress-checklist {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.progress-checklist li {
    font-size: 0.8rem;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 8px;
    border-radius: var(--btn-radius);
    transition: all var(--transition-base);
}

.progress-checklist li.done {
    color: var(--accent-green);
    background: var(--accent-green-muted);
}

.progress-checklist li.done .check-icon {
    color: var(--accent-green);
}

.check-icon {
    font-size: 0.8rem;
    flex-shrink: 0;
}

/* =========================================================
   13. EVIDENCE BOARD
   ========================================================= */
.evidence-board {
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
}

.evidence-title {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-sm);
}

.evidence-cards {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.evidence-card {
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-left: 3px solid var(--accent-blue);
    border-radius: var(--card-radius);
    padding: var(--spacing-sm) var(--spacing-md);
    font-size: 0.85rem;
    color: var(--text-secondary);
    transition: all var(--transition-base);
}
.evidence-card:hover {
    border-color: var(--border-color-hover);
    background: var(--bg-surface-alt);
    transform: translateX(2px);
    box-shadow: var(--shadow-sm);
}

/* Evidence category color coding */
.evidence-card[data-category="physical"],
.evidence-card.cat-physical {
    border-left-color: var(--accent-blue);
}
.evidence-card[data-category="witness"],
.evidence-card.cat-witness {
    border-left-color: var(--accent-green);
}
.evidence-card[data-category="temporal"],
.evidence-card.cat-temporal {
    border-left-color: var(--accent-amber);
}
.evidence-card[data-category="environmental"],
.evidence-card.cat-environmental {
    border-left-color: #14b8a6;
}

.evidence-timeline {
    margin-top: var(--spacing-md);
    position: relative;
}

/* Timeline connecting line */
.evidence-timeline::before {
    content: '';
    position: absolute;
    left: 6px;
    top: 2rem;
    bottom: 0;
    width: 2px;
    background: var(--border-color);
}

.timeline-events {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    padding-left: var(--spacing-lg);
    position: relative;
}

.timeline-events > * {
    position: relative;
}

.timeline-events > *::before {
    content: '';
    position: absolute;
    left: calc(-1 * var(--spacing-lg) + 2px);
    top: 50%;
    transform: translateY(-50%);
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--accent-blue);
    border: 2px solid var(--bg-secondary);
}

/* =========================================================
   14. EXPORT CONTROLS
   ========================================================= */
.export-controls {
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
}

.export-controls h4 {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-sm);
}

.export-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
}

.btn-export {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--text-secondary);
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--btn-radius);
    cursor: pointer;
    font-family: var(--font-family);
    transition: all var(--transition-base);
}
.btn-export:hover {
    background: var(--accent-blue-muted);
    border-color: var(--accent-blue);
    color: var(--accent-blue);
}

.export-menu {
    position: absolute;
    top: 100%;
    right: 0;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
    box-shadow: var(--shadow-lg);
    min-width: 180px;
    z-index: 100;
    overflow: hidden;
}

.export-menu-item {
    display: block;
    width: 100%;
    padding: 10px 14px;
    font-size: 0.85rem;
    color: var(--text-secondary);
    background: none;
    border: none;
    text-align: left;
    cursor: pointer;
    font-family: var(--font-family);
    transition: background var(--transition-fast);
}
.export-menu-item:hover {
    background: var(--accent-blue-muted);
    color: var(--text-primary);
}

/* =========================================================
   15. TIMELINE PANEL
   ========================================================= */
.timeline-panel {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--panel-radius);
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
}

.timeline-panel h3 {
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    border-bottom: 1px solid var(--border-color);
    flex-shrink: 0;
}

.timeline {
    flex: 1;
    overflow-y: auto;
    padding: var(--spacing-sm) var(--spacing-md);
}

.timeline::-webkit-scrollbar {
    width: 5px;
}
.timeline::-webkit-scrollbar-thumb {
    background: var(--bg-surface-alt);
    border-radius: 3px;
}

/* Timeline entries */
.timeline-entry {
    display: flex;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    border-radius: var(--card-radius);
    cursor: pointer;
    transition: background var(--transition-fast);
    position: relative;
}
.timeline-entry:hover {
    background: var(--bg-surface);
}
.timeline-entry.active {
    background: var(--accent-blue-muted);
    border: 1px solid rgba(59, 130, 246, 0.2);
}

.timeline-entry-number {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-secondary);
    flex-shrink: 0;
}
.timeline-entry.active .timeline-entry-number {
    background: var(--accent-blue);
    border-color: var(--accent-blue);
    color: #fff;
}

.timeline-entry-thumb {
    width: 48px;
    height: 32px;
    border-radius: 4px;
    overflow: hidden;
    flex-shrink: 0;
    background: var(--bg-surface);
}
.timeline-entry-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.timeline-entry-info {
    flex: 1;
    min-width: 0;
}

.timeline-entry-info p {
    font-size: 0.78rem;
    color: var(--text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.timeline-entry-info .time {
    font-size: 0.7rem;
    color: var(--text-muted);
}

/* =========================================================
   16. EMPTY STATE
   ========================================================= */
.empty-state {
    text-align: center;
    padding: var(--spacing-2xl) var(--spacing-xl);
    color: var(--text-muted);
    font-size: 0.9rem;
    font-style: normal;
    font-weight: var(--font-weight-normal);
    letter-spacing: var(--letter-spacing-wide);
    opacity: 0.7;
    background: radial-gradient(ellipse at center, rgba(96, 165, 250, 0.04) 0%, transparent 60%);
    border-radius: var(--card-radius);
    margin: var(--spacing-md);
}

/* =========================================================
   17. BUTTONS
   ========================================================= */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 9px 18px;
    font-size: 0.84rem;
    font-weight: var(--font-weight-medium);
    font-family: var(--font-family);
    letter-spacing: var(--letter-spacing-normal);
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.06);
    background: rgba(22, 30, 44, 0.5);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
    text-decoration: none;
    line-height: 1.4;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.04);
}

.btn:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.btn:active:not(:disabled) {
    transform: translateY(0);
    box-shadow: var(--shadow-xs);
}

.btn:disabled {
    opacity: 0.35;
    cursor: default;
}

.btn:focus-visible {
    outline: 2px solid var(--accent-blue);
    outline-offset: 2px;
    box-shadow: var(--shadow-glow-blue);
}

/* Primary ‚Äî Gradient accent */
.btn-primary {
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    border-color: transparent;
    color: #fff;
    font-weight: var(--font-weight-semibold);
    box-shadow: 0 2px 12px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15);
}
.btn-primary:hover:not(:disabled) {
    background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
    border-color: transparent;
    color: #fff;
    transform: translateY(-1px);
    box-shadow: 0 4px 20px rgba(59, 130, 246, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

/* Secondary ‚Äî Glass style */
.btn-secondary {
    background: var(--glass-bg);
    border-color: var(--glass-border);
    color: var(--text-secondary);
}
.btn-secondary:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.12);
    color: var(--text-primary);
}

/* Success */
.btn-success {
    background: linear-gradient(135deg, var(--accent-green) 0%, #22c55e 100%);
    border-color: transparent;
    color: #fff;
    box-shadow: var(--shadow-sm), var(--shadow-glow-green);
}
.btn-success:hover:not(:disabled) {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    border-color: transparent;
    color: #fff;
    transform: translateY(-2px);
}

/* Danger */
.btn-danger {
    background: linear-gradient(135deg, var(--accent-red) 0%, #ef4444 100%);
    border-color: transparent;
    color: #fff;
    box-shadow: var(--shadow-sm), 0 0 15px rgba(248, 113, 113, 0.2);
}
.btn-danger:hover:not(:disabled) {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    border-color: transparent;
    color: #fff;
    transform: translateY(-2px);
}

/* Icon-only button */
.btn-icon {
    padding: 10px;
    min-width: 40px;
    min-height: 40px;
}

/* Large button */
.btn-lg {
    padding: 14px 28px;
    font-size: 1rem;
}

/* =========================================================
   18. MODALS
   ========================================================= */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 1000;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(8px) saturate(120%);
    -webkit-backdrop-filter: blur(8px) saturate(120%);
    align-items: center;
    justify-content: center;
    padding: var(--spacing-lg);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.25s ease, visibility 0.25s ease;
}

.modal.active {
    display: flex;
    opacity: 1;
    visibility: visible;
}

.modal-content {
    background: rgba(14, 20, 32, 0.92);
    backdrop-filter: blur(32px) saturate(180%);
    -webkit-backdrop-filter: blur(32px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.07);
    border-radius: 20px;
    width: 100%;
    max-width: 540px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 24px 80px rgba(0, 0, 0, 0.4), 0 8px 24px rgba(0, 0, 0, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.05);
    transform: translateY(16px) scale(0.97);
    transition: transform 0.3s cubic-bezier(0.22, 1, 0.36, 1);
}

.modal.active .modal-content {
    transform: translateY(0) scale(1);
}

.modal-content h2 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
}

.modal-wide {
    max-width: 720px;
}

.modal-fullwidth {
    max-width: 95vw;
    width: 95vw;
    max-height: 90vh;
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
}

.modal-header h2 {
    margin: 0;
}

.modal-close {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.06);
    background: rgba(255, 255, 255, 0.04);
    color: var(--text-muted);
    font-size: 1.1rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s ease;
    flex-shrink: 0;
    line-height: 1;
}
.modal-close:hover {
    background: rgba(248, 113, 113, 0.1);
    border-color: rgba(248, 113, 113, 0.2);
    color: var(--accent-red);
}
.modal-close:focus-visible {
    outline: 2px solid var(--accent-blue);
    outline-offset: 2px;
}

.modal-body {
    padding: var(--spacing-lg);
}

.modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: var(--spacing-sm);
    padding: var(--spacing-md) var(--spacing-lg);
    border-top: 1px solid var(--border-color);
}

/* =========================================================
   19. ONBOARDING
   ========================================================= */
.onboarding-overlay {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 2000;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(12px) saturate(120%);
    -webkit-backdrop-filter: blur(12px) saturate(120%);
    align-items: center;
    justify-content: center;
    padding: var(--spacing-lg);
}

.onboarding-overlay.active {
    display: flex;
}

.onboarding-modal {
    /* extends modal-content */
}

.onboarding-header {
    border-bottom: 1px solid var(--border-color);
}

.onboarding-content {
    padding: var(--spacing-lg);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
}

/* Grid layout for the onboarding modal (not overlay) */
.onboarding-content.onboarding-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-md);
}

.onboarding-grid .onboarding-step {
    display: flex;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
    padding: var(--spacing-md);
    transition: border-color var(--transition-base), transform var(--transition-base);
}

.onboarding-grid .onboarding-step:hover {
    border-color: var(--accent-blue);
    transform: translateY(-2px);
}

.onboarding-grid .onboarding-step h3 {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
}

.onboarding-grid .onboarding-step p {
    font-size: 0.8rem;
    max-width: none;
}

.onboarding-step {
    display: none;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--spacing-md);
    animation: fadeIn 0.3s ease;
}

.onboarding-step.active {
    display: flex;
}

.onboarding-icon {
    font-size: 2.5rem;
    line-height: 1;
    margin-bottom: var(--spacing-xs);
}

.onboarding-step h2 {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text-primary);
}

.onboarding-step p {
    font-size: 0.9rem;
    color: var(--text-secondary);
    line-height: 1.6;
    max-width: 440px;
}

.onboarding-actions {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: center;
}

.onboarding-indicators {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin-top: var(--spacing-sm);
}

.indicator-dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.12);
    transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);
}
.indicator-dot.active {
    background: var(--accent-blue);
    width: 22px;
    border-radius: 4px;
    box-shadow: 0 0 8px rgba(96, 165, 250, 0.3);
}

.onboarding-footer {
    padding: var(--spacing-md) var(--spacing-lg);
    border-top: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-md);
}

.onboarding-checkbox {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-size: 0.85rem;
    color: var(--text-muted);
    cursor: pointer;
}

.onboarding-checkbox input[type="checkbox"] {
    accent-color: var(--accent-blue);
}

/* =========================================================
   20. TOAST NOTIFICATIONS
   ========================================================= */
.toast-container {
    position: fixed;
    top: var(--spacing-lg);
    right: var(--spacing-lg);
    z-index: 3000;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    max-width: 380px;
    pointer-events: none;
}

.toast {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 18px;
    background: rgba(18, 24, 38, 0.82);
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 14px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.06);
    color: var(--text-primary);
    font-size: 0.84rem;
    font-weight: var(--font-weight-medium);
    pointer-events: auto;
    animation: toastSlideIn 0.35s cubic-bezier(0.22, 1, 0.36, 1);
    border-left: none;
    position: relative;
    overflow: hidden;
}

/* Subtle top accent glow */
.toast::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.12), transparent);
}

.toast.toast-success {
    border-color: rgba(74, 222, 128, 0.15);
    background: rgba(14, 28, 22, 0.85);
}
.toast.toast-success::before {
    background: linear-gradient(90deg, transparent, rgba(74, 222, 128, 0.4), transparent);
}
.toast.toast-error {
    border-color: rgba(248, 113, 113, 0.15);
    background: rgba(32, 16, 16, 0.85);
}
.toast.toast-error::before {
    background: linear-gradient(90deg, transparent, rgba(248, 113, 113, 0.4), transparent);
}
.toast.toast-warning {
    border-color: rgba(251, 191, 36, 0.15);
    background: rgba(32, 28, 14, 0.85);
}
.toast.toast-warning::before {
    background: linear-gradient(90deg, transparent, rgba(251, 191, 36, 0.4), transparent);
}
.toast.toast-info {
    border-color: rgba(96, 165, 250, 0.12);
}

@keyframes toastSlideIn {
    from {
        opacity: 0;
        transform: translateX(16px) scale(0.95);
        filter: blur(4px);
    }
    to {
        opacity: 1;
        transform: translateX(0) scale(1);
        filter: blur(0);
    }
}

.toast-icon {
    font-size: 1.1rem;
    flex-shrink: 0;
    line-height: 1;
}

.toast-message {
    flex: 1;
    line-height: 1.5;
}

.toast-close {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 0.9rem;
    padding: 2px 6px;
    line-height: 1;
    flex-shrink: 0;
    transition: all var(--transition-fast);
    border-radius: 6px;
    opacity: 0.5;
}
.toast-close:hover {
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.08);
    opacity: 1;
}

/* =========================================================
   21. HELP BUTTON
   ========================================================= */
.help-button {
    position: fixed;
    bottom: var(--spacing-lg);
    right: var(--spacing-lg);
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    font-size: 1.1rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-md);
    transition: all var(--transition-base);
    z-index: 900;
}
.help-button:hover {
    background: var(--accent-blue-muted);
    border-color: var(--accent-blue);
    color: var(--accent-blue);
}

/* =========================================================
   22. VERSION BADGE
   ========================================================= */
.version-badge {
    position: fixed;
    bottom: var(--spacing-sm);
    left: var(--spacing-md);
    font-size: 0.65rem;
    color: var(--text-muted);
    opacity: 0.5;
    z-index: 10;
    display: flex;
    align-items: center;
    gap: 4px;
    background: rgba(15, 25, 35, 0.8);
    padding: 3px 10px;
    border-radius: 20px;
    backdrop-filter: blur(4px);
    border: 1px solid var(--border-color);
    transition: opacity var(--transition-base);
}

.version-badge:hover {
    opacity: 0.9;
}

.version-label {
    font-weight: 600;
}

.version-number {
    font-family: var(--font-mono);
    font-weight: 600;
    color: var(--accent-blue);
}

.version-separator {
    opacity: 0.5;
}

.version-challenge {
    color: var(--text-muted);
    font-weight: 400;
}

/* =========================================================
   23. SHORTCUTS OVERLAY
   ========================================================= */
.shortcuts-overlay {
    position: fixed;
    inset: 0;
    z-index: 1500;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-lg);
}

.shortcuts-content {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--panel-radius);
    padding: var(--spacing-xl);
    max-width: 540px;
    width: 100%;
    box-shadow: var(--shadow-lg);
}

.shortcuts-content h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-md);
}

.shortcuts-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-lg);
}

.shortcut-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm);
    background: var(--bg-surface);
    border-radius: var(--card-radius);
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.shortcut-item kbd {
    display: inline-block;
    padding: 3px 8px;
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--text-primary);
    background: var(--bg-surface-alt);
    border: 1px solid var(--border-color);
    border-radius: 4px;
}

.mobile-voice-help-body p {
    font-size: 0.86rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-sm);
}

.mobile-voice-help-body ul {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.mobile-voice-help-body li {
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
    padding: 10px 12px;
    font-size: 0.82rem;
    color: var(--text-secondary);
}

.mobile-voice-coachmark {
    position: fixed;
    inset: 0;
    z-index: 1800;
    background: rgba(0, 0, 0, 0.72);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-md);
}

.mobile-voice-coachmark-card {
    width: min(360px, 100%);
    background: var(--bg-secondary);
    border: 1px solid var(--glass-border);
    border-radius: var(--panel-radius);
    padding: var(--spacing-lg);
    box-shadow: var(--shadow-lg);
}

.mobile-voice-coachmark-card h2 {
    font-size: 1rem;
    margin-bottom: var(--spacing-sm);
}

.mobile-voice-coachmark-card p {
    font-size: 0.86rem;
    color: var(--text-secondary);
}

.mobile-voice-coachmark-actions {
    margin-top: var(--spacing-md);
    display: flex;
    justify-content: flex-end;
}

/* =========================================================
   24. COMPARISON MODAL
   ========================================================= */
.comparison-modal-body {
    display: flex;
    gap: var(--spacing-md);
    padding: var(--spacing-lg);
    min-height: 400px;
}

.comparison-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-width: 0;
}

.comparison-header {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--border-color);
    margin-bottom: var(--spacing-sm);
}

.comparison-image-container {
    flex: 1;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
}

.comparison-image-container img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.comparison-description {
    font-size: 0.85rem;
    color: var(--text-secondary);
    padding: var(--spacing-sm) 0;
    line-height: 1.5;
}

.comparison-divider-vertical {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    flex-shrink: 0;
}

.divider-handle {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--bg-surface-alt);
    border: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* =========================================================
   24b. VERSION COMPARISON ENHANCEMENTS
   ========================================================= */
.comparison-selectors {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--bg-surface-alt);
    border-bottom: 1px solid var(--border-color);
    flex-wrap: wrap;
}

.comparison-selector-group {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.comparison-selector-group label {
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-secondary);
}

.comparison-select {
    padding: var(--spacing-xs) var(--spacing-sm);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    background: var(--bg-surface);
    color: var(--text-primary);
    font-size: 0.85rem;
    min-width: 140px;
}

.comparison-vs {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-muted);
    padding: 0 var(--spacing-sm);
}

.comparison-diff-summary {
    display: flex;
    gap: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-lg);
    background: var(--bg-surface);
    border-bottom: 1px solid var(--border-color);
    flex-wrap: wrap;
}

.diff-badge {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
    font-weight: 500;
}

.diff-badge.diff-added {
    background: rgba(34, 197, 94, 0.15);
    color: #22c55e;
}

.diff-badge.diff-removed {
    background: rgba(239, 68, 68, 0.15);
    color: #ef4444;
}

.diff-badge.diff-changed {
    background: rgba(234, 179, 8, 0.15);
    color: #eab308;
}

.diff-badge.diff-unchanged {
    background: rgba(100, 116, 139, 0.15);
    color: var(--text-muted);
}

.diff-count {
    font-weight: 700;
    font-size: 0.9rem;
}

.comparison-timestamp {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-weight: 400;
    margin-left: var(--spacing-sm);
}

.comparison-elements {
    max-height: 150px;
    overflow-y: auto;
    padding: var(--spacing-sm);
    font-size: 0.8rem;
    background: var(--bg-surface-alt);
    border-radius: var(--radius-sm);
    margin-top: var(--spacing-sm);
}

.comparison-element-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-xs);
    border-radius: var(--radius-xs);
    margin-bottom: 2px;
}

.comparison-element-item.added {
    background: rgba(34, 197, 94, 0.1);
    border-left: 3px solid #22c55e;
}

.comparison-element-item.removed {
    background: rgba(239, 68, 68, 0.1);
    border-left: 3px solid #ef4444;
}

.comparison-element-item.changed {
    background: rgba(234, 179, 8, 0.1);
    border-left: 3px solid #eab308;
}

.comparison-changes-panel {
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--bg-surface-alt);
    border-top: 1px solid var(--border-color);
    max-height: 200px;
    overflow-y: auto;
}

.comparison-changes-panel h4 {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
}

.comparison-changes-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.change-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm);
    background: var(--bg-surface);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--accent-color);
}

.change-item-header {
    font-weight: 600;
    font-size: 0.85rem;
    color: var(--text-primary);
}

.change-item-detail {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.change-item-detail .before {
    color: #ef4444;
    text-decoration: line-through;
}

.change-item-detail .after {
    color: #22c55e;
}

/* =========================================================
   25. QUOTA / MODEL SELECTOR
   ========================================================= */
.model-selector-section {
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
}

.model-selector-section h3 {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
}

.model-select-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.model-select-wrapper {
    position: relative;
}

.model-select {
    width: 100%;
    padding: 10px 14px;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--input-radius);
    color: var(--text-primary);
    font-size: 0.9rem;
    font-family: var(--font-family);
    cursor: pointer;
    outline: none;
    appearance: none;
    -webkit-appearance: none;
}
.model-select:focus {
    border-color: var(--accent-blue);
}

.model-help-text {
    font-size: 0.8rem;
    color: var(--text-muted);
    line-height: 1.5;
}

/* Quota dashboard */
.quota-dashboard {
    padding: var(--spacing-lg);
}

.quota-dashboard.loading {
    opacity: 0.5;
    pointer-events: none;
}

.quota-dashboard h3 {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-md);
}

.quota-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-sm);
}

.quota-card {
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
    padding: var(--spacing-md);
    transition: border-color var(--transition-base);
}
.quota-card:hover {
    border-color: var(--border-color-hover);
}

.quota-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--spacing-sm);
}

.quota-header h4 {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-primary);
}

.quota-badge {
    font-size: 0.7rem;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 10px;
    background: var(--accent-green-muted);
    color: var(--accent-green);
    text-transform: uppercase;
    letter-spacing: 0.03em;
}
.quota-badge.warning {
    background: var(--accent-amber-muted);
    color: var(--accent-amber);
}
.quota-badge.danger {
    background: var(--accent-red-muted);
    color: var(--accent-red);
}

.quota-bar-container {
    height: 6px;
    background: var(--bg-secondary);
    border-radius: 3px;
    overflow: hidden;
    margin: var(--spacing-sm) 0;
}

.quota-bar {
    height: 100%;
    background: var(--accent-blue);
    border-radius: 3px;
    transition: width 0.4s ease;
}
.quota-bar.warning {
    background: var(--accent-amber);
}
.quota-bar.danger {
    background: var(--accent-red);
}

.quota-bar::after {
    display: none;
}

.quota-label {
    display: flex;
    justify-content: space-between;
    font-size: 0.75rem;
    color: var(--text-muted);
}

.quota-label span {
    font-family: var(--font-mono);
}

.quota-footer {
    margin-top: var(--spacing-md);
    text-align: center;
}

.quota-disclaimer {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-style: italic;
}

/* =========================================================
   26. ANALYTICS DASHBOARD
   ========================================================= */
.analytics-dashboard {
    padding: var(--spacing-lg);
}

.analytics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: var(--spacing-sm);
}

.analytics-card {
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
    padding: var(--spacing-md);
    text-align: center;
}

.analytics-icon {
    font-size: 1.5rem;
    margin-bottom: var(--spacing-xs);
}

.analytics-value {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--accent-blue);
}

.analytics-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

/* =========================================================
   27. SESSION LIST
   ========================================================= */
.session-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    max-height: 50vh;
    overflow-y: auto;
}

.session-list::-webkit-scrollbar {
    width: 5px;
}
.session-list::-webkit-scrollbar-thumb {
    background: var(--bg-surface-alt);
    border-radius: 3px;
}

/* =========================================================
   28. SERVER INFO PANEL
   ========================================================= */
.server-info-panel {
    padding: var(--spacing-lg);
}

.info-section {
    margin-bottom: var(--spacing-lg);
}

.info-section h4 {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-sm);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.info-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-sm);
}

.info-item {
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
    padding: var(--spacing-sm) var(--spacing-md);
}

.info-key {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.info-value {
    font-size: 0.9rem;
    color: var(--text-primary);
    font-family: var(--font-mono);
    word-break: break-all;
}

/* =========================================================
   29. FEATURE BADGES
   ========================================================= */
.feature-badges {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-xs);
}

.feature-badges span {
    display: inline-block;
    padding: 3px 10px;
    font-size: 0.75rem;
    font-weight: 500;
    border-radius: 12px;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
}

/* =========================================================
   30. ELEMENT INSIGHTS
   ========================================================= */
.element-insights {
    padding: var(--spacing-md) var(--spacing-lg);
    border-top: 1px solid var(--border-color);
}

.insight-row {
    display: flex;
    justify-content: space-between;
    padding: 4px 0;
    font-size: 0.85rem;
}

.insight-label {
    color: var(--text-muted);
}

.insight-value {
    color: var(--text-primary);
    font-weight: 500;
}

/* =========================================================
   31. SCROLLBAR GLOBAL
   ========================================================= */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}
::-webkit-scrollbar-track {
    background: transparent;
}
::-webkit-scrollbar-thumb {
    background: var(--bg-surface-alt);
    border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
    background: var(--text-muted);
}

/* =========================================================
   32. SELECTION & FOCUS
   ========================================================= */
::selection {
    background: var(--accent-blue-muted);
    color: var(--text-primary);
}

:focus-visible {
    outline: 2px solid var(--accent-blue);
    outline-offset: 2px;
}

/* =========================================================
   33. TOOLTIPS (data-tooltip)
   ========================================================= */
[data-tooltip] {
    position: relative;
}

[data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: calc(100% + 6px);
    left: 50%;
    transform: translateX(-50%);
    padding: 4px 10px;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--text-primary);
    background: var(--bg-surface-alt);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    white-space: nowrap;
    pointer-events: none;
    opacity: 0;
    transition: opacity var(--transition-fast);
    z-index: 500;
}

[data-tooltip]:hover::after {
    opacity: 1;
}

/* =========================================================
   34. ANIMATIONS
   ========================================================= */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(12px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* =========================================================
   35. SKELETON / LOADING
   ========================================================= */
@keyframes skeleton-loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

.skeleton {
    background: linear-gradient(
        90deg,
        #1e2d3d 25%,
        #243447 50%,
        #1e2d3d 75%
    );
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s ease-in-out infinite;
    border-radius: 6px;
}

@keyframes skeleton-pulse {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

.skeleton-text {
    height: 14px;
    margin-bottom: 8px;
    background: linear-gradient(90deg, #1e2d3d 25%, #243447 50%, #1e2d3d 75%);
    background-size: 200% 100%;
    animation: skeleton-pulse 1.5s ease-in-out infinite;
    border-radius: 6px;
}

.skeleton-text:last-child {
    width: 60%;
}

/* =========================================================
   36. PRINT STYLES
   ========================================================= */
@media print {
    body {
        background: #fff;
        color: #000;
    }

    .header,
    .help-button,
    .version-badge,
    .toast-container,
    .controls,
    .text-input,
    .suggested-actions,
    .export-controls,
    .particle-canvas {
        display: none !important;
    }

    .container {
        max-width: 100%;
        padding: 0;
    }

    .main-content {
        display: block;
    }

    .scene-panel,
    .chat-panel,
    .timeline-panel {
        border: 1px solid #ccc;
        break-inside: avoid;
        margin-bottom: 1rem;
    }
}

/* =========================================================
   37. REDUCED MOTION
   ========================================================= */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* =========================================================
   38. RESPONSIVE ‚Äî LARGE DESKTOP (< 1400px)
   ========================================================= */
@media (max-width: 1400px) {
    .main-content {
        grid-template-columns: 55fr 45fr;
    }
}

/* =========================================================
   39. RESPONSIVE ‚Äî SMALL DESKTOP / TABLET LANDSCAPE (< 1024px)
   ========================================================= */
@media (max-width: 1024px) {
    .main-content {
        grid-template-columns: 1fr 1fr;
    }

    .shortcuts-grid {
        grid-template-columns: 1fr;
    }
}

/* =========================================================
   40. RESPONSIVE ‚Äî TABLET (< 768px)
   ========================================================= */
@media (max-width: 768px) {
    .container {
        padding: var(--spacing-sm);
    }

    .header {
        height: auto;
        min-height: 44px;
        padding: var(--spacing-sm) var(--spacing-md);
        border-bottom-width: 1px;
    }

    .header-content {
        flex-wrap: nowrap;
        gap: var(--spacing-sm);
    }

    .logo-text h1 {
        font-size: 0.95rem;
    }

    .tagline {
        display: none;
    }

    .tagline-sub {
        display: none;
    }

    .challenge-badge {
        display: none;
    }

    .connection-status .status-text {
        display: none;
    }

    .session-info {
        width: auto;
        justify-content: flex-end;
        overflow: visible;
        padding-bottom: 0;
        gap: var(--spacing-xs);
    }

    .session-info .btn {
        font-size: 0.78rem;
        padding: 6px 10px;
        min-height: 36px;
    }

    /* Stack to single column */
    .main-content {
        grid-template-columns: 1fr;
        grid-template-rows: 1fr;
        height: calc(100vh - 44px - var(--spacing-sm) * 2);
        height: calc(100dvh - 44px - var(--spacing-sm) * 2);
    }

    /* Chat panel first, scene below - but on mobile we want chat to fill screen */
    .chat-panel {
        order: -1;
        min-height: 0;
        height: 100%;
        max-height: none;
        width: 100%;
        display: flex;
        flex-direction: column;
    }
    
    /* Hide scene/timeline on mobile to keep focus on chat */
    .scene-panel,
    .timeline-panel {
        display: none;
    }

    /* Mic button larger and centered on mobile ‚Äî voice-first */
    .mic-btn {
        width: 130px;
        height: 130px;
        min-width: 130px;
        font-size: 2.5rem;
    }
    
    .mic-container {
        padding: 45px;
    }
    
    .mic-pulse-ring,
    .mic-wave-ring {
        width: 130px;
        height: 130px;
    }

    /* Mobile voice call layout */
    .mobile-call-header {
        display: flex;
    }

    .quick-phrase-rail {
        display: none !important;
    }

    /* Suggested actions & mode toggles ‚Äî all in hamburger menu on mobile */
    .suggested-actions {
        display: none !important;
    }
    .mode-toggles {
        display: none !important;
    }

    .voice-dock {
        display: flex;
        order: 10;
    }

    .controls,
    .voice-first-label {
        display: none;
    }

    .voice-dock-mic-btn {
        min-height: 56px;
        font-size: 1rem;
    }

    .voice-dock-action-btn,
    .quick-phrase-chip,
    .mobile-call-help-btn {
        min-height: 44px;
    }

    /* Full-width chat input - sticky at bottom, above any fixed overlays */
    .text-input {
        padding: var(--spacing-sm);
        position: relative;
        flex-shrink: 0;
        background: var(--bg-secondary);
        border-top: 1px solid var(--border-color);
        z-index: 940;
        order: 11;
        flex-wrap: wrap;
    }
    
    /* Voice-first: text input collapsed by default on mobile */
    .text-input-expand-btn {
        display: flex;
        align-items: center;
        gap: 4px;
        width: 100%;
        justify-content: center;
    }
    
    .text-input-collapsed #text-input,
    .text-input-collapsed #send-btn,
    .text-input-collapsed #retry-last-btn,
    .text-input-collapsed #auto-scroll-toggle,
    .text-input-collapsed #compact-mode-toggle,
    .text-input-collapsed #text-char-counter,
    .text-input-collapsed .language-selector,
    .text-input-collapsed .evidence-upload-btn,
    .text-input-collapsed #upload-sketch-btn,
    .text-input-collapsed #camera-btn {
        display: none;
    }
    
    .text-input-expanded .text-input-expand-btn {
        display: none;
    }

    /* Hide camera and attachment buttons in expanded state on mobile to prevent crowding */
    .text-input-expanded #camera-btn,
    .text-input-expanded .evidence-upload-btn,
    .text-input-expanded #upload-sketch-btn,
    .text-input-expanded .language-selector {
        display: none;
    }

    /* Hide help button on mobile to prevent overlap with chat input */
    .help-button {
        display: none;
    }
    
    /* Hide keyboard hint on mobile (touch interface) */
    .keyboard-hint {
        display: none;
    }
    
    /* Chat transcript scrolls, input stays at bottom */
    .chat-transcript {
        flex: 1;
        min-height: 0;
        overflow-y: auto;
    }
    
    /* Reduce height of other elements to maximize chat space */
    .reporting-steps {
        padding: var(--spacing-xs) var(--spacing-sm);
    }
    
    .interview-progress {
        padding: var(--spacing-xs) var(--spacing-sm);
    }
    
    .interview-comfort-panel {
        padding: var(--spacing-xs) var(--spacing-sm);
    }
    
    /* Ensure suggested actions don't take too much space */
    .suggested-actions {
        display: none !important;
    }

    /* Mode toggles hidden ‚Äî in hamburger menu */
    .mode-toggles {
        display: none !important;
    }

    /* Quick phrases hidden on mobile ‚Äî cleaner interface */
    .quick-phrase-rail {
        display: none !important;
    }

    /* Modal adjustments - near fullscreen */
    .modal-content {
        max-width: 100%;
        margin: var(--spacing-sm);
        max-height: 95vh;
        border-radius: var(--card-radius);
    }

    .modal-fullwidth {
        max-width: 100%;
        width: 100%;
    }

    .comparison-modal-body {
        flex-direction: column;
    }

    .comparison-divider-vertical {
        display: none;
    }

    .toast-container {
        left: var(--spacing-sm);
        right: var(--spacing-sm);
        max-width: none;
    }

    .quota-grid {
        grid-template-columns: 1fr;
    }

    .info-grid {
        grid-template-columns: 1fr;
    }

    .onboarding-content {
        padding: var(--spacing-md);
    }

    .scene-display {
        min-height: 250px;
    }

    .version-badge {
        display: none;
    }

    /* Hide connection quality badge on tablet/mobile ‚Äî redundant with dot */
    .connection-quality-badge {
        display: none;
    }

    /* Hide mode toggles on mobile ‚Äî power-user features */
    .mode-toggles {
        display: none;
    }
}

/* =========================================================
   41. RESPONSIVE ‚Äî PHONE (< 480px)
   ========================================================= */
@media (max-width: 480px) {
    body {
        font-size: 13px;
    }

    .container {
        padding: var(--spacing-xs);
    }

    .header {
        border-radius: var(--card-radius);
        margin-bottom: var(--spacing-xs);
    }

    .logo-icon {
        font-size: 1.4rem;
    }

    .logo-text h1 {
        font-size: 0.85rem;
    }

    .session-info .btn {
        font-size: 0.72rem;
        padding: 5px 8px;
    }

    .main-content {
        gap: var(--spacing-xs);
        height: calc(100vh - 44px - var(--spacing-xs) * 2);
        height: calc(100dvh - 44px - var(--spacing-xs) * 2);
    }

    /* Hide reporting steps and interview progress on small phones to save space */
    .reporting-steps,
    .interview-progress,
    .interview-comfort-panel,
    .witness-selector-bar {
        display: none;
    }
    
    /* Minimal header on small phones */
    .chat-panel h3 {
        display: none;
    }

    .chat-transcript {
        padding: var(--spacing-sm);
    }

    .chat-message {
        max-width: 92%;
    }

    .controls {
        display: none;
    }

    /* --- iPhone-optimized: compact mobile-call-header --- */
    .mobile-call-header {
        padding: 6px 10px;
        gap: 4px;
    }

    .mobile-call-header-main {
        gap: 6px;
    }

    .mobile-call-title {
        font-size: 0.78rem;
    }

    .mobile-call-chips {
        margin-top: 2px;
        gap: 4px;
    }

    .mobile-call-chip {
        font-size: 0.62rem;
        padding: 2px 6px;
    }

    .mobile-call-meta {
        font-size: 0.68rem;
    }

    .mobile-call-help-btn {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        font-size: 0.8rem;
    }

    /* --- iPhone-optimized: compact quick-phrase-rail --- */
    .quick-phrase-rail {
        padding: 4px 8px;
        gap: 5px;
    }

    .quick-phrase-chip {
        font-size: 0.68rem;
        padding: 5px 8px;
    }

    /* --- iPhone-optimized: compact voice-dock --- */
    .voice-dock {
        padding: 6px 8px calc(6px + env(safe-area-inset-bottom, 0px));
        gap: 6px;
    }

    .voice-dock-mic-btn {
        min-height: 48px;
        font-size: 0.92rem;
        border-radius: 14px;
    }

    .voice-dock-action-btn {
        font-size: 0.72rem;
        padding: 6px 10px;
        min-height: 36px;
    }

    /* --- iPhone: hide mode-toggles (power-user features) --- */
    .mode-toggles {
        display: none;
    }

    /* --- iPhone: hide connection quality badge (redundant with dot) --- */
    .connection-quality-badge {
        display: none;
    }

    /* --- iPhone-optimized: compact suggested actions --- */
    .suggested-actions {
        display: flex;
        overflow-x: auto;
        gap: var(--spacing-xs);
        padding: 4px var(--spacing-xs);
        -webkit-overflow-scrolling: touch;
    }
    
    .suggestion-btn {
        flex-shrink: 0;
        font-size: 0.72rem;
        padding: 5px 8px;
        min-height: 32px;
    }

    /* --- iPhone-optimized: text input bar --- */
    .text-input {
        padding: 6px var(--spacing-xs);
        gap: var(--spacing-xs);
    }
    
    .text-input input {
        padding: 10px 14px;
        font-size: 16px; /* Prevents iOS zoom on focus */
    }
    
    /* Hide redundant chat-mic-btn on phones since we have the big mic */
    .chat-mic-btn,
    #chat-mic-btn {
        display: none !important;
    }
    
    /* Hide less critical input buttons on small screens (handled by collapsed state) */
    .language-selector {
        display: none;
    }
    
    .evidence-upload-btn {
        display: none;
    }

    .mic-btn {
        width: 140px;
        height: 140px;
        min-width: 140px;
        font-size: 2.8rem;
        margin: 0 auto;
    }
    
    .mic-container {
        padding: 50px;
    }
    
    .mic-pulse-ring,
    .mic-wave-ring {
        width: 140px;
        height: 140px;
    }

    /* Touch-friendly sizes */
    .btn {
        min-height: 44px;
        padding: 10px 16px;
    }

    .scene-control-btn {
        width: 44px;
        height: 44px;
    }

    .scene-display {
        min-height: 200px;
    }

    /* Fullscreen modals on phone */
    .modal-content {
        border-radius: 0;
        margin: 0;
        max-height: 100vh;
        max-height: 100dvh;
        max-width: 100%;
        width: 100%;
        height: 100vh;
        height: 100dvh;
    }

    .modal {
        padding: 0;
    }

    .modal-header {
        padding: var(--spacing-sm) var(--spacing-md);
    }

    .modal-actions {
        padding: var(--spacing-sm) var(--spacing-md);
        flex-wrap: wrap;
    }

    .onboarding-icon {
        font-size: 2rem;
    }

    .onboarding-step h2 {
        font-size: 1rem;
    }

    .onboarding-step p {
        font-size: 0.85rem;
    }

    .shortcuts-grid {
        grid-template-columns: 1fr;
    }

    .scene-stats {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 380px) {
    #voice-dock .voice-dock-actions #dock-slow-btn,
    #voice-dock .voice-dock-actions #dock-moment-btn {
        display: none;
    }

    #voice-dock .voice-dock-more-btn {
        margin-left: 0;
    }

    #voice-dock .voice-dock-mic-btn {
        min-height: 60px;
    }
}

/* =========================================================
   ITEM 28: LIGHT THEME ‚Äî Premium frosted
   ========================================================= */
[data-theme="light"] {
    --bg-primary: #f0f2f5;
    --bg-secondary: rgba(255, 255, 255, 0.92);
    --bg-surface: rgba(255, 255, 255, 0.75);
    --bg-surface-alt: rgba(226, 232, 240, 0.6);
    --border-color: rgba(0, 0, 0, 0.06);
    --border-color-hover: rgba(0, 0, 0, 0.12);
    --glass-bg: rgba(255, 255, 255, 0.55);
    --glass-bg-elevated: rgba(255, 255, 255, 0.7);
    --glass-border: rgba(0, 0, 0, 0.06);
    --glass-border-vivid: rgba(0, 0, 0, 0.1);

    --text-primary: #1e293b;
    --text-secondary: #475569;
    --text-muted: #94a3b8;

    --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06), 0 1px 3px rgba(0, 0, 0, 0.04);
    --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.08), 0 4px 12px rgba(0, 0, 0, 0.05);
    --shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.1), 0 8px 24px rgba(0, 0, 0, 0.06);
}

[data-theme="light"] .header {
    background: rgba(255, 255, 255, 0.65);
    border-color: rgba(0, 0, 0, 0.06);
}

[data-theme="light"] .header::before {
    background: linear-gradient(90deg, transparent, rgba(59,130,246,0.3), rgba(139,92,246,0.2), transparent);
}

[data-theme="light"] .logo-text h1 {
    background: linear-gradient(135deg, #1e293b, #3b82f6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

[data-theme="light"] .modal-content {
    background: #ffffff;
}

[data-theme="light"] .message-user {
    background: rgba(59, 130, 246, 0.08);
}

[data-theme="light"] .message-agent {
    background: rgba(34, 197, 94, 0.06);
}

[data-theme="light"] .chat-panel,
[data-theme="light"] .scene-panel {
    background: #ffffff;
    border: 1px solid rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .chat-transcript::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.15);
}

[data-theme="light"] .chat-transcript::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.25);
}

[data-theme="light"] .mobile-call-header {
    background: linear-gradient(135deg, #f8fafc, #e2e8f0);
    border-bottom: 1px solid rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .quick-phrase-btn,
[data-theme="light"] .suggested-action-btn {
    background: rgba(59, 130, 246, 0.08);
    border-color: rgba(59, 130, 246, 0.2);
    color: #1e40af;
}

[data-theme="light"] .quick-phrase-btn:hover,
[data-theme="light"] .suggested-action-btn:hover {
    background: rgba(59, 130, 246, 0.15);
}

[data-theme="light"] #voice-dock {
    background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
    border-top: 1px solid rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .text-input-container input,
[data-theme="light"] .text-input-container textarea {
    background: #ffffff;
    border-color: rgba(0, 0, 0, 0.15);
    color: #1e293b;
}

[data-theme="light"] .connection-popup {
    background: #ffffff;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

[data-theme="light"] .mobile-menu-dropdown {
    background: #ffffff;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

[data-theme="light"] .mobile-menu-item:hover {
    background: rgba(59, 130, 246, 0.06);
}

[data-theme="light"] .toast {
    background: rgba(255, 255, 255, 0.92);
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);
    color: #1e293b;
    border: 1px solid rgba(0, 0, 0, 0.08);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08), 0 1px 4px rgba(0, 0, 0, 0.05);
}

/* Theme toggle button */
.theme-toggle {
    background: var(--glass-bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--glass-border);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 1.15rem;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-xs);
}

.theme-toggle:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: var(--border-color-hover);
    transform: rotate(15deg) scale(1.05);
    box-shadow: var(--shadow-sm);
}

.theme-toggle:focus-visible {
    outline: 2px solid var(--accent-blue);
    outline-offset: 2px;
    box-shadow: var(--shadow-glow-blue);
}

/* =========================================================
   ITEM 30: ACCESSIBILITY ‚Äî Skip-to-content & Focus
   ========================================================= */
.skip-to-content {
    position: absolute;
    top: -100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--accent-blue);
    color: #fff;
    padding: 8px 16px;
    border-radius: var(--btn-radius);
    z-index: 10000;
    font-weight: 600;
    text-decoration: none;
    transition: top 0.2s ease;
}

.skip-to-content:focus {
    top: 8px;
}

/* Enhanced focus indicators for all interactive elements */
button:focus-visible,
input:focus-visible,
select:focus-visible,
a:focus-visible,
[tabindex]:focus-visible {
    outline: 2px solid var(--accent-blue);
    outline-offset: 2px;
}

/* =========================================================
   ITEM 25: INTERVIEW PROGRESS PHASES ‚Äî Modern Glass Design
   ========================================================= */
.interview-progress {
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--glass-border);
    background: rgba(0, 0, 0, 0.12);
    backdrop-filter: blur(8px);
    position: relative;
    z-index: 2;
}

.progress-phases {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.progress-phases .phase {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    flex: 1;
    opacity: 0.4;
    transition: all var(--transition-base);
    font-size: 0.72rem;
    font-weight: var(--font-weight-medium);
    color: var(--text-secondary);
    text-align: center;
    padding: 8px;
    border-radius: 12px;
}

.progress-phases .phase:hover {
    opacity: 0.6;
    background: rgba(255, 255, 255, 0.03);
}

.progress-phases .phase.active {
    opacity: 1;
    transform: scale(1.02);
    background: var(--accent-blue-muted);
    color: var(--accent-blue);
}

.progress-phases .phase.completed {
    opacity: 0.75;
    color: var(--accent-green);
}

.progress-phases .phase-icon {
    font-size: 1.3rem;
    line-height: 1;
    transition: transform var(--transition-bounce);
}

.progress-phases .phase.active .phase-icon {
    transform: scale(1.1);
}

.interview-progress .progress-bar {
    height: 5px;
    background: rgba(255, 255, 255, 0.06);
    border-radius: 10px;
    overflow: hidden;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
}

.interview-progress .progress-fill {
    height: 100%;
    background: var(--gradient-accent);
    border-radius: 10px;
    transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 0 12px rgba(96, 165, 250, 0.4);
}

/* =========================================================
   MOBILE CALL HEADER + QUICK PHRASES
   ========================================================= */
.mobile-call-header {
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    background: rgba(8, 12, 19, 0.88);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    padding: 10px 14px;
    display: none;
    flex-direction: column;
    gap: 8px;
    flex-shrink: 0;
}

.mobile-call-header-main {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 10px;
}

.mobile-call-title {
    font-size: 0.88rem;
    line-height: 1.2;
}

.mobile-call-chips {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    margin-top: 6px;
}

.mobile-call-chip {
    border-radius: 999px;
    padding: 4px 10px;
    font-size: 0.7rem;
    font-weight: var(--font-weight-medium);
    background: rgba(255, 255, 255, 0.06);
    color: var(--text-secondary);
    border: 1px solid rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    transition: all var(--transition-base);
}

.mobile-call-chip.state-ready {
    border-color: rgba(96, 165, 250, 0.35);
    color: var(--accent-blue);
}

.mobile-call-chip.state-listening {
    border-color: rgba(74, 222, 128, 0.35);
    color: var(--accent-green);
}

.mobile-call-chip.state-thinking {
    border-color: rgba(251, 191, 36, 0.38);
    color: var(--accent-amber);
}

.mobile-call-chip.state-speaking {
    border-color: rgba(74, 222, 128, 0.35);
    color: var(--accent-green);
}

.mobile-call-chip.is-off {
    opacity: 0.7;
}

.mobile-call-help-btn {
    width: 40px;
    height: 40px;
    border-radius: 12px;
    border: 1px solid var(--glass-border);
    background: var(--glass-bg);
    color: var(--text-secondary);
    cursor: pointer;
}

.mobile-call-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.74rem;
    color: var(--text-muted);
}

.mobile-call-elapsed {
    font-family: var(--font-mono);
    color: var(--text-primary);
    letter-spacing: 0.04em;
}

.ray-listening-cue {
    margin-left: auto;
    color: var(--accent-green);
    font-size: 0.72rem;
}

.quick-phrase-rail {
    gap: 6px;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding: 8px 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.03);
    background: rgba(8, 12, 18, 0.5);
    flex-shrink: 0;
}

.quick-phrase-rail::-webkit-scrollbar {
    display: none;
}

.quick-phrase-chip {
    border-radius: 999px;
    border: 1px solid rgba(96, 165, 250, 0.15);
    background: rgba(30, 64, 175, 0.12);
    color: var(--text-secondary);
    font-size: 0.76rem;
    padding: 7px 12px;
    white-space: nowrap;
    cursor: pointer;
    transition: all 0.2s ease;
}

.quick-phrase-chip:hover {
    background: rgba(30, 64, 175, 0.25);
    border-color: rgba(96, 165, 250, 0.3);
    color: var(--text-primary);
}

@media (max-width: 768px) {
    .mobile-call-header,
    .quick-phrase-rail,
    .voice-dock {
        display: flex;
    }
}

/* =========================================================
   MOBILE SCENE PREVIEW STRIP
   ========================================================= */
.mobile-scene-strip {
    display: none;
    position: relative;
    width: 100%;
    height: 90px;
    overflow: hidden;
    cursor: pointer;
    flex-shrink: 0;
    border-bottom: 1px solid var(--border-color);
}

.mobile-scene-strip.visible {
    display: block;
}

.mobile-scene-strip-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.mobile-scene-strip-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    gap: 8px;
    padding: 6px 10px;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.6));
    pointer-events: none;
}

.mobile-scene-strip-copy {
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 0;
}

.mobile-scene-strip-title-row {
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.mobile-scene-strip-label {
    font-size: 0.7rem;
    color: #fff;
    font-weight: 500;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
}

.mobile-scene-strip-subtitle {
    font-size: 0.63rem;
    color: rgba(255, 255, 255, 0.85);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
}

.scene-update-indicator {
    width: 8px;
    height: 8px;
    border-radius: 999px;
    background: #22c55e;
    box-shadow: 0 0 0 rgba(34, 197, 94, 0.6);
}

.scene-update-indicator.pulse {
    animation: sceneUpdatePulse 1.2s ease-in-out infinite;
}

@keyframes sceneUpdatePulse {
    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.6); }
    70% { transform: scale(1.15); box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
}

.mobile-scene-strip-expand {
    font-size: 1rem;
    color: #fff;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
}

/* Hide on desktop ‚Äî only for mobile */
@media (min-width: 769px) {
    .mobile-scene-strip {
        display: none !important;
    }
}

/* =========================================================
   ITEM 24: SCENE PREVIEW PANEL ‚Äî Modern Glass Card
   ========================================================= */
.scene-preview {
    border: 1px solid var(--glass-border);
    border-radius: var(--card-radius);
    margin: var(--spacing-md) var(--spacing-lg);
    background: var(--glass-bg);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    overflow: hidden;
    animation: fadeSlideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: var(--shadow-md);
}

.scene-preview-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    background: rgba(0, 0, 0, 0.15);
    border-bottom: 1px solid var(--glass-border);
}

.scene-preview-header h3 {
    font-size: 0.85rem;
    font-weight: var(--font-weight-semibold);
    color: var(--text-primary);
    margin: 0;
    flex: 1;
    letter-spacing: var(--letter-spacing-wide);
}

.scene-preview-badge {
    font-size: 0.62rem;
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: var(--letter-spacing-wider);
    background: var(--accent-green-muted);
    color: var(--accent-green);
    padding: 3px 10px;
    border-radius: 12px;
    animation: livePulse 2s ease-in-out infinite;
    box-shadow: 0 0 12px rgba(74, 222, 128, 0.2);
}

@keyframes livePulse {
    0%, 100% { opacity: 1; box-shadow: 0 0 12px rgba(74, 222, 128, 0.2); }
    50% { opacity: 0.7; box-shadow: 0 0 20px rgba(74, 222, 128, 0.35); }
}

.scene-preview-toggle {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    font-size: 0.9rem;
    padding: 6px;
    border-radius: 6px;
    transition: all var(--transition-base);
}

.scene-preview-toggle:hover {
    background: rgba(255, 255, 255, 0.06);
    color: var(--text-primary);
}

.scene-preview.collapsed .scene-preview-toggle {
    transform: rotate(-90deg);
}

.scene-preview-content {
    padding: var(--spacing-md);
    text-align: center;
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
    max-height: 400px;
    overflow: hidden;
}

.scene-preview.collapsed .scene-preview-content {
    max-height: 0;
    padding: 0 var(--spacing-sm);
    opacity: 0;
}

.scene-preview-content img {
    max-width: 100%;
    max-height: 250px;
    border-radius: var(--card-radius);
    margin: 0 auto var(--spacing-xs);
    object-fit: contain;
}

#scene-elements-count {
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* =========================================================
   ITEM 29: EVIDENCE UPLOAD BUTTON
   ========================================================= */
.evidence-upload-btn {
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--btn-radius);
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 1rem;
    transition: background var(--transition-base), border-color var(--transition-base);
    flex-shrink: 0;
}

.evidence-upload-btn:hover {
    background: var(--bg-surface-alt);
    border-color: var(--border-color-hover);
}

.evidence-upload-btn:focus-visible {
    outline: 2px solid var(--accent-blue);
    outline-offset: 2px;
}

/* Evidence thumbnail in chat */
.evidence-thumbnail {
    max-width: 200px;
    max-height: 150px;
    border-radius: var(--card-radius);
    border: 1px solid var(--border-color);
    margin-top: var(--spacing-xs);
    cursor: pointer;
    transition: transform var(--transition-base);
}

.evidence-thumbnail:hover {
    transform: scale(1.02);
}

/* Review testimony button */
.review-testimony-btn {
    flex-shrink: 0;
    font-size: 1rem;
    width: 36px;
    height: 36px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* =========================================================
   ITEM 27: WITNESS INFORMATION FORM
   ========================================================= */
.witness-info-overlay {
    position: fixed;
    inset: 0;
    z-index: 900;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-lg);
}

.witness-form {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--panel-radius);
    padding: var(--spacing-xl);
    max-width: 520px;
    width: 100%;
    box-shadow: var(--shadow-lg);
}

.witness-form h3 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
}

.optional-badge {
    font-size: 0.7rem;
    font-weight: 500;
    background: var(--accent-amber-muted);
    color: var(--accent-amber);
    padding: 2px 8px;
    border-radius: 10px;
    margin-left: var(--spacing-xs);
    vertical-align: middle;
}

.form-note {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: var(--spacing-lg);
}

.form-grid {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.form-group label {
    display: block;
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

.form-group input {
    width: 100%;
    padding: 10px 12px;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--input-radius);
    color: var(--text-primary);
    font-size: 0.9rem;
    transition: border-color var(--transition-base);
}

.form-group input:focus {
    border-color: var(--accent-blue);
    outline: none;
}

.form-group input::placeholder {
    color: var(--text-muted);
}

.anonymous-toggle-row {
    margin-top: -4px;
}

.anonymous-toggle {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 0.82rem;
    color: var(--text-secondary);
    cursor: pointer;
    user-select: none;
}

.anonymous-toggle input[type="checkbox"] {
    accent-color: var(--accent-blue);
}

.witness-form-actions {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-sm);
}

.btn-text-link {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 0.8rem;
    text-decoration: underline;
    padding: var(--spacing-xs) var(--spacing-sm);
    transition: color var(--transition-base);
}

.btn-text-link:hover {
    color: var(--text-secondary);
}

/* =========================================================
   ITEM 26: TESTIMONY SUMMARY MODAL
   ========================================================= */
.summary-section {
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
}

.summary-section:last-child {
    border-bottom: none;
}

.summary-section h3 {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
}

.summary-statement {
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-surface);
    border-radius: var(--card-radius);
    margin-bottom: var(--spacing-xs);
    font-size: 0.85rem;
    color: var(--text-secondary);
    border-left: 3px solid var(--accent-blue);
}

.summary-element-tag {
    display: inline-block;
    padding: 4px 10px;
    background: var(--accent-blue-muted);
    color: var(--accent-blue);
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 500;
    margin: 2px;
}

.summary-actions {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: var(--spacing-sm);
    padding: var(--spacing-md) var(--spacing-lg);
    border-top: 1px solid var(--border-color);
}

/* =========================================================
   VOICE ACTIVITY DETECTION (VAD)
   ========================================================= */
.vad-controls {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-surface);
    border-radius: var(--card-radius);
    margin-bottom: var(--spacing-md);
}

.vad-toggle-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.vad-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
    flex: 1;
}

/* Toggle Switch */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 44px;
    height: 24px;
    flex-shrink: 0;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    inset: 0;
    background-color: var(--bg-surface-alt);
    border-radius: 24px;
    transition: var(--transition-base);
}

.toggle-slider::before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: var(--text-muted);
    border-radius: 50%;
    transition: var(--transition-base);
}

.toggle-switch input:checked + .toggle-slider {
    background-color: var(--accent-blue);
}

.toggle-switch input:checked + .toggle-slider::before {
    transform: translateX(20px);
    background-color: white;
}

.toggle-switch input:focus + .toggle-slider {
    box-shadow: 0 0 0 2px var(--accent-blue-muted);
}

/* VAD Indicator */
.vad-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
}

.vad-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--text-muted);
    transition: var(--transition-base);
}

.vad-indicator.listening .vad-dot {
    background: var(--accent-amber);
    animation: vad-pulse-waiting 2s ease-in-out infinite;
}

.vad-indicator.speech-detected .vad-dot {
    background: var(--accent-green);
    animation: vad-pulse-active 0.5s ease-in-out infinite;
}

.vad-indicator.recording .vad-dot {
    background: var(--accent-red);
    animation: vad-pulse-recording 1s ease-in-out infinite;
}

@keyframes vad-pulse-waiting {
    0%, 100% { transform: scale(1); opacity: 0.7; }
    50% { transform: scale(1.2); opacity: 1; }
}

@keyframes vad-pulse-active {
    0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
    50% { transform: scale(1.1); box-shadow: 0 0 0 6px rgba(34, 197, 94, 0); }
}

@keyframes vad-pulse-recording {
    0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
    50% { transform: scale(1.15); box-shadow: 0 0 0 8px rgba(239, 68, 68, 0); }
}

/* VAD Settings Panel */
.vad-settings {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    padding-top: var(--spacing-sm);
    border-top: 1px solid var(--border-color);
    margin-top: var(--spacing-xs);
}

.vad-settings.hidden {
    display: none;
}

.vad-setting {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.vad-setting label {
    font-size: 0.75rem;
    color: var(--text-muted);
    min-width: 90px;
}

.vad-setting input[type="range"] {
    flex: 1;
    height: 4px;
    appearance: none;
    background: var(--bg-surface-alt);
    border-radius: 2px;
    cursor: pointer;
}

.vad-setting input[type="range"]::-webkit-slider-thumb {
    appearance: none;
    width: 14px;
    height: 14px;
    background: var(--accent-blue);
    border-radius: 50%;
    cursor: pointer;
    transition: var(--transition-fast);
}

.vad-setting input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.2);
}

.vad-setting input[type="range"]::-moz-range-thumb {
    width: 14px;
    height: 14px;
    background: var(--accent-blue);
    border-radius: 50%;
    border: none;
    cursor: pointer;
}

.vad-value {
    font-size: 0.75rem;
    color: var(--text-secondary);
    min-width: 50px;
    text-align: right;
}

/* VAD Status Message */
.vad-status {
    font-size: 0.75rem;
    color: var(--accent-amber);
    text-align: center;
    padding: var(--spacing-xs) 0;
}

.vad-status.active {
    color: var(--accent-green);
}

/* =========================================================
   TEMPLATE SELECTOR
   ========================================================= */
.template-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: var(--spacing-md);
    padding: var(--spacing-md) 0;
    max-height: 60vh;
    overflow-y: auto;
}

.template-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--spacing-lg);
    background: var(--bg-surface);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: center;
}

.template-card:hover {
    border-color: var(--accent-blue);
    background: var(--bg-surface-alt);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.template-card:focus {
    outline: 2px solid var(--accent-blue);
    outline-offset: 2px;
}

.template-card.selected {
    border-color: var(--accent-green);
    background: rgba(var(--accent-green-rgb, 0, 212, 170), 0.1);
}

.template-icon {
    font-size: 2.5rem;
    margin-bottom: var(--spacing-sm);
}

.template-name {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
}

.template-description {
    font-size: 0.8rem;
    color: var(--text-secondary);
    line-height: 1.4;
}

.template-category {
    display: inline-block;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    margin-top: var(--spacing-sm);
    background: var(--bg-surface-alt);
    color: var(--text-muted);
}

.template-category.crime {
    background: rgba(255, 107, 107, 0.2);
    color: #ff6b6b;
}

.template-category.accident {
    background: rgba(255, 193, 7, 0.2);
    color: #ffc107;
}

.template-category.incident {
    background: rgba(0, 212, 255, 0.2);
    color: var(--accent-blue);
}

.modal-description {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-bottom: var(--spacing-sm);
}

.modal-footer {
    display: flex;
    justify-content: center;
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
    margin-top: var(--spacing-md);
}

/* =========================================================
   RESPONSIVE: New components mobile
   ========================================================= */
@media (max-width: 768px) {
    .template-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: var(--spacing-sm);
    }
    
    .template-card {
        padding: var(--spacing-md);
    }
    
    .template-icon {
        font-size: 2rem;
    }
    
    .template-name {
        font-size: 0.9rem;
    }
    
    .progress-phases .phase span {
        font-size: 0.6rem;
    }
    .progress-phases .phase-icon {
        font-size: 1rem;
    }
    .scene-preview-content img {
        max-height: 150px;
    }
    .witness-form {
        padding: var(--spacing-md);
    }
    .summary-actions {
        flex-direction: column;
    }
    .theme-toggle {
        width: 32px;
        height: 32px;
    }
    
    /* VAD mobile responsive */
    .vad-controls {
        padding: var(--spacing-xs) var(--spacing-sm);
    }
    
    .vad-toggle-row {
        flex-wrap: wrap;
    }
    
    .vad-setting {
        flex-wrap: wrap;
    }
    
    .vad-setting label {
        min-width: 70px;
        font-size: 0.7rem;
    }
    
    .vad-setting input[type="range"] {
        min-width: 80px;
    }
}

/* ‚îÄ‚îÄ TTS Toggle Button (Accessibility) ‚îÄ‚îÄ */
#tts-toggle-btn {
    background: linear-gradient(135deg, #4a90d9 0%, #357abd 100%);
    border: none;
    min-width: 36px;
    transition: all 0.2s ease;
}

#tts-toggle-btn:hover {
    background: linear-gradient(135deg, #5aa0e9 0%, #4588c7 100%);
    transform: scale(1.05);
}

#tts-toggle-btn[aria-pressed="true"] {
    background: linear-gradient(135deg, #2ed573 0%, #26a65b 100%);
}

/* Screen reader announcement for TTS status */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* ‚îÄ‚îÄ Contradiction Severity Badges ‚îÄ‚îÄ */
.severity-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.severity-badge.severity-low {
    background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
    color: white;
    box-shadow: 0 2px 4px rgba(52, 152, 219, 0.3);
}

.severity-badge.severity-medium {
    background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
    color: white;
    box-shadow: 0 2px 4px rgba(243, 156, 18, 0.3);
}

.severity-badge.severity-high {
    background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
    color: white;
    box-shadow: 0 2px 4px rgba(231, 76, 60, 0.3);
}

.severity-badge.severity-critical {
    background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
    color: white;
    box-shadow: 0 2px 4px rgba(155, 89, 182, 0.3);
    animation: pulse-critical 2s infinite;
}

@keyframes pulse-critical {
    0%, 100% { box-shadow: 0 2px 4px rgba(155, 89, 182, 0.3); }
    50% { box-shadow: 0 2px 12px rgba(155, 89, 182, 0.6); }
}

/* Review badge for low-confidence items */
.review-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
    color: white;
    box-shadow: 0 2px 4px rgba(243, 156, 18, 0.3);
    margin-left: 6px;
}

/* Evidence card needs review state */
.evidence-card.needs-review {
    border-left: 3px solid #f39c12;
    background: linear-gradient(135deg, rgba(243, 156, 18, 0.05) 0%, transparent 100%);
}

.evidence-card.needs-review:hover {
    border-left-color: #e67e22;
    box-shadow: 0 4px 12px rgba(243, 156, 18, 0.2);
}

/* Needs review counter badge */
#needs-review-count {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 20px;
    height: 20px;
    padding: 0 6px;
    background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
    color: white;
    font-size: 0.75rem;
    font-weight: 700;
    border-radius: 10px;
    margin-left: 8px;
    box-shadow: 0 2px 4px rgba(243, 156, 18, 0.3);
}

/* Confidence indicator styles */
.confidence-dot.high {
    background: #2ecc71;
}

.confidence-dot.med {
    background: #f39c12;
}

.confidence-dot.low {
    background: #e74c3c;
}

/* Contradiction item styling */
.contradiction-item {
    background: var(--bg-tertiary, #2a2a3e);
    border-radius: 8px;
    padding: 12px;
    margin: 8px 0;
    border-left: 4px solid var(--accent-color, #00d4ff);
}

.contradiction-item.severity-low {
    border-left-color: #3498db;
}

.contradiction-item.severity-medium {
    border-left-color: #f39c12;
}

.contradiction-item.severity-high {
    border-left-color: #e74c3c;
}

.contradiction-item.severity-critical {
    border-left-color: #9b59b6;
    background: linear-gradient(135deg, rgba(155, 89, 182, 0.1) 0%, rgba(142, 68, 173, 0.05) 100%);
}

.contradiction-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.contradiction-field {
    font-weight: 600;
    color: var(--text-primary, #ffffff);
}

.contradiction-change {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
}

.contradiction-change .old-value {
    color: #e74c3c;
    text-decoration: line-through;
    opacity: 0.8;
}

.contradiction-change .arrow {
    color: var(--text-secondary, #888);
}

.contradiction-change .new-value {
    color: #2ecc71;
    font-weight: 500;
}

.contradiction-score {
    font-size: 0.7rem;
    color: var(--text-secondary, #888);
    margin-top: 6px;
}

/* Contradiction sort controls */
.contradiction-sort-controls {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
    padding: 8px;
    background: var(--bg-secondary, #1e1e2e);
    border-radius: 8px;
}

.contradiction-sort-controls label {
    font-size: 0.85rem;
    color: var(--text-secondary, #888);
}

.contradiction-sort-controls select {
    background: var(--bg-tertiary, #2a2a3e);
    color: var(--text-primary, #ffffff);
    border: 1px solid var(--border-color, #3a3a4e);
    border-radius: 4px;
    padding: 4px 8px;
    font-size: 0.85rem;
    cursor: pointer;
}

.contradiction-sort-controls select:hover {
    border-color: var(--accent-color, #00d4ff);
}

/* Message contradiction styling */
.message-contradiction {
    background: linear-gradient(135deg, rgba(231, 76, 60, 0.1) 0%, rgba(192, 57, 43, 0.05) 100%);
    border: 1px solid rgba(231, 76, 60, 0.3);
    border-radius: 8px;
    padding: 12px;
    margin: 8px 0;
}

/* =========================================================
   ENVIRONMENTAL CONDITIONS PANEL
   ========================================================= */

.environmental-conditions-panel {
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    margin-top: var(--spacing-md);
    overflow: hidden;
}

.conditions-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-primary);
    border-bottom: 1px solid var(--border-color);
}

.conditions-header h4 {
    margin: 0;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
}

.conditions-toggle-btn {
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    font-size: 0.8rem;
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    transition: all 0.2s ease;
}

.conditions-toggle-btn:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.conditions-content {
    padding: var(--spacing-md);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.conditions-content.collapsed {
    display: none;
}

.condition-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-md);
}

.condition-row label {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-size: 0.85rem;
    color: var(--text-secondary);
    min-width: 100px;
}

.condition-icon {
    font-size: 1rem;
}

.condition-select {
    flex: 1;
    max-width: 150px;
    padding: 6px 10px;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    background: var(--bg-primary);
    color: var(--text-primary);
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.condition-select:hover {
    border-color: var(--accent-blue);
}

.condition-select:focus {
    outline: none;
    border-color: var(--accent-blue);
    box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.2);
}

.conditions-preview {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding-top: var(--spacing-sm);
    border-top: 1px solid var(--border-color);
    margin-top: var(--spacing-xs);
}

.preview-label {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.preview-icons {
    font-size: 1.2rem;
    letter-spacing: 4px;
}

/* Environmental Visual Effects Overlay */
.scene-display.weather-rain::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(180deg, 
        rgba(100, 150, 200, 0.1) 0%,
        rgba(50, 100, 150, 0.2) 100%);
    pointer-events: none;
    z-index: 2;
}

.scene-display.weather-snow::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(180deg, 
        rgba(255, 255, 255, 0.15) 0%,
        rgba(200, 220, 255, 0.1) 100%);
    pointer-events: none;
    z-index: 2;
}

.scene-display.weather-fog::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(200, 200, 200, 0.3);
    backdrop-filter: blur(2px);
    pointer-events: none;
    z-index: 2;
}

.scene-display.lighting-dusk::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(180deg, 
        rgba(255, 150, 50, 0.15) 0%,
        rgba(200, 100, 50, 0.2) 100%);
    pointer-events: none;
    z-index: 3;
}

.scene-display.lighting-night::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(20, 30, 60, 0.5);
    pointer-events: none;
    z-index: 3;
}

.scene-display.lighting-artificial::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(ellipse at center top, 
        rgba(255, 240, 180, 0.2) 0%,
        transparent 70%);
    pointer-events: none;
    z-index: 3;
}

.scene-display.visibility-moderate {
    filter: contrast(0.95) brightness(0.95);
}

.scene-display.visibility-poor {
    filter: contrast(0.85) brightness(0.85) blur(1px);
}


/* =========================================================
   SCENE ELEMENT LIBRARY - Draggable Palette
   ========================================================= */

/* Scene Editor Container */
.scene-editor-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-md);
}

/* Element Palette */
#scene-element-palette {
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
    overflow: hidden;
    transition: all var(--transition-base);
}

#scene-element-palette.collapsed {
    max-height: 40px;
}

#scene-element-palette.collapsed .element-palette-grid {
    display: none;
}

/* Palette Header */
.element-palette-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-surface-alt);
    border-bottom: 1px solid var(--border-color);
}

.element-palette-header h4 {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    display: flex;
    align-items: center;
    gap: 6px;
}

.palette-toggle-btn {
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 4px;
    font-size: 0.9rem;
    transition: color var(--transition-fast);
}

.palette-toggle-btn:hover {
    color: var(--text-primary);
}

/* Category Tabs */
.element-palette-tabs {
    display: flex;
    gap: 2px;
    padding: var(--spacing-xs);
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    overflow-x: auto;
    scrollbar-width: thin;
}

.palette-tab {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 10px;
    background: transparent;
    border: 1px solid transparent;
    border-radius: var(--btn-radius);
    color: var(--text-secondary);
    font-size: 0.75rem;
    font-weight: 500;
    cursor: pointer;
    white-space: nowrap;
    transition: all var(--transition-fast);
}

.palette-tab:hover {
    background: var(--bg-surface);
    color: var(--text-primary);
}

.palette-tab.active {
    background: var(--accent-blue-muted);
    border-color: var(--accent-blue);
    color: var(--accent-blue);
}

.palette-tab .tab-icon {
    font-size: 1rem;
}

.palette-tab .tab-name {
    display: none;
}

@media (min-width: 600px) {
    .palette-tab .tab-name {
        display: inline;
    }
}

/* Elements Grid */
.element-palette-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
    gap: var(--spacing-xs);
    padding: var(--spacing-sm);
    max-height: 180px;
    overflow-y: auto;
    scrollbar-width: thin;
}

.palette-element {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    padding: 8px 4px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--btn-radius);
    cursor: grab;
    transition: all var(--transition-fast);
    user-select: none;
}

.palette-element:hover {
    background: var(--bg-surface-alt);
    border-color: var(--border-color-hover);
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
}

.palette-element.selected {
    background: var(--accent-blue-muted);
    border-color: var(--accent-blue);
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
}

.palette-element.dragging {
    opacity: 0.5;
    cursor: grabbing;
}

.palette-element .element-icon {
    font-size: 1.5rem;
    line-height: 1;
}

.palette-element .element-name {
    font-size: 0.65rem;
    color: var(--text-secondary);
    text-align: center;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
}

/* Scene Editor Canvas */
#scene-editor-canvas {
    position: relative;
    background: var(--bg-secondary);
    border: 2px dashed var(--border-color);
    border-radius: var(--card-radius);
    min-height: 300px;
    overflow: hidden;
    transition: all var(--transition-base);
}

#scene-editor-canvas.drop-target {
    border-color: var(--accent-blue);
    background: var(--accent-blue-muted);
}

#scene-editor-canvas.has-elements {
    border-style: solid;
}

/* Placed Elements */
.placed-element {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    transition: box-shadow var(--transition-fast);
}

.placed-element:hover {
    box-shadow: 0 0 0 2px var(--accent-blue);
}

.placed-element.dragging {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    z-index: 1000 !important;
}

.placed-element .element-content {
    pointer-events: none;
}

/* Element Context Menu */
.element-context-menu {
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
    box-shadow: var(--shadow-lg);
    padding: var(--spacing-xs);
    min-width: 140px;
}

.context-menu-item {
    display: block;
    width: 100%;
    padding: 8px 12px;
    background: transparent;
    border: none;
    border-radius: var(--btn-radius);
    color: var(--text-primary);
    font-size: 0.8rem;
    text-align: left;
    cursor: pointer;
    transition: background var(--transition-fast);
}

.context-menu-item:hover {
    background: var(--bg-surface-alt);
}

/* Canvas Grid Background */
#scene-editor-canvas.show-grid {
    background-image: 
        linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
    background-size: 20px 20px;
}

/* Palette Toggle Button (in Scene Panel header) */
.scene-editor-toggle {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: var(--accent-blue-muted);
    border: 1px solid var(--accent-blue);
    border-radius: var(--btn-radius);
    color: var(--accent-blue);
    font-size: 0.75rem;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.scene-editor-toggle:hover {
    background: var(--accent-blue);
    color: white;
}

/* Drag Preview */
.drag-preview {
    background: var(--bg-surface);
    border: 2px solid var(--accent-blue);
    border-radius: 8px;
    padding: 8px;
    box-shadow: var(--shadow-md);
}

/* Locked Elements */
.placed-element.locked-element {
    border: 2px dashed rgba(255, 255, 255, 0.3);
    opacity: 0.85;
    cursor: default !important;
}

.placed-element.locked-element::after {
    content: "üîí";
    position: absolute;
    top: -8px;
    right: -8px;
    font-size: 10px;
}

/* =========================================================
   SCENE TEMPLATE SELECTOR
   ========================================================= */

.template-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.75);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: fadeIn 0.2s ease-out;
}

.template-modal-overlay.closing {
    animation: fadeOut 0.2s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

.template-modal {
    background: var(--bg-panel);
    border: 1px solid var(--border-color);
    border-radius: var(--panel-radius);
    width: 90%;
    max-width: 700px;
    max-height: 85vh;
    display: flex;
    flex-direction: column;
    box-shadow: var(--shadow-xl);
    animation: slideUp 0.2s ease-out;
}

@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.template-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-color);
}

.template-modal-header h3 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--text-primary);
}

.template-modal-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: all var(--transition-fast);
}

.template-modal-close:hover {
    background: var(--bg-surface);
    color: var(--text-primary);
}

.template-modal-body {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
}

.template-modal-hint {
    color: var(--text-secondary);
    font-size: 0.85rem;
    margin-bottom: 16px;
}

.template-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 16px;
}

.template-card {
    background: var(--bg-surface);
    border: 2px solid var(--border-color);
    border-radius: var(--btn-radius);
    padding: 20px 16px;
    text-align: center;
    cursor: pointer;
    transition: all var(--transition-fast);
    position: relative;
}

.template-card:hover {
    border-color: var(--accent-blue);
    background: var(--bg-hover);
    transform: translateY(-2px);
}

.template-card.template-blank {
    border-style: dashed;
}

.template-card .template-icon {
    font-size: 2.5rem;
    display: block;
    margin-bottom: 12px;
}

.template-card h4 {
    margin: 0 0 8px 0;
    font-size: 0.95rem;
    color: var(--text-primary);
}

.template-card p {
    margin: 0;
    font-size: 0.75rem;
    color: var(--text-secondary);
    line-height: 1.4;
}

.template-card .template-category {
    position: absolute;
    top: 8px;
    right: 8px;
    font-size: 0.65rem;
    text-transform: uppercase;
    color: var(--accent-blue);
    background: var(--accent-blue-muted);
    padding: 2px 6px;
    border-radius: 3px;
}

.template-modal-footer {
    padding: 16px 20px;
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: flex-end;
    gap: 12px;
}

/* Template Selector Button */
.template-selector-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: var(--accent-green-muted);
    border: 1px solid var(--accent-green);
    border-radius: var(--btn-radius);
    color: var(--accent-green);
    font-size: 0.75rem;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.template-selector-btn:hover {
    background: var(--accent-green);
    color: white;
}

/* =========================================================
   INTERACTIVE TIMELINE VISUALIZATION
   ========================================================= */

.timeline-viz-wrapper {
    display: flex;
    flex-direction: column;
    background: var(--bg-surface);
    border-radius: var(--panel-radius);
    border: 1px solid var(--border-color);
    overflow: hidden;
    min-height: 300px;
}

.timeline-controls {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-surface-alt);
    border-bottom: 1px solid var(--border-color);
    flex-wrap: wrap;
}

.timeline-btn {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--btn-radius);
    cursor: pointer;
    font-size: 0.85rem;
    transition: all var(--transition-fast);
}

.timeline-btn:hover {
    background: var(--accent-blue);
    border-color: var(--accent-blue);
}

.zoom-level {
    color: var(--text-secondary);
    font-size: 0.8rem;
    min-width: 45px;
}

.timeline-legend {
    display: flex;
    gap: var(--spacing-md);
    margin-left: auto;
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.legend-item.statement { color: var(--accent-blue); }
.legend-item.correction { color: var(--accent-amber); }
.legend-item.scene { color: var(--accent-green); }
.legend-item.conflict { color: var(--accent-red); }

.timeline-viewport {
    flex: 1;
    overflow-x: auto;
    overflow-y: auto;
    cursor: grab;
    padding: var(--spacing-md);
}

.timeline-canvas {
    display: flex;
    flex-direction: column;
    min-width: 100%;
    position: relative;
}

.timeline-lanes {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.swim-lane {
    display: flex;
    align-items: center;
    background: rgba(255, 255, 255, 0.02);
    border-radius: var(--card-radius);
    position: relative;
}

.swim-lane:nth-child(even) {
    background: rgba(255, 255, 255, 0.04);
}

.swim-lane-label {
    min-width: 150px;
    padding: var(--spacing-sm);
    display: flex;
    flex-direction: column;
    gap: 2px;
    position: sticky;
    left: 0;
    background: inherit;
    z-index: 2;
    border-right: 1px solid var(--border-color);
}

.witness-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.85rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.witness-source {
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

.swim-lane-track {
    flex: 1;
    position: relative;
    height: 100%;
    min-height: 60px;
}

.lane-timeline-line {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--border-color) 5%, var(--border-color) 95%, transparent);
}

.event-marker {
    position: absolute;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all var(--transition-fast);
    z-index: 1;
    box-shadow: var(--shadow-sm);
}

.event-marker:hover {
    transform: translate(-50%, -50%) scale(1.3);
    z-index: 10;
    box-shadow: var(--shadow-md);
}

.event-marker.event-statement {
    background: var(--accent-blue);
    border: 2px solid var(--accent-blue-hover);
}

.event-marker.event-correction {
    background: var(--accent-amber);
    border: 2px solid #d97706;
}

.event-marker.event-timeline_event {
    background: #8b5cf6;
    border: 2px solid #7c3aed;
}

.event-marker.event-scene_generation {
    background: var(--accent-green);
    border: 2px solid #16a34a;
}

.event-marker.has-conflict {
    box-shadow: 0 0 0 3px var(--accent-red), var(--shadow-md);
    animation: pulse-conflict 2s infinite;
}

/* Needs review / low confidence markers */
.event-marker.needs-review {
    box-shadow: 0 0 0 3px #f39c12, var(--shadow-md);
}

.event-marker.conf-low {
    opacity: 0.7;
}

.event-marker.conf-med {
    opacity: 0.85;
}

.event-marker.conf-high {
    opacity: 1;
}

@keyframes pulse-conflict {
    0%, 100% { box-shadow: 0 0 0 3px var(--accent-red), var(--shadow-md); }
    50% { box-shadow: 0 0 0 6px rgba(239, 68, 68, 0.3), var(--shadow-md); }
}

.event-icon {
    font-size: 0.7rem;
}

.timeline-axis {
    display: flex;
    position: relative;
    height: 30px;
    margin-top: var(--spacing-sm);
    margin-left: 150px;
    border-top: 1px solid var(--border-color);
}

.time-tick {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    transform: translateX(-50%);
}

.time-tick::before {
    content: "";
    width: 1px;
    height: 8px;
    background: var(--text-muted);
}

.tick-label {
    font-size: 0.65rem;
    color: var(--text-muted);
    white-space: nowrap;
    margin-top: 2px;
}

/* Detail Panel */
.timeline-detail-panel {
    position: absolute;
    top: 0;
    right: 0;
    width: 350px;
    max-width: 90%;
    height: 100%;
    background: var(--bg-surface-alt);
    border-left: 1px solid var(--border-color);
    padding: var(--spacing-md);
    overflow-y: auto;
    z-index: 100;
    box-shadow: var(--shadow-lg);
}

.detail-close {
    position: absolute;
    top: var(--spacing-sm);
    right: var(--spacing-sm);
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 1.2rem;
    cursor: pointer;
    padding: var(--spacing-xs);
}

.detail-close:hover {
    color: var(--accent-red);
}

.detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--border-color);
}

.detail-type {
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--btn-radius);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

.detail-type.statement { background: var(--accent-blue-muted); color: var(--accent-blue); }
.detail-type.correction { background: var(--accent-amber-muted); color: var(--accent-amber); }
.detail-type.timeline_event { background: rgba(139, 92, 246, 0.15); color: #8b5cf6; }
.detail-type.scene_generation { background: var(--accent-green-muted); color: var(--accent-green); }

.detail-time {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.detail-confidence {
    margin-bottom: var(--spacing-md);
    font-size: 0.85rem;
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
}

.detail-confidence strong {
    color: var(--text-secondary);
    font-size: 0.75rem;
    text-transform: uppercase;
}

.confidence-badge {
    display: inline-flex;
    align-items: center;
    padding: 2px 10px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
}

.confidence-badge.high {
    background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
    color: white;
}

.confidence-badge.med {
    background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
    color: white;
}

.confidence-badge.low {
    background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
    color: white;
}

.detail-witness,
.detail-text {
    margin-bottom: var(--spacing-md);
    font-size: 0.85rem;
    line-height: 1.5;
}

.detail-witness strong,
.detail-text strong {
    color: var(--text-secondary);
    font-size: 0.75rem;
    text-transform: uppercase;
    display: block;
    margin-bottom: var(--spacing-xs);
}

.detail-text p {
    color: var(--text-primary);
    background: var(--bg-secondary);
    padding: var(--spacing-sm);
    border-radius: var(--card-radius);
    max-height: 150px;
    overflow-y: auto;
}

.detail-image img {
    width: 100%;
    border-radius: var(--card-radius);
    margin: var(--spacing-sm) 0;
}

.detail-contradictions {
    background: var(--accent-red-muted);
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-radius: var(--card-radius);
    padding: var(--spacing-sm);
    margin-top: var(--spacing-md);
}

.detail-contradictions strong {
    display: block;
    margin-bottom: var(--spacing-sm);
    color: var(--accent-red);
}

.contradiction-item {
    font-size: 0.8rem;
    padding: var(--spacing-xs) 0;
    border-top: 1px solid rgba(239, 68, 68, 0.2);
}

.contradiction-item:first-of-type {
    border-top: none;
}

.severity-low { color: var(--accent-amber); }
.severity-medium { color: var(--accent-red); }
.severity-high { color: #dc2626; font-weight: 600; }

.detail-edit {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
}

.detail-edit label {
    display: block;
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-xs);
}

.edit-time-input {
    width: 100%;
    padding: var(--spacing-sm);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--input-radius);
    color: var(--text-primary);
    font-size: 0.85rem;
    margin-bottom: var(--spacing-sm);
}

.edit-time-input:focus {
    outline: none;
    border-color: var(--accent-blue);
}

.save-time-btn {
    width: 100%;
}

.timeline-error {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 200px;
    color: var(--text-secondary);
}

.error-icon {
    font-size: 2rem;
    margin-bottom: var(--spacing-sm);
}

/* Timeline Clarity / Disambiguation Overlay */
.clarity-overlay {
    padding: var(--spacing-sm) var(--spacing-md);
    background: linear-gradient(135deg, rgba(30, 30, 40, 0.95), rgba(40, 40, 55, 0.95));
    border-bottom: 1px solid var(--border-color);
    border-radius: var(--radius-md) var(--radius-md) 0 0;
}

.clarity-summary {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-size: 0.9rem;
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--radius-sm);
}

.clarity-summary.clarity-high {
    background: rgba(34, 197, 94, 0.1);
    border-left: 3px solid var(--success);
}

.clarity-summary.clarity-medium {
    background: rgba(251, 191, 36, 0.1);
    border-left: 3px solid var(--warning);
}

.clarity-summary.clarity-low {
    background: rgba(239, 68, 68, 0.1);
    border-left: 3px solid var(--error);
}

.clarity-label {
    font-weight: 500;
    color: var(--text-secondary);
}

.clarity-score {
    font-weight: 600;
    color: var(--text-primary);
}

.clarity-level {
    color: var(--text-muted);
    font-size: 0.85rem;
}

.clarity-warning {
    margin-left: auto;
    font-size: 0.85rem;
    color: var(--warning);
}

.clarity-markers {
    margin-top: var(--spacing-sm);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    max-height: 150px;
    overflow-y: auto;
}

.clarity-marker {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-xs) var(--spacing-sm);
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: background 0.2s ease;
}

.clarity-marker:hover {
    background: rgba(0, 0, 0, 0.4);
}

.clarity-marker.needs-clarification {
    border-left: 2px solid var(--warning);
}

.marker-icon {
    font-size: 1rem;
}

.marker-text {
    flex: 1;
    font-size: 0.85rem;
    color: var(--text-secondary);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.marker-clarity {
    font-size: 0.75rem;
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    text-transform: uppercase;
}

.marker-clarity.clarity-clear,
.clarity-badge.clarity-clear {
    background: rgba(34, 197, 94, 0.2);
    color: var(--success);
}

.marker-clarity.clarity-needs_anchor,
.clarity-badge.clarity-needs_anchor {
    background: rgba(251, 191, 36, 0.2);
    color: var(--warning);
}

.marker-clarity.clarity-ambiguous,
.clarity-badge.clarity-ambiguous {
    background: rgba(239, 68, 68, 0.2);
    color: var(--error);
}

.marker-clarity.clarity-unknown,
.clarity-badge.clarity-unknown {
    background: rgba(107, 114, 128, 0.2);
    color: var(--text-muted);
}

/* Clarification Dialog */
.clarification-header {
    background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(234, 179, 8, 0.1));
}

.clarification-context {
    margin: var(--spacing-sm) 0;
}

.clarification-context p {
    color: var(--text-primary);
    font-style: italic;
}

.clarification-issue {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.time-ref {
    font-family: monospace;
    background: rgba(0, 0, 0, 0.2);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
}

.clarity-badge {
    font-size: 0.75rem;
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    text-transform: uppercase;
    font-weight: 500;
}

.clarification-prompt {
    background: rgba(0, 212, 255, 0.05);
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-sm);
    border-left: 2px solid var(--accent);
}

.suggested-question {
    color: var(--accent);
    font-style: italic;
}

.clarification-input,
.sequence-position {
    margin-top: var(--spacing-sm);
}

.clarification-input label,
.sequence-position label {
    display: block;
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

.clarify-offset-input,
.clarify-sequence-input {
    width: 100%;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--input-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
}

.clarify-sequence-input {
    width: 80px;
}

.apply-clarification-btn {
    margin-top: var(--spacing-xs);
}

/* Responsive */
@media (max-width: 768px) {
    .timeline-legend {
        display: none;
    }
    
    .swim-lane-label {
        min-width: 100px;
    }
    
    .timeline-detail-panel {
        width: 100%;
        max-width: 100%;
    }
}


/* Priority Badges and Session Priority Styles */
.priority-badge {
    margin-right: 8px;
    font-size: 0.9rem;
}

.priority-badge.critical {
    animation: pulse-critical 1.5s infinite;
}

.priority-badge.high {
    animation: pulse-high 2s infinite;
}

@keyframes pulse-critical {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

@keyframes pulse-high {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.session-card.priority-critical {
    border-left: 4px solid #ff4444;
    background: linear-gradient(90deg, rgba(255, 68, 68, 0.1) 0%, transparent 20%);
}

.session-card.priority-high {
    border-left: 4px solid #ffaa00;
    background: linear-gradient(90deg, rgba(255, 170, 0, 0.1) 0%, transparent 20%);
}

.session-card.priority-low {
    border-left: 4px solid #666;
    opacity: 0.8;
}

.btn-warning {
    background: linear-gradient(135deg, #ff9800, #f57c00);
    color: white;
    border: none;
}

.btn-warning:hover {
    background: linear-gradient(135deg, #ffb74d, #ff9800);
    transform: translateY(-1px);
}

/* Priority Modal Styles */
#priority-modal .priority-btn {
    transition: all 0.2s ease;
}

#priority-modal .priority-btn:hover {
    transform: translateX(5px);
}

#priority-modal .priority-btn[data-priority="critical"]:hover {
    background: rgba(255, 68, 68, 0.2);
    border-color: #ff4444;
}

#priority-modal .priority-btn[data-priority="high"]:hover {
    background: rgba(255, 170, 0, 0.2);
    border-color: #ffaa00;
}


/* =========================================================
   AUDIO QUALITY INDICATOR
   ========================================================= */
.audio-quality-container {
    display: none;
    width: 100%;
    max-width: 300px;
    margin: var(--spacing-sm) auto 0;
}

.audio-quality-container.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

.audio-quality-indicator {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm);
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
}

.quality-badge {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.quality-badge .quality-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--text-muted);
    transition: background-color 0.2s ease;
}

.quality-badge .quality-label {
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.quality-badge[data-level="good"] .quality-dot {
    background: var(--accent-green);
    box-shadow: 0 0 6px var(--accent-green);
}

.quality-badge[data-level="good"] .quality-label {
    color: var(--accent-green);
}

.quality-badge[data-level="fair"] .quality-dot {
    background: var(--accent-amber);
    box-shadow: 0 0 6px var(--accent-amber);
}

.quality-badge[data-level="fair"] .quality-label {
    color: var(--accent-amber);
}

.quality-badge[data-level="poor"] .quality-dot {
    background: var(--accent-red);
    box-shadow: 0 0 6px var(--accent-red);
    animation: pulse-critical 1s infinite;
}

.quality-badge[data-level="poor"] .quality-label {
    color: var(--accent-red);
}

/* Volume Meter */
.volume-meter {
    position: relative;
    height: 6px;
    background: var(--bg-surface-alt);
    border-radius: 3px;
    overflow: hidden;
}

.volume-bar {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    background: var(--accent-green);
    border-radius: 3px;
    transition: width 0.05s ease, background-color 0.2s ease;
    min-width: 2px;
}

.volume-bar[data-state="quiet"] {
    background: var(--accent-amber);
}

.volume-bar[data-state="loud"] {
    background: var(--accent-red);
}

.volume-bar.clipping {
    background: var(--accent-red);
    animation: clipping-flash 0.1s infinite;
}

@keyframes clipping-flash {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.volume-peak {
    position: absolute;
    top: 0;
    width: 2px;
    height: 100%;
    background: rgba(255, 255, 255, 0.6);
    border-radius: 1px;
    transition: left 0.1s ease;
}

/* Quality Warnings */
.quality-warnings {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    min-height: 0;
}

.quality-warning {
    font-size: 0.7rem;
    color: var(--accent-amber);
    background: var(--accent-amber-muted);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--btn-radius);
    border-left: 2px solid var(--accent-amber);
    animation: slideIn 0.2s ease;
}

.quality-warning.fade-out {
    opacity: 0;
    transition: opacity 0.3s ease;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-5px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive */
@media (max-width: 480px) {
    .audio-quality-container {
        max-width: 100%;
    }
}

/* ============================================================================
   Location Autocomplete Styles
   ============================================================================ */

/* Location input wrapper with GPS button */
.location-input-wrapper {
    position: relative;
    display: flex;
    align-items: stretch;
}

.location-input-wrapper input {
    flex: 1;
    padding-right: 3rem;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

.gps-btn {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 3rem;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-left: none;
    border-radius: 0 var(--btn-radius) var(--btn-radius) 0;
    color: var(--text-primary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    transition: all 0.2s ease;
}

.gps-btn:hover {
    background: var(--bg-surface-alt);
    color: var(--accent-primary);
}

.gps-btn:active {
    transform: scale(0.95);
}

.gps-btn.loading {
    pointer-events: none;
}

.gps-btn .spinner {
    width: 16px;
    height: 16px;
    border: 2px solid var(--border-color);
    border-top-color: var(--accent-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Location suggestions dropdown */
.location-suggestions {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-top: none;
    border-radius: 0 0 var(--btn-radius) var(--btn-radius);
    box-shadow: var(--shadow-medium);
    max-height: 250px;
    overflow-y: auto;
    z-index: 1000;
    display: none;
}

.location-suggestions.visible {
    display: block;
    animation: slideDown 0.15s ease;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-5px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.suggestion-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    cursor: pointer;
    transition: background 0.15s ease;
}

.suggestion-item:hover,
.suggestion-item.active {
    background: var(--bg-surface-alt);
}

.suggestion-icon {
    font-size: 1rem;
    width: 1.5rem;
    text-align: center;
}

.suggestion-text {
    flex: 1;
    font-size: 0.85rem;
    color: var(--text-primary);
}

.suggestion-type {
    font-size: 0.7rem;
    color: var(--text-muted);
    background: var(--bg-surface-alt);
    padding: 2px 6px;
    border-radius: 3px;
}

/* Location coordinates display */
.location-coordinates {
    display: none;
    margin-top: var(--spacing-sm);
}

.location-coordinates.visible {
    display: block;
}

.coordinates-info {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-size: 0.8rem;
    color: var(--text-muted);
    background: var(--bg-surface-alt);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--btn-radius);
    border-left: 3px solid var(--accent-green);
}

.coord-label {
    font-weight: 500;
    color: var(--accent-green);
}

.coord-value {
    font-family: monospace;
    color: var(--text-primary);
}

.coord-accuracy {
    color: var(--text-muted);
    font-size: 0.75rem;
}

.coord-copy-btn {
    margin-left: auto;
    background: transparent;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    padding: 2px 4px;
    border-radius: 3px;
    transition: background 0.15s ease;
}

.coord-copy-btn:hover {
    background: var(--bg-surface);
}

/* Location map container */
.location-map-container {
    display: none;
    margin-top: var(--spacing-md);
    border-radius: var(--btn-radius);
    overflow: hidden;
    border: 1px solid var(--border-color);
}

.location-map-container.visible {
    display: block;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.map-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-surface-alt);
    font-size: 0.8rem;
    font-weight: 500;
}

.map-link {
    color: var(--accent-primary);
    text-decoration: none;
    font-size: 0.75rem;
}

.map-link:hover {
    text-decoration: underline;
}

.location-map-frame {
    width: 100%;
    height: 180px;
    border: none;
    display: block;
}

/* Form group full width */
.form-group-full {
    grid-column: 1 / -1;
}

/* Responsive adjustments */
@media (max-width: 480px) {
    .location-map-frame {
        height: 150px;
    }
    
    .coordinates-info {
        flex-wrap: wrap;
        gap: var(--spacing-xs);
    }
    
    .coord-copy-btn {
        margin-left: 0;
    }
}

/* ============================================
   3D Scene Viewer Styles
   ============================================ */

/* View toggle group */
.palette-header-controls {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm, 8px);
}

.view-toggle-group {
    display: flex;
    border-radius: 6px;
    overflow: hidden;
    border: 1px solid var(--border-color, #3a3a4a);
}

.view-toggle-btn {
    padding: 4px 12px;
    font-size: 0.75rem;
    font-weight: 600;
    background: var(--bg-surface, #1a1a2e);
    color: var(--text-secondary, #a0a0b0);
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
}

.view-toggle-btn:first-child {
    border-right: 1px solid var(--border-color, #3a3a4a);
}

.view-toggle-btn:hover {
    background: var(--bg-surface-hover, #2a2a3e);
    color: var(--text-primary, #ffffff);
}

.view-toggle-btn.active {
    background: var(--accent-primary, #00d4ff);
    color: var(--bg-surface, #1a1a2e);
}

/* Perspective Toggle Group (Bird's Eye / Street View) */
.perspective-toggle-group {
    display: flex;
    border-radius: 6px;
    overflow: hidden;
    border: 1px solid var(--border-color, #3a3a4a);
    margin-left: 4px;
}

.perspective-toggle-btn {
    padding: 4px 10px;
    font-size: 0.85rem;
    background: var(--bg-surface, #1a1a2e);
    color: var(--text-secondary, #a0a0b0);
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
}

.perspective-toggle-btn:first-child {
    border-right: 1px solid var(--border-color, #3a3a4a);
}

.perspective-toggle-btn:hover {
    background: var(--bg-surface-hover, #2a2a3e);
    color: var(--text-primary, #ffffff);
}

.perspective-toggle-btn.active {
    background: var(--accent-secondary, #9b59b6);
    color: var(--bg-surface, #1a1a2e);
}

/* Scene Canvas Perspective Transforms */
#scene-editor-canvas {
    transform-origin: center center;
    transition: transform 0.4s ease, perspective 0.4s ease;
}

#scene-editor-canvas.perspective-bird {
    transform: perspective(none) rotateX(0deg);
}

#scene-editor-canvas.perspective-street {
    transform: perspective(800px) rotateX(45deg) translateY(-30px);
    transform-style: preserve-3d;
}

/* Street view adjustments for placed elements */
#scene-editor-canvas.perspective-street .placed-element {
    transform-style: preserve-3d;
    backface-visibility: hidden;
}

/* Street view indicator */
#scene-editor-canvas.perspective-street::after {
    content: 'üö∂ Street View';
    position: absolute;
    top: 8px;
    right: 8px;
    background: rgba(155, 89, 182, 0.9);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 600;
    z-index: 1000;
    pointer-events: none;
}

/* 3D Canvas Container */
.scene-3d-canvas {
    position: relative;
    background: #1a1a2e;
    border-radius: var(--radius-md, 8px);
    overflow: hidden;
    border: 1px solid var(--border-color, #3a3a4a);
}

.scene-3d-canvas canvas {
    display: block;
    width: 100% !important;
    height: 100% !important;
}

/* 3D Controls Bar */
.scene-3d-controls {
    display: flex;
    gap: var(--spacing-xs, 4px);
    padding: var(--spacing-xs, 4px);
    background: var(--bg-surface-alt, #252538);
    border-radius: var(--radius-sm, 4px);
    margin-top: var(--spacing-xs, 4px);
    justify-content: center;
}

.scene-3d-btn {
    padding: 6px 10px;
    font-size: 0.9rem;
    background: var(--bg-surface, #1a1a2e);
    border: 1px solid var(--border-color, #3a3a4a);
    border-radius: var(--radius-sm, 4px);
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--text-primary, #ffffff);
}

.scene-3d-btn:hover {
    background: var(--accent-primary, #00d4ff);
    color: var(--bg-surface, #1a1a2e);
    border-color: var(--accent-primary, #00d4ff);
}

/* 3D Scene Info Overlay */
.scene-3d-info {
    position: absolute;
    bottom: 8px;
    left: 8px;
    padding: 4px 8px;
    background: rgba(0, 0, 0, 0.7);
    color: #ffffff;
    font-size: 0.7rem;
    border-radius: 4px;
    pointer-events: none;
}

/* Adjust element palette header */
.element-palette-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm, 8px) var(--spacing-md, 12px);
    background: var(--bg-surface-alt, #252538);
    border-radius: var(--radius-md, 8px) var(--radius-md, 8px) 0 0;
}

.element-palette-header h4 {
    margin: 0;
    font-size: 0.9rem;
    font-weight: 600;
}

/* =========================================================
   SCENE ANIMATION CONTROLS
   ========================================================= */

.scene-animation-container {
    background: var(--bg-surface, #1e2d3d);
    border: 1px solid var(--border-color, rgba(255, 255, 255, 0.08));
    border-radius: var(--radius-md, 8px);
    padding: var(--spacing-sm, 8px) var(--spacing-md, 12px);
    margin-top: var(--spacing-sm, 8px);
}

.animation-controls {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm, 8px);
    flex-wrap: wrap;
}

.animation-playback {
    display: flex;
    align-items: center;
    gap: 4px;
}

.anim-btn {
    width: 32px;
    height: 32px;
    border: none;
    border-radius: var(--radius-sm, 4px);
    background: var(--bg-surface-alt, #243447);
    color: var(--text-primary, #e2e8f0);
    font-size: 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast, 0.15s ease);
}

.anim-btn:hover {
    background: var(--accent-blue, #3b82f6);
    color: white;
}

.anim-btn.anim-play {
    width: 40px;
    height: 40px;
    font-size: 16px;
    border-radius: 50%;
    background: var(--accent-blue, #3b82f6);
    color: white;
}

.anim-btn.anim-play:hover {
    background: var(--accent-blue-hover, #2563eb);
    transform: scale(1.05);
}

.animation-progress-wrapper {
    flex: 1;
    min-width: 120px;
}

.animation-progress-bar {
    position: relative;
    height: 8px;
    background: var(--bg-secondary, #1a2332);
    border-radius: 4px;
    cursor: pointer;
    overflow: visible;
}

.animation-progress-fill {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--accent-blue, #3b82f6), #00d4ff);
    border-radius: 4px;
    transition: width 0.05s linear;
}

.animation-progress-handle {
    position: absolute;
    top: 50%;
    left: 0%;
    width: 14px;
    height: 14px;
    background: white;
    border: 2px solid var(--accent-blue, #3b82f6);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    cursor: grab;
    z-index: 2;
    transition: transform 0.1s ease;
}

.animation-progress-handle:hover {
    transform: translate(-50%, -50%) scale(1.2);
}

.animation-progress-handle:active {
    cursor: grabbing;
}

.animation-keyframe-markers {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
}

.keyframe-marker {
    position: absolute;
    top: 50%;
    width: 6px;
    height: 6px;
    background: var(--accent-amber, #f59e0b);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    z-index: 1;
}

.keyframe-marker.action-appear {
    background: var(--accent-green, #22c55e);
}

.keyframe-marker.action-disappear {
    background: var(--accent-red, #ef4444);
}

.keyframe-marker.action-highlight {
    background: #00d4ff;
}

.keyframe-marker.action-pulse {
    background: var(--accent-amber, #f59e0b);
}

.keyframe-marker.action-move {
    background: #9333ea;
}

.animation-time-display {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 0.8rem;
    font-family: 'SF Mono', 'Monaco', monospace;
    color: var(--text-secondary, #94a3b8);
    min-width: 70px;
}

.time-separator {
    color: var(--text-muted, #64748b);
}

.animation-speed {
    display: flex;
    align-items: center;
    gap: 6px;
}

.animation-speed label {
    font-size: 0.75rem;
    color: var(--text-muted, #64748b);
}

.speed-select {
    padding: 4px 8px;
    font-size: 0.75rem;
    background: var(--bg-surface-alt, #243447);
    border: 1px solid var(--border-color, rgba(255, 255, 255, 0.08));
    border-radius: var(--radius-sm, 4px);
    color: var(--text-primary, #e2e8f0);
    cursor: pointer;
}

.speed-select:hover {
    border-color: var(--border-color-hover, rgba(255, 255, 255, 0.14));
}

.animation-info {
    display: flex;
    justify-content: space-between;
    margin-top: var(--spacing-xs, 4px);
    font-size: 0.7rem;
    color: var(--text-muted, #64748b);
}

.animation-status {
    font-weight: 500;
}

/* Animation element effects */
.placed-element.animating {
    transition: opacity 0.1s ease, transform 0.1s ease, box-shadow 0.1s ease;
}

.placed-element.anim-appear {
    animation: fadeScaleIn 0.5s ease forwards;
}

.placed-element.anim-disappear {
    animation: fadeScaleOut 0.5s ease forwards;
}

.placed-element.anim-highlight {
    animation: highlightPulse 0.3s ease;
}

.placed-element.anim-pulse {
    animation: pulse 0.5s ease infinite;
}

@keyframes fadeScaleIn {
    0% {
        opacity: 0;
        transform: scale(0.5);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes fadeScaleOut {
    0% {
        opacity: 1;
        transform: scale(1);
    }
    100% {
        opacity: 0;
        transform: scale(0.5);
    }
}

@keyframes highlightPulse {
    0%, 100% {
        box-shadow: 0 0 0 rgba(0, 212, 255, 0);
    }
    50% {
        box-shadow: 0 0 20px rgba(0, 212, 255, 0.8);
    }
}

@keyframes pulse {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.1);
    }
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .animation-controls {
        flex-direction: column;
        align-items: stretch;
    }
    
    .animation-playback {
        justify-content: center;
    }
    
    .animation-progress-wrapper {
        order: 2;
        width: 100%;
    }
    
    .animation-time-display,
    .animation-speed {
        justify-content: center;
    }
}

/* ==================== Multi-Witness Selector Bar ==================== */

.witness-selector-bar {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--panel-radius);
    margin-bottom: var(--spacing-md);
}

.witness-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-xs);
    flex: 1;
}

.witness-tab {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: 6px 12px;
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--input-radius);
    font-size: 0.85rem;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-base);
}

.witness-tab:hover {
    background: var(--bg-hover);
    border-color: var(--accent-blue-muted);
}

.witness-tab.active {
    background: var(--accent-blue-muted);
    border-color: var(--accent-blue);
    color: var(--accent-blue);
    font-weight: 500;
}

.witness-tab .witness-avatar {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--accent-purple-muted);
    color: var(--accent-purple);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    font-weight: 600;
}

.witness-tab.active .witness-avatar {
    background: var(--accent-blue);
    color: white;
}

.witness-tab .witness-tab-name {
    max-width: 120px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.witness-tab .witness-stmt-count {
    font-size: 0.7rem;
    background: var(--bg-tertiary);
    padding: 2px 6px;
    border-radius: 10px;
    color: var(--text-muted);
}

.witness-tab.active .witness-stmt-count {
    background: var(--accent-blue);
    color: white;
}

/* Witness Reliability Badge */
.witness-reliability-badge {
    font-size: 0.65rem;
    font-weight: bold;
    padding: 2px 6px;
    border-radius: 4px;
    margin-left: 4px;
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s;
}

.witness-reliability-badge:hover {
    transform: scale(1.1);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.reliability-grade-a {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    color: white;
}

.reliability-grade-b {
    background: linear-gradient(135deg, #84cc16, #65a30d);
    color: white;
}

.reliability-grade-c {
    background: linear-gradient(135deg, #eab308, #ca8a04);
    color: #1a1a2e;
}

.reliability-grade-d {
    background: linear-gradient(135deg, #f97316, #ea580c);
    color: white;
}

.reliability-grade-f {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    color: white;
}

/* Reliability Modal Styles */
.reliability-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.reliability-score-large {
    display: flex;
    align-items: baseline;
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: 12px;
    background: var(--bg-tertiary);
}

.reliability-score-large .score-value {
    font-size: 2.5rem;
    font-weight: bold;
}

.reliability-score-large .score-label {
    font-size: 1rem;
    color: var(--text-muted);
    margin-left: 4px;
}

.reliability-grade-badge {
    font-size: 1.2rem;
    font-weight: bold;
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: 8px;
}

.reliability-witness-name {
    text-align: center;
    font-size: 1.1rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-md);
}

.reliability-factors {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.factor-row {
    display: grid;
    grid-template-columns: 140px 1fr 50px;
    align-items: center;
    gap: var(--spacing-sm);
}

.factor-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.factor-bar {
    height: 8px;
    background: var(--bg-tertiary);
    border-radius: 4px;
    overflow: hidden;
}

.factor-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.3s ease;
}

.factor-value {
    font-size: 0.85rem;
    font-weight: 500;
    text-align: right;
}

.reliability-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
    gap: var(--spacing-sm);
    text-align: center;
}

.stat-item {
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: 8px;
}

.stat-item .stat-value {
    display: block;
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--text-primary);
}

.stat-item .stat-label {
    display: block;
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

.stat-item.stat-positive .stat-value {
    color: var(--success-color);
}

.stat-item.stat-negative .stat-value {
    color: var(--error-color);
}

.stat-item.stat-neutral .stat-value {
    color: var(--warning-color);
}

#add-witness-btn {
    padding: 6px 12px;
    font-size: 0.8rem;
    white-space: nowrap;
}

#add-witness-btn .btn-icon {
    font-weight: bold;
}

/* Witness attribution in chat messages */
.msg-witness-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 0.7rem;
    background: var(--accent-purple-muted);
    color: var(--accent-purple);
    padding: 2px 8px;
    border-radius: 10px;
    margin-left: var(--spacing-xs);
}

.msg-witness-badge::before {
    content: "üë§";
    font-size: 0.65rem;
}

/* Mobile responsive */
@media (max-width: 768px) {
    .witness-selector-bar {
        flex-direction: column;
        align-items: stretch;
    }
    
    .witness-tabs {
        justify-content: flex-start;
        overflow-x: auto;
        flex-wrap: nowrap;
        padding-bottom: var(--spacing-xs);
    }
    
    #add-witness-btn {
        align-self: flex-start;
    }
}

/* ==================== Witness Sketches Gallery ==================== */
.witness-sketches-panel {
    background: var(--bg-secondary);
    border-radius: 12px;
    padding: var(--spacing-md);
    margin-top: var(--spacing-md);
    border: 1px solid var(--border-color);
}

.sketches-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--spacing-sm);
}

.sketches-header h4 {
    margin: 0;
    color: var(--text-primary);
    font-size: 0.95rem;
}

.sketches-count {
    background: var(--accent-primary);
    color: white;
    padding: 2px 10px;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
}

.sketches-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: var(--spacing-sm);
}

.sketch-card {
    background: var(--bg-tertiary);
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid var(--border-color);
    transition: transform 0.2s, box-shadow 0.2s;
}

.sketch-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.sketch-image-container {
    position: relative;
    aspect-ratio: 1;
    overflow: hidden;
}

.sketch-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    cursor: pointer;
    transition: transform 0.2s;
}

.sketch-image:hover {
    transform: scale(1.05);
}

.sketch-info {
    padding: var(--spacing-xs);
}

.sketch-description {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin: 0 0 4px 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.sketch-ai-interpretation {
    font-size: 0.75rem;
    color: var(--accent-purple);
    margin: 0 0 4px 0;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.sketch-timestamp {
    font-size: 0.7rem;
    color: var(--text-muted);
}

.sketch-thumbnail {
    max-width: 200px;
    border: 2px solid var(--accent-primary);
    border-radius: 8px;
    margin-top: 8px;
}

.sketch-interpretation {
    margin-top: 8px;
    padding: 8px;
    background: var(--bg-tertiary);
    border-radius: 6px;
    font-size: 0.85rem;
    border-left: 3px solid var(--accent-purple);
}

.sketch-elements ul {
    margin: 8px 0 0 0;
    padding-left: 20px;
}

.sketch-elements li {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

/* Upload sketch button styling */
#upload-sketch-btn {
    background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink, #ff69b4));
}

#upload-sketch-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 0 12px rgba(138, 43, 226, 0.4);
}

/* Mobile responsive */
@media (max-width: 768px) {
    .sketches-gallery {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   Interview Comfort Features
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

/* Comfort Control Panel */
.interview-comfort-panel {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-lg);
    background: var(--glass-bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: var(--card-radius);
    margin-bottom: var(--spacing-sm);
    border: 1px solid var(--glass-border);
    box-shadow: var(--shadow-sm);
}

.comfort-controls {
    display: flex;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
}

.comfort-btn {
    padding: 8px 14px;
    font-size: 0.82rem;
    font-weight: var(--font-weight-medium);
    border-radius: 20px;
    background: var(--glass-bg);
    backdrop-filter: blur(8px);
    border: 1px solid var(--glass-border);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-base);
    display: flex;
    align-items: center;
    gap: 6px;
    box-shadow: var(--shadow-xs);
}

.comfort-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: var(--border-color-hover);
    color: var(--text-primary);
    transform: translateY(-1px);
}

.comfort-btn.paused {
    background: var(--accent-green-muted);
    border-color: rgba(74, 222, 128, 0.3);
    color: var(--accent-green);
    animation: pulse-green 2s infinite;
}

@keyframes pulse-green {
    0%, 100% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.4); }
    50% { box-shadow: 0 0 0 8px rgba(74, 222, 128, 0); }
}

/* Interview Duration Display */
.interview-duration {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-size: 0.88rem;
    color: var(--text-secondary);
    margin-left: auto;
}

.interview-duration-display {
    font-family: var(--font-mono);
    font-weight: var(--font-weight-semibold);
    color: var(--accent-blue);
    background: rgba(0, 0, 0, 0.2);
    padding: 2px 8px;
    border-radius: var(--border-radius-sm);
}

/* Break Counter Badge */
.breaks-counter {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 0.8rem;
    color: var(--text-muted);
}

.breaks-counter .count {
    background: rgba(139, 92, 246, 0.3);
    padding: 2px 6px;
    border-radius: 10px;
    font-weight: 600;
}

/* Pause Overlay */
.pause-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: fadeIn 0.3s ease;
}

.pause-overlay.hidden {
    display: none;
}

.pause-content {
    text-align: center;
    padding: var(--spacing-xl);
    max-width: 400px;
}

.pause-icon {
    font-size: 4rem;
    margin-bottom: var(--spacing-md);
    animation: pulse 2s infinite;
}

.pause-content h2 {
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
    font-size: 1.8rem;
}

.pause-content p {
    color: var(--text-secondary);
    margin-bottom: var(--spacing-md);
}

.pause-timer {
    font-size: 1.2rem;
    color: var(--accent-primary);
    margin-bottom: var(--spacing-lg);
}

.pause-timer #pause-duration {
    font-family: 'Courier New', monospace;
    font-size: 1.5rem;
    font-weight: 700;
}

/* Break Timer Modal */
.break-timer-modal .modal-content {
    max-width: 450px;
    text-align: center;
}

.break-timer-content {
    padding: var(--spacing-lg);
}

.break-timer-display {
    font-size: 4rem;
    font-family: 'Courier New', monospace;
    font-weight: 700;
    color: var(--accent-primary);
    margin-bottom: var(--spacing-md);
    text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
}

.break-message {
    color: var(--text-secondary);
    font-size: 1rem;
    margin-bottom: var(--spacing-lg);
}

.break-tips {
    display: flex;
    justify-content: center;
    gap: var(--spacing-lg);
    color: var(--text-muted);
    font-size: 0.9rem;
}

.break-tips p {
    margin: 0;
}

/* Comfort Messages in Chat */
.comfort-message {
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.1));
    border-left: 3px solid #22c55e;
    border-radius: var(--border-radius);
    margin: var(--spacing-sm) 0;
}

.comfort-message .comfort-avatar {
    background: linear-gradient(135deg, #22c55e, #10b981);
    font-size: 1.2rem;
}

.comfort-message .message-sender {
    color: #22c55e;
    font-weight: 600;
}

.comfort-message.comfort-break-reminder {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(99, 102, 241, 0.1));
    border-left-color: #8b5cf6;
}

.comfort-message.comfort-break-reminder .comfort-avatar {
    background: linear-gradient(135deg, #8b5cf6, #6366f1);
}

.comfort-message.comfort-break-reminder .message-sender {
    color: #8b5cf6;
}

.comfort-actions {
    display: flex;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-sm);
    flex-wrap: wrap;
}

/* Progress Indicator Enhancement */
.interview-progress-enhanced {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-xs);
}

.progress-percentage {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--accent-primary);
    min-width: 40px;
    text-align: right;
}

.progress-stats {
    display: flex;
    gap: var(--spacing-md);
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: var(--spacing-xs);
}

.progress-stat {
    display: flex;
    align-items: center;
    gap: 4px;
}

/* Dark mode adjustments */
[data-theme="dark"] .comfort-btn {
    background: rgba(30, 41, 59, 0.8);
}

[data-theme="dark"] .comfort-btn:hover {
    background: rgba(51, 65, 85, 0.8);
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    .interview-comfort-panel {
        flex-direction: column;
        align-items: stretch;
    }
    
    .comfort-controls {
        justify-content: center;
    }
    
    .interview-duration {
        justify-content: center;
        margin-left: 0;
        margin-top: var(--spacing-xs);
    }
    
    .break-tips {
        flex-direction: column;
        gap: var(--spacing-sm);
    }
    
    .break-timer-display {
        font-size: 3rem;
    }
}

/* =========================================================
   MODERN ANIMATIONS & TRANSITIONS
   ========================================================= */

/* ‚îÄ‚îÄ‚îÄ Smooth Scroll Behavior (Enhanced) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
html {
    scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
    html {
        scroll-behavior: auto;
    }
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* ‚îÄ‚îÄ‚îÄ Page Transition Animations ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@keyframes pageSlideIn {
    from {
        opacity: 0;
        transform: translateY(12px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes pageFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.page-enter {
    animation: pageSlideIn 0.4s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

.main-content,
.chat-container,
.session-container {
    animation: pageSlideIn 0.35s cubic-bezier(0.22, 1, 0.36, 1);
}

/* ‚îÄ‚îÄ‚îÄ Message Animations (Chat) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@keyframes messageFadeSlideIn {
    from {
        opacity: 0;
        transform: translateY(16px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes messageScaleIn {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(8px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.message {
    animation: messageFadeSlideIn 0.35s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

.msg-time {
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-left: 6px;
    font-weight: 400;
    opacity: 0.7;
    vertical-align: middle;
}

.message.message-new {
    animation: messageScaleIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Staggered message appearance */
.message:nth-child(1) { animation-delay: 0ms; }
.message:nth-child(2) { animation-delay: 50ms; }
.message:nth-child(3) { animation-delay: 100ms; }
.message:nth-child(4) { animation-delay: 150ms; }
.message:nth-child(5) { animation-delay: 200ms; }

/* ‚îÄ‚îÄ‚îÄ Enhanced Button Effects ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.btn {
    position: relative;
    overflow: hidden;
    transition: all 0.25s cubic-bezier(0.22, 1, 0.36, 1);
}

.btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%);
    opacity: 0;
    transition: opacity 0.25s ease;
}

.btn:hover:not(:disabled)::before {
    opacity: 1;
}

.btn:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.btn:active:not(:disabled) {
    transform: translateY(0) scale(0.98);
    transition-duration: 0.1s;
}

/* Primary button glow effect */
.btn-primary:hover:not(:disabled) {
    box-shadow: 0 4px 20px rgba(59, 130, 246, 0.35);
}

/* Success button glow */
.btn-success:hover:not(:disabled) {
    box-shadow: 0 4px 20px rgba(34, 197, 94, 0.35);
}

/* Danger button glow */
.btn-danger:hover:not(:disabled) {
    box-shadow: 0 4px 20px rgba(239, 68, 68, 0.35);
}

/* Icon button spin on hover */
.btn-icon:hover:not(:disabled) svg,
.btn-icon:hover:not(:disabled) i {
    transition: transform 0.3s cubic-bezier(0.22, 1, 0.36, 1);
}

/* ‚îÄ‚îÄ‚îÄ Card Hover Effects ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.card,
.panel,
.session-card,
.case-card,
.stat-card {
    transition: transform 0.3s cubic-bezier(0.22, 1, 0.36, 1),
                box-shadow 0.3s cubic-bezier(0.22, 1, 0.36, 1),
                border-color 0.3s ease;
}

.card:hover,
.panel:hover,
.session-card:hover,
.case-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

.stat-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.25);
    border-color: var(--accent-blue);
}

/* ‚îÄ‚îÄ‚îÄ Enhanced Skeleton Loading ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@keyframes skeletonShimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

@keyframes skeletonPulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

.skeleton,
.skeleton-text,
.skeleton-avatar,
.skeleton-button {
    background: linear-gradient(
        90deg,
        rgba(30, 45, 61, 0.8) 0%,
        rgba(45, 65, 85, 0.9) 20%,
        rgba(55, 75, 95, 1) 40%,
        rgba(45, 65, 85, 0.9) 60%,
        rgba(30, 45, 61, 0.8) 100%
    );
    background-size: 400% 100%;
    animation: skeletonShimmer 1.8s ease-in-out infinite;
    border-radius: 6px;
}

.skeleton-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
}

.skeleton-button {
    width: 100px;
    height: 36px;
}

.skeleton-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--panel-radius);
    padding: var(--spacing-md);
    animation: skeletonPulse 2s ease-in-out infinite;
}

/* ‚îÄ‚îÄ‚îÄ Progress Indicator Animations ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@keyframes progressFill {
    from {
        width: 0%;
    }
}

@keyframes progressPulse {
    0%, 100% {
        box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
    }
    50% {
        box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
    }
}

@keyframes progressStripe {
    0% {
        background-position: 0 0;
    }
    100% {
        background-position: 40px 0;
    }
}

.progress-bar-fill,
.progress-fill {
    transition: width 0.6s cubic-bezier(0.22, 1, 0.36, 1);
}

.progress-bar.animated .progress-bar-fill,
.progress-bar.animated .progress-fill {
    animation: progressFill 1s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

.progress-bar.active .progress-bar-fill,
.progress-bar.active .progress-fill {
    animation: progressPulse 2s ease-in-out infinite;
}

.progress-bar.striped .progress-bar-fill,
.progress-bar.striped .progress-fill {
    background-image: linear-gradient(
        45deg,
        rgba(255,255,255,0.15) 25%,
        transparent 25%,
        transparent 50%,
        rgba(255,255,255,0.15) 50%,
        rgba(255,255,255,0.15) 75%,
        transparent 75%,
        transparent
    );
    background-size: 40px 40px;
    animation: progressStripe 1s linear infinite;
}

/* ‚îÄ‚îÄ‚îÄ Enhanced Modal Animations ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@keyframes modalBackdropIn {
    from {
        opacity: 0;
        backdrop-filter: blur(0);
    }
    to {
        opacity: 1;
        backdrop-filter: blur(4px);
    }
}

@keyframes modalSlideUp {
    from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes modalSlideDown {
    from {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    to {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
    }
}

.modal {
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.modal.active {
    animation: modalBackdropIn 0.3s ease forwards;
}

.modal.active .modal-content {
    animation: modalSlideUp 0.35s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

.modal.closing .modal-content {
    animation: modalSlideDown 0.25s cubic-bezier(0.55, 0, 1, 0.45) forwards;
}

/* ‚îÄ‚îÄ‚îÄ Loading Spinner Enhancements ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@keyframes spinnerRotate {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

@keyframes spinnerDash {
    0% {
        stroke-dasharray: 1, 150;
        stroke-dashoffset: 0;
    }
    50% {
        stroke-dasharray: 90, 150;
        stroke-dashoffset: -35;
    }
    100% {
        stroke-dasharray: 90, 150;
        stroke-dashoffset: -124;
    }
}

.spinner,
.loading-spinner {
    animation: spinnerRotate 1s linear infinite;
}

.spinner-stroke {
    animation: spinnerDash 1.5s ease-in-out infinite;
}

/* ‚îÄ‚îÄ‚îÄ Notification/Toast Animations ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@keyframes toastSlideIn {
    from {
        opacity: 0;
        transform: translateX(100%) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
}

@keyframes toastSlideOut {
    from {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
    to {
        opacity: 0;
        transform: translateX(100%) scale(0.9);
    }
}

.toast,
.notification {
    animation: toastSlideIn 0.4s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

.toast.exiting,
.notification.exiting {
    animation: toastSlideOut 0.3s cubic-bezier(0.55, 0, 1, 0.45) forwards;
}

/* ‚îÄ‚îÄ‚îÄ Input Focus Animations ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
input:not([type="checkbox"]):not([type="radio"]),
textarea,
select {
    transition: border-color 0.2s ease,
                box-shadow 0.2s ease,
                background-color 0.2s ease;
}

input:not([type="checkbox"]):not([type="radio"]):focus,
textarea:focus,
select:focus {
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

/* ‚îÄ‚îÄ‚îÄ List Item Hover Effects ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.list-item,
.menu-item,
.dropdown-item {
    transition: background-color 0.2s ease,
                transform 0.2s ease,
                color 0.2s ease;
}

.list-item:hover,
.menu-item:hover,
.dropdown-item:hover {
    transform: translateX(4px);
}

/* ‚îÄ‚îÄ‚îÄ Tooltip Animations ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@keyframes tooltipFadeIn {
    from {
        opacity: 0;
        transform: translateY(4px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

[data-tooltip]::after,
.tooltip {
    animation: tooltipFadeIn 0.2s ease forwards;
}

/* ‚îÄ‚îÄ‚îÄ Collapsible/Accordion Animations ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.collapsible-content,
.accordion-content {
    overflow: hidden;
    transition: max-height 0.35s cubic-bezier(0.22, 1, 0.36, 1),
                opacity 0.3s ease,
                padding 0.3s ease;
}

.collapsible-content.collapsed,
.accordion-content.collapsed {
    max-height: 0;
    opacity: 0;
    padding-top: 0;
    padding-bottom: 0;
}

/* ‚îÄ‚îÄ‚îÄ Icon Rotation Animations ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.icon-rotate {
    transition: transform 0.3s cubic-bezier(0.22, 1, 0.36, 1);
}

.icon-rotate.rotated,
.expanded .icon-rotate {
    transform: rotate(180deg);
}

/* ‚îÄ‚îÄ‚îÄ Tab Transitions ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.tab-content {
    animation: pageFadeIn 0.3s ease;
}

.tab-indicator {
    transition: left 0.3s cubic-bezier(0.22, 1, 0.36, 1),
                width 0.3s cubic-bezier(0.22, 1, 0.36, 1);
}

/* ‚îÄ‚îÄ‚îÄ Floating Action Button ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.fab,
.floating-btn {
    transition: transform 0.3s cubic-bezier(0.22, 1, 0.36, 1),
                box-shadow 0.3s ease,
                background-color 0.2s ease;
}

.fab:hover,
.floating-btn:hover {
    transform: scale(1.08);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
}

.fab:active,
.floating-btn:active {
    transform: scale(0.95);
}

/* ‚îÄ‚îÄ‚îÄ Image/Media Load Animation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@keyframes imageReveal {
    from {
        opacity: 0;
        filter: blur(5px);
    }
    to {
        opacity: 1;
        filter: blur(0);
    }
}

img.loaded,
.media-loaded {
    animation: imageReveal 0.4s ease forwards;
}

/* ‚îÄ‚îÄ‚îÄ Ripple Effect ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@keyframes ripple {
    to {
        transform: scale(4);
        opacity: 0;
    }
}

.ripple {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: scale(0);
    animation: ripple 0.6s ease-out forwards;
    pointer-events: none;
}

/* ‚îÄ‚îÄ‚îÄ Status Badge Pulse ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@keyframes statusPulseGlow {
    0%, 100% {
        box-shadow: 0 0 0 0 currentColor;
    }
    50% {
        box-shadow: 0 0 0 6px transparent;
    }
}

.status-badge.active,
.status-dot.live {
    animation: statusPulseGlow 2s ease-in-out infinite;
}

/* ‚îÄ‚îÄ‚îÄ Micro-interactions ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.checkbox-animated:checked {
    animation: checkBounce 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes checkBounce {
    0% { transform: scale(0.8); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

/* Switch toggle animation */
.switch-track {
    transition: background-color 0.25s ease;
}

.switch-thumb {
    transition: transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* ‚îÄ‚îÄ‚îÄ Count/Number Animation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
@keyframes countUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.stat-number,
.count-value {
    animation: countUp 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* ‚îÄ‚îÄ‚îÄ Scene Card in Chat ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.message-scene-card {
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.08), rgba(139, 92, 246, 0.08));
    border: 1px solid rgba(0, 212, 255, 0.25);
    border-radius: 12px;
    padding: 12px;
    margin: 8px 0;
}

.scene-card-header {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 8px;
    font-size: 0.85rem;
}

.scene-card-version {
    background: rgba(0, 212, 255, 0.2);
    color: var(--accent-cyan, #00d4ff);
    padding: 1px 8px;
    border-radius: 10px;
    font-size: 0.75rem;
    font-weight: 600;
    margin-left: 4px;
}

.scene-card-thumb {
    margin: 6px 0;
    border-radius: 8px;
    overflow: hidden;
    max-height: 160px;
}

.scene-card-image {
    width: 100%;
    max-height: 160px;
    object-fit: cover;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.scene-card-image:hover {
    transform: scale(1.02);
}

.scene-card-desc {
    font-size: 0.8rem;
    color: var(--text-muted, #aaa);
    margin-top: 6px;
    line-height: 1.4;
}

/* ‚îÄ‚îÄ‚îÄ Fullscreen Image Overlay ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.scene-fullscreen-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.92);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s ease;
}

.scene-fullscreen-overlay.visible {
    opacity: 1;
    pointer-events: auto;
}

.scene-fullscreen-img {
    max-width: 95vw;
    max-height: 90vh;
    object-fit: contain;
    border-radius: 8px;
}

.scene-fullscreen-close {
    position: absolute;
    top: 16px;
    right: 20px;
    font-size: 2rem;
    color: #fff;
    cursor: pointer;
    line-height: 1;
    z-index: 10001;
}

/* ‚îÄ‚îÄ‚îÄ Auto-listen & TTS buttons near mic ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
#auto-listen-btn,
#tts-toggle-btn {
    font-size: 0.82rem;
    padding: 6px 12px;
    border-radius: 20px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}
#auto-listen-btn:hover,
#tts-toggle-btn:hover {
    background: rgba(96, 165, 250, 0.15);
    border-color: var(--accent-primary);
}
.mic-area-btn {
    order: 8;
}

/* =========================================================
   DESKTOP VOICE-FIRST LAYOUT (>768px)
   Professional police interview tool ‚Äî proportional mic,
   integrated bottom input area, split panel layout.
   ========================================================= */

/* Voice-first label ‚Äî subtle desktop hint */
.voice-first-label {
    display: none;
}

@media (min-width: 769px) {
    /* Show the voice-first label on desktop */
    .voice-first-label {
        display: block;
        text-align: center;
        font-size: 0.72rem;
        font-weight: 500;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.08em;
        padding: 6px 0 0;
        order: 7;
        flex-shrink: 0;
        opacity: 0.6;
    }

    /* Controls: compact bottom input area, not a huge centered zone */
    .controls {
        padding: var(--spacing-sm) var(--spacing-lg);
        gap: var(--spacing-sm);
        background: rgba(10, 14, 20, 0.45);
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
    }

    /* Mic container: inline, no giant padding */
    .mic-container {
        padding: 16px;
        flex-shrink: 0;
    }

    /* Desktop mic: prominent but proportional (85px) */
    .mic-btn {
        width: 85px;
        height: 85px;
        min-width: 85px;
        font-size: 1.6rem;
        box-shadow:
            0 0 24px rgba(96, 165, 250, 0.18),
            0 0 48px rgba(96, 165, 250, 0.06),
            inset 0 1px 0 rgba(255, 255, 255, 0.08),
            inset 0 -1px 0 rgba(0, 0, 0, 0.12);
    }

    .mic-btn:hover:not(:disabled) {
        transform: scale(1.06);
    }

    .mic-icon {
        font-size: 1.8rem;
    }

    .mic-btn.processing .mic-icon::after,
    .mic-btn.ai-speaking .mic-icon::after {
        font-size: 1.8rem;
    }

    .btn-text {
        font-size: 0.58rem;
        letter-spacing: 0.4px;
    }

    /* Scale pulse and wave rings to match 85px button */
    .mic-pulse-ring {
        width: 85px;
        height: 85px;
    }

    .mic-wave-ring {
        width: 85px;
        height: 85px;
    }

    .waveform-ring {
        width: 100px;
        height: 100px;
    }

    /* Audio visualizer canvas scaled down */
    .mic-container canvas {
        width: 110px;
        height: 110px;
    }

    /* Status indicator: compact inline */
    .status-indicator {
        font-size: 0.8rem;
        padding: 0;
    }

    /* Audio quality inline */
    .audio-quality-container {
        font-size: 0.75rem;
    }

    /* VAD controls: inline row */
    .vad-controls {
        width: auto;
    }

    .vad-toggle-row {
        gap: var(--spacing-xs);
    }

    .vad-label {
        font-size: 0.78rem;
    }

    /* Text input: visible but secondary, muted styling */
    .text-input {
        padding: var(--spacing-sm) var(--spacing-lg);
        background: rgba(10, 14, 20, 0.35);
        border-top: 1px solid rgba(255, 255, 255, 0.04);
    }

    .text-input input,
    .text-input textarea {
        font-size: 0.85rem;
        padding: 10px 16px;
        background: rgba(15, 23, 42, 0.4);
        border-color: rgba(255, 255, 255, 0.06);
        color: var(--text-secondary);
    }

    .text-input input::placeholder,
    .text-input textarea::placeholder {
        color: var(--text-muted);
        opacity: 0.5;
    }

    .text-input input:focus,
    .text-input textarea:focus {
        color: var(--text-primary);
        background: rgba(26, 35, 50, 0.7);
        border-color: rgba(96, 165, 250, 0.3);
    }

    /* Text input buttons slightly smaller on desktop */
    .text-input button,
    .btn-mic {
        width: 38px;
        height: 38px;
        min-width: 38px;
        font-size: 0.95rem;
    }

    .language-selector {
        height: 38px;
        font-size: 0.8rem;
    }

    /* Keyboard hint: subtle */
    .keyboard-hint {
        font-size: 0.7rem;
        opacity: 0.5;
        padding: 2px var(--spacing-md);
    }
}

/* =========================================================
   MODERN DROPDOWN MENUS ‚Äî Desktop simplification
   ========================================================= */

.modern-dropdown {
    position: relative;
    display: inline-flex;
    align-items: center;
}

.modern-dropdown-trigger {
    min-height: 38px;
    border-radius: 12px;
}

.text-tools-dropdown {
    margin-right: 6px;
}

.text-tools-trigger {
    width: 36px !important;
    min-width: 36px;
    height: 36px;
    padding: 0;
    border-radius: 50%;
    font-size: 1.1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    letter-spacing: 1px;
}

.modern-dropdown-menu {
    position: absolute;
    bottom: calc(100% + 10px);
    left: 0;
    min-width: 220px;
    max-height: 60vh;
    overflow-y: auto;
    display: none;
    flex-direction: column;
    gap: 4px;
    padding: 8px;
    border-radius: 14px;
    border: 1px solid var(--glass-border);
    background: rgba(10, 14, 20, 0.94);
    box-shadow: 0 10px 30px rgba(2, 6, 23, 0.45);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    z-index: 1100;
}

.modern-dropdown.open .modern-dropdown-menu {
    display: flex;
}

.modern-dropdown-menu-right {
    left: auto;
    right: 0;
}

.modern-dropdown-item {
    border: 1px solid rgba(148, 163, 184, 0.2);
    background: rgba(15, 23, 42, 0.75);
    color: var(--text-secondary);
    border-radius: 10px;
    padding: 10px 12px;
    text-align: left;
    font-size: 0.84rem;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.modern-dropdown-item:hover:not(:disabled) {
    background: rgba(30, 41, 59, 0.92);
    border-color: rgba(96, 165, 250, 0.42);
    color: var(--text-primary);
}

.modern-dropdown-item:disabled {
    opacity: 0.55;
    cursor: not-allowed;
}

.dropdown-separator {
    border: none;
    border-top: 1px solid rgba(255, 255, 255, 0.08);
    margin: 4px 12px;
}
.dropdown-section-label {
    padding: 8px 16px 4px;
    font-size: 0.68rem;
    font-weight: 600;
    color: var(--text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    pointer-events: none;
}

/* =========================================================
   DESKTOP CLEAN LAYOUT ‚Äî hide clutter, let chat be the hero
   ========================================================= */
@media (min-width: 769px) {
    .menu-hidden-source {
        display: none !important;
    }
}

@media (max-width: 768px) {
    .modern-dropdown {
        display: none !important;
    }
}

/* =========================================================
   HAMBURGER MENU ‚Äî Desktop: hidden, Mobile: visible
   ========================================================= */

/* Hamburger button ‚Äî hidden on desktop */
.hamburger-menu-btn {
    display: none;
}

/* Mobile dropdown menu ‚Äî hidden on desktop */
.mobile-menu-dropdown {
    display: none;
}

/* Mobile menu backdrop overlay */
.mobile-menu-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    z-index: 99998;
    opacity: 0;
    transition: opacity 0.3s ease;
}
.mobile-menu-overlay.open {
    display: block;
    opacity: 1;
}

/* Mobile: hamburger menu and slim header */
@media (max-width: 768px) {
    /* Hamburger button ‚Äî premium glass pill */
    .hamburger-menu-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 34px;
        height: 34px;
        font-size: 1.1rem;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 10px;
        color: var(--text-primary);
        cursor: pointer;
        flex-shrink: 0;
        -webkit-tap-highlight-color: transparent;
        order: 99;
        margin-left: auto;
        transition: all 0.2s ease;
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
    }
    
    .hamburger-menu-btn:active {
        transform: scale(0.92);
        background: rgba(255, 255, 255, 0.1);
    }

    /* Hide toolbar items on mobile ‚Äî they go in hamburger menu */
    .header-menu-item {
        display: none !important;
    }
    
    /* Hide mic-area control buttons on mobile ‚Äî accessible via hamburger */
    .mic-area-btn {
        display: none !important;
    }

    /* Hide comfort panel on mobile ‚Äî items in hamburger menu */
    .interview-comfort-panel {
        display: none !important;
    }

    /* Slim header: max 44px */
    .header {
        min-height: 44px;
        max-height: 44px;
        padding: 0 var(--spacing-sm);
        overflow: visible;
    }

    .header-content {
        flex-wrap: nowrap;
        min-height: 44px;
        max-height: 44px;
        padding: 0;
        gap: var(--spacing-sm);
    }

    /* Compact logo */
    .logo-section {
        gap: var(--spacing-xs);
    }
    .logo-icon {
        font-size: 1.2rem;
    }

    /* Session info: just connection dot + hamburger, no wrapping */
    .session-info {
        width: auto;
        flex-shrink: 0;
        overflow: visible;
        padding-bottom: 0;
        gap: var(--spacing-xs);
    }

    /* Keep connection status dot compact */
    .connection-status {
        padding: 4px 6px;
    }

    /* Mobile dropdown menu ‚Äî iOS action sheet style */
    .mobile-menu-dropdown {
        display: none;
        position: fixed;
        top: auto;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 99999;
        background: rgba(12, 18, 28, 0.92);
        border: none;
        border-top: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 20px 20px 0 0;
        box-shadow: 0 -8px 40px rgba(0, 0, 0, 0.35);
        padding: var(--spacing-sm) 0 calc(var(--spacing-sm) + env(safe-area-inset-bottom, 0px));
        min-width: 100%;
        backdrop-filter: blur(32px) saturate(180%);
        -webkit-backdrop-filter: blur(32px) saturate(180%);
        transform: translateY(100%);
        transition: transform 0.35s cubic-bezier(0.22, 1, 0.36, 1);
        max-height: 70vh;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    /* Drag handle indicator */
    .mobile-menu-dropdown::before {
        content: '';
        display: block;
        width: 36px;
        height: 4px;
        border-radius: 2px;
        background: rgba(255, 255, 255, 0.2);
        margin: 8px auto 12px;
    }

    .mobile-menu-dropdown.open {
        display: block;
        transform: translateY(0);
    }

    .mobile-menu-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        width: 100%;
        padding: 14px 20px;
        font-size: 0.92rem;
        font-weight: var(--font-weight-medium);
        color: var(--text-primary);
        background: none;
        border: none;
        cursor: pointer;
        text-align: left;
        transition: background var(--transition-fast);
        -webkit-tap-highlight-color: transparent;
    }
    .mobile-menu-item:hover,
    .mobile-menu-item:active {
        background: rgba(255, 255, 255, 0.06);
    }
    .mobile-menu-info {
        color: var(--text-secondary);
        font-size: 0.82rem;
        cursor: default;
    }
    .mobile-menu-divider {
        border: none;
        border-top: 1px solid rgba(255, 255, 255, 0.06);
        margin: var(--spacing-xs) var(--spacing-md);
    }
    .mobile-menu-section-label {
        padding: 8px 20px 4px;
        font-size: 0.72rem;
        font-weight: 600;
        color: var(--text-tertiary);
        text-transform: uppercase;
        letter-spacing: 0.08em;
        pointer-events: none;
    }

    /* Fix main content height for slimmer header */
    .main-content {
        height: calc(100vh - 44px - var(--spacing-md) * 2) !important;
        height: calc(100dvh - 44px - var(--spacing-md) * 2) !important;
    }
}

/* ===== Feature 6: Emotion Detection Badge ===== */
.emotion-badge {
    display: inline-block;
    font-size: 0.85rem;
    margin-left: 6px;
    vertical-align: middle;
}

/* ===== Feature 8: Language Auto-Detect Indicator ===== */
.lang-detect-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    font-size: 0.75rem;
    background: var(--glass-bg, rgba(255,255,255,0.08));
    border: 1px solid var(--glass-border, rgba(255,255,255,0.15));
    border-radius: 12px;
    margin-left: 8px;
    color: var(--text-secondary, #aaa);
}

/* ===== Feature 9: Child-Friendly Witness Mode ===== */
.child-mode { font-size: 1.1rem; }
.child-mode .mic-btn { width: 160px !important; height: 160px !important; }
.child-mode .btn-text { font-size: 1.2rem !important; }
.child-mode .message-content { font-size: 1.05rem; line-height: 1.7; }

/* ===== Feature 7: Guided Mode Chip ===== */
.guided-chip {
    display: inline-block;
    padding: 6px 14px;
    margin: 4px;
    background: var(--glass-bg, rgba(255,255,255,0.08));
    border: 1px solid var(--accent-primary, #60a5fa);
    border-radius: 16px;
    font-size: 0.88rem;
    color: var(--text-primary, #fff);
    cursor: pointer;
    transition: background 0.2s;
}
.guided-chip:hover { background: rgba(96,165,250,0.15); }
#guided-suggestions { margin: 6px 0; text-align: center; }

/* ===== Feature 10: Mode Toggle Buttons ===== */
.mode-toggles {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    padding: 4px 0;
}
.mode-toggle-btn {
    padding: 4px 10px;
    font-size: 0.78rem;
    border-radius: 14px;
    border: 1px solid var(--glass-border, rgba(255,255,255,0.15));
    background: var(--glass-bg, rgba(255,255,255,0.05));
    color: var(--text-secondary, #aaa);
    cursor: pointer;
    transition: all 0.2s;
}
.mode-toggle-btn.active {
    background: rgba(96,165,250,0.2);
    border-color: var(--accent-primary, #60a5fa);
    color: var(--text-primary, #fff);
}

/* ===== Feature 10: Enhanced Accessibility ===== */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
    }
}

.high-contrast {
    --bg-primary: #000 !important;
    --text-primary: #fff !important;
    --accent-primary: #ffff00 !important;
    --glass-bg: rgba(0,0,0,0.95) !important;
    --glass-border: rgba(255,255,255,0.5) !important;
}
.high-contrast .btn { border: 2px solid #fff !important; }
.high-contrast .message-content { font-size: 1.1rem; }

*:focus-visible {
    outline: 3px solid var(--accent-primary, #60a5fa) !important;
    outline-offset: 2px;
}

.evidence-tag { display:inline-block; padding:2px 8px; background:rgba(251,191,36,0.15); color:#fbbf24; border-radius:12px; font-size:0.78rem; margin:2px; }

/* ===== Feature 46: Onboarding Tour ===== */
.tour-overlay { position: fixed; inset: 0; z-index: 99000; }
.tour-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.7); }
.tour-tooltip { position: absolute; background: #1a1a2e; border: 1px solid #60a5fa; border-radius: 12px; padding: 16px 20px; max-width: 280px; z-index: 100001; box-shadow: 0 8px 32px rgba(96,165,250,0.3); }
.tour-text { font-size: 0.95rem; color: #e2e8f0; line-height: 1.4; }
.tour-nav { display: flex; justify-content: space-between; align-items: center; margin-top: 12px; }
.tour-progress { font-size: 0.75rem; color: #94a3b8; }
.tour-next-btn { background: #60a5fa; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 0.85rem; font-weight: 600; }
.tour-next-btn:hover { background: #3b82f6; }

/* ===== Feature 47: Witness Feedback Form ===== */
.feedback-modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 99800; display: flex; align-items: center; justify-content: center; }
.feedback-modal { background: var(--bg-secondary, #1a1a2e); border: 1px solid var(--border, #333); border-radius: 16px; padding: 24px; max-width: 350px; width: 90%; }
.feedback-modal h3 { margin: 0 0 12px; }
.feedback-stars { font-size: 1.5rem; cursor: pointer; }
.star:hover { transform: scale(1.2); }
.feedback-q { margin: 10px 0; }
.feedback-q label { font-size: 0.85rem; color: var(--text-secondary); display: block; margin-bottom: 4px; }

/* ===== Feature 48: AI Confidence Visualization ===== */
.confidence-bar { height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; margin-top: 4px; position: relative; }
.confidence-fill { height: 100%; border-radius: 2px; transition: width 0.5s; }
.confidence-label { position: absolute; right: 0; top: -16px; font-size: 0.65rem; color: var(--text-secondary); }

/* ===== Feature 49: Quick Action Command Palette ===== */
.command-palette { position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 99500; display: flex; justify-content: center; padding-top: 20vh; }
.command-palette > .cmd-input, .command-palette > .cmd-list { max-width: 400px; width: 90%; }
.cmd-input { background: var(--bg-secondary, #1a1a2e); border: 1px solid #60a5fa; border-radius: 12px 12px 0 0; padding: 14px 18px; font-size: 1rem; color: white; outline: none; position: absolute; top: 20vh; left: 50%; transform: translateX(-50%); width: min(400px, 90%); }
.cmd-list { position: absolute; top: calc(20vh + 52px); left: 50%; transform: translateX(-50%); width: min(400px, 90%); background: var(--bg-secondary, #1a1a2e); border: 1px solid var(--border, #333); border-top: none; border-radius: 0 0 12px 12px; max-height: 300px; overflow-y: auto; }
.cmd-item { padding: 10px 18px; cursor: pointer; font-size: 0.9rem; }
.cmd-item:hover { background: rgba(96,165,250,0.15); }

/* =========================================================
   LIGHT MODE OVERRIDES
   ========================================================= */
body.light-mode {
    --bg-primary: #f8fafc;
    --bg-secondary: #ffffff;
    --bg-tertiary: #f1f5f9;
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --border: rgba(0, 0, 0, 0.1);
    --accent-primary: #3b82f6;
    background: var(--bg-primary);
    color: var(--text-primary);
}

body.light-mode .chat-area,
body.light-mode .message {
    background: var(--bg-secondary);
}

body.light-mode .message.assistant {
    background: var(--bg-tertiary);
}

body.light-mode .chat-input-area {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border);
}

body.light-mode input, body.light-mode textarea, body.light-mode select {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border-color: var(--border);
}

body.light-mode .dropdown-separator {
    border-top-color: rgba(0, 0, 0, 0.08);
}
body.light-mode .dropdown-section-label,
body.light-mode .mobile-menu-section-label {
    color: var(--text-secondary);
}

/* =========================================================
   PERFORMANCE: will-change for heavy scroll/animation areas
   ========================================================= */
.chat-transcript {
    will-change: scroll-position;
    contain: layout style;
}

.chat-message {
    will-change: transform, opacity;
    contain: content;
}

/* =========================================================
   ACCESSIBILITY: focus-visible for keyboard navigation
   ========================================================= */
:focus-visible {
    outline: 2px solid var(--accent-primary, #3b82f6);
    outline-offset: 2px;
    border-radius: 4px;
}

button:focus:not(:focus-visible),
a:focus:not(:focus-visible) {
    outline: none;
}

/* =========================================================
   MODAL: focus trap & backdrop improvements
   ========================================================= */
.modal[aria-hidden="false"],
.modal:not(.hidden) {
    animation: modalFadeIn 0.2s ease-out;
}

.modal.hidden {
    animation: modalFadeOut 0.2s ease-in;
}

@keyframes modalFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes modalFadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

.modal-content:focus {
    outline: none;
}

/* =========================================================
   LOADING: skeleton pulse for lazy images & async states
   ========================================================= */
.skeleton-pulse {
    background: linear-gradient(90deg,
        var(--bg-surface, #2a2a3e) 25%,
        var(--bg-surface-alt, #3a3a4e) 50%,
        var(--bg-surface, #2a2a3e) 75%);
    background-size: 200% 100%;
    animation: skeletonPulse 1.5s ease-in-out infinite;
    border-radius: var(--card-radius, 8px);
}

@keyframes skeletonPulse {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

img[loading="lazy"] {
    background: var(--bg-surface, #2a2a3e);
    transition: opacity 0.3s ease;
}

/* =========================================================
   BUTTONS: consistent disabled state
   ========================================================= */
button:disabled,
.btn:disabled,
input:disabled,
select:disabled,
textarea:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
}

/* =========================================================
   TOAST: improved visibility on mobile
   ========================================================= */
@media (max-width: 480px) {
    .toast-container,
    .toast {
        max-width: calc(100vw - 32px);
        font-size: 0.82rem;
    }
}

/* =========================================================
   TINY PHONES (< 375px) ‚Äî iPhone SE, Galaxy S small
   ========================================================= */
@media (max-width: 375px) {
    body { font-size: 12px; }

    .logo-text h1 { font-size: 0.78rem; }
    .logo-icon { font-size: 1.2rem; }
    .tagline, .tagline-sub, .challenge-badge { display: none; }

    .mobile-call-title { font-size: 0.72rem; }
    .mobile-call-chip { font-size: 0.58rem; padding: 1px 4px; }

    .quick-phrase-rail { padding: 4px 6px; gap: 4px; }
    .quick-phrase-btn { font-size: 0.65rem; padding: 3px 6px; }

    .suggested-actions { padding: 4px 6px; }
    .suggested-action-btn { font-size: 0.65rem; padding: 3px 6px; }

    #voice-dock { padding: 6px; gap: 4px; }
    #voice-dock .voice-dock-mic-btn { min-height: 52px; }

    .text-input-container input { font-size: 13px; }

    .main-content {
        height: calc(100vh - 40px - 8px);
        height: calc(100dvh - 40px - 8px);
    }

    .mobile-menu-dropdown { font-size: 0.78rem; }
    .mobile-menu-item { padding: 8px 12px; }
}

/* =========================================================
   DESKTOP COMPLETE REDESIGN ‚Äî Final Override (must be last)
   Clean, focused layout: Chat + Input bar (mic + text + tools)
   ========================================================= */
@media (min-width: 769px) {

    /* ‚îÄ‚îÄ HIDE: Everything that clutters the layout ‚îÄ‚îÄ */
    .reporting-steps,
    .interview-comfort-panel,
    .suggested-actions,
    .mode-toggles,
    .quick-phrase-rail,
    .voice-first-label,
    .keyboard-hint,
    .vad-controls,
    .scene-preview,
    .mobile-call-header,
    .mobile-scene-strip,
    .tap-interrupt-affordance,
    .voice-dock,
    #guided-suggestions,
    .audio-quality-container,
    .tagline-sub,
    .challenge-badge,
    .controls,
    .status-indicator,
    #voice-settings-dropdown,
    #witness-selector-bar {
        display: none !important;
    }

    /* ‚îÄ‚îÄ HIDE: Right-panel clutter ‚Äî only scene image matters ‚îÄ‚îÄ */
    .investigation-progress,
    .environmental-conditions-panel,
    .scene-editor-container,
    .evidence-board,
    .timeline-panel,
    .scene-stats,
    .scene-description {
        display: none !important;
    }

    /* Show hidden panels when toggled from ‚ãØ Tools menu */
    .investigation-progress.panel-shown,
    .environmental-conditions-panel.panel-shown,
    .scene-editor-container.panel-shown,
    .evidence-board.panel-shown,
    .timeline-panel.panel-shown,
    .scene-stats.panel-shown,
    .scene-description.panel-shown {
        display: block !important;
    }

    /* ‚îÄ‚îÄ INTERVIEW PHASES: single compact bar ‚îÄ‚îÄ */
    .interview-progress {
        display: flex !important;
        align-items: center;
        padding: 4px var(--spacing-md);
        border-bottom: 1px solid var(--glass-border);
        background: transparent;
        flex-shrink: 0;
        gap: 0;
    }
    .interview-progress .progress-phases {
        display: flex !important;
        gap: 2px;
        flex: 1;
    }
    .interview-progress .phase {
        font-size: 0.68rem;
        padding: 3px 8px;
        border-radius: 10px;
        opacity: 0.4;
        white-space: nowrap;
    }
    .interview-progress .phase.active,
    .interview-progress .phase.completed {
        opacity: 1;
    }
    .interview-progress .progress-bar {
        display: none !important;
    }

    /* ‚îÄ‚îÄ HEADER: ultra-slim ‚îÄ‚îÄ */
    .header {
        min-height: 40px;
        padding: 4px var(--spacing-lg);
    }
    .header-content {
        min-height: 40px;
    }
    .logo-section .logo-icon {
        font-size: 1.1rem;
    }
    .logo-section h1 {
        font-size: 0.95rem;
    }
    .tagline {
        font-size: 0.62rem;
        opacity: 0.5;
    }
    .session-status,
    .connection-quality-badge {
        display: none !important;
    }

    /* ‚îÄ‚îÄ CHAT PANEL: takes ALL available space ‚îÄ‚îÄ */
    .chat-panel {
        display: flex;
        flex-direction: column;
        height: 100%;
        overflow: hidden;
    }

    .chat-transcript {
        flex: 1 1 0;
        min-height: 0;
        overflow-y: auto;
        padding: var(--spacing-md) var(--spacing-lg);
    }

    /* ‚îÄ‚îÄ INPUT BAR: mic + text + tools + send ‚Äî all in one row ‚îÄ‚îÄ */
    .text-input {
        display: flex !important;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        margin: 0 var(--spacing-md) var(--spacing-sm);
        border-radius: 24px;
        border: 1px solid var(--glass-border);
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        flex-shrink: 0;
        order: 10;
    }

    /* Show inline mic button */
    .text-input #chat-mic-btn {
        display: inline-flex !important;
        width: 38px;
        height: 38px;
        min-width: 38px;
        border-radius: 50%;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
        padding: 0;
        background: var(--accent);
        color: #fff;
        border: none;
        cursor: pointer;
        flex-shrink: 0;
        transition: transform 0.15s, background 0.15s;
    }
    .text-input #chat-mic-btn:hover {
        transform: scale(1.08);
    }
    .text-input #chat-mic-btn.recording {
        background: #ef4444;
        animation: mic-pulse-inline 1s ease-in-out infinite;
    }
    @keyframes mic-pulse-inline {
        0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
        50% { box-shadow: 0 0 0 8px rgba(239, 68, 68, 0); }
    }

    /* Hide all other inline clutter */
    .text-input .evidence-upload-btn,
    .text-input #upload-sketch-btn,
    .text-input #camera-btn,
    .text-input .language-selector,
    .text-input .text-input-expand-btn,
    .text-input #retry-last-btn,
    .text-input #auto-scroll-toggle,
    .text-input #compact-mode-toggle,
    .text-input .text-char-counter,
    .text-input #review-testimony-btn {
        display: none !important;
    }

    /* Always show text input and send */
    .text-input #text-input {
        display: block !important;
        flex: 1;
        border: none;
        background: transparent;
        color: var(--text-primary);
        font-size: 0.9rem;
        outline: none;
        padding: 6px 4px;
        min-width: 0;
    }
    .text-input #send-btn {
        display: inline-flex !important;
        min-width: 40px;
        height: 38px;
        border-radius: 20px;
        font-size: 0.82rem;
        padding: 0 16px;
        flex-shrink: 0;
    }

    /* ‚ãØ Tools trigger ‚Äî compact circle */
    .text-tools-trigger {
        width: 38px !important;
        min-width: 38px !important;
        height: 38px;
        padding: 0 !important;
        border-radius: 50%;
        font-size: 1.1rem;
        display: inline-flex !important;
        align-items: center;
        justify-content: center;
    }
    .text-tools-dropdown {
        display: inline-flex !important;
        margin-right: 0;
    }

    /* Dropdown menu ‚Äî glass panel */
    .modern-dropdown-menu {
        min-width: 240px;
        max-height: 55vh;
        overflow-y: auto;
        border-radius: 16px;
        padding: 6px;
    }
    .modern-dropdown-item {
        border-radius: 10px;
        padding: 8px 14px;
        font-size: 0.82rem;
    }
    .dropdown-separator {
        margin: 3px 10px;
    }
    .dropdown-section-label {
        padding: 6px 14px 2px;
        font-size: 0.66rem;
    }
}

/* ‚îÄ‚îÄ Slash Command Hint ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.slash-hint {
    position: absolute;
    bottom: 100%;
    left: 0;
    right: 0;
    background: var(--glass-bg-elevated);
    backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border-vivid);
    border-radius: 12px;
    padding: 8px;
    margin-bottom: 6px;
    box-shadow: var(--shadow-md);
    z-index: 50;
    max-height: 260px;
    overflow-y: auto;
}
.slash-hint-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    border-radius: 8px;
    cursor: pointer;
    transition: background var(--transition-fast);
}
.slash-hint-item:hover, .slash-hint-item.active {
    background: var(--accent-blue-muted);
}
.slash-hint-cmd {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.82rem;
    color: var(--accent-blue);
    font-weight: 600;
    min-width: 80px;
}
.slash-hint-desc {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* ‚îÄ‚îÄ Keyboard Shortcuts Overlay ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.shortcuts-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(8px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: fadeIn 0.2s ease;
}
.shortcuts-panel {
    background: var(--bg-secondary);
    border: 1px solid var(--glass-border-vivid);
    border-radius: 16px;
    padding: 24px;
    max-width: 520px;
    width: 90%;
    box-shadow: var(--shadow-lg);
}
.shortcuts-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}
.shortcuts-header h3 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}
.shortcuts-close {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 4px;
    line-height: 1;
    transition: color var(--transition-fast);
}
.shortcuts-close:hover { color: var(--text-primary); }
.shortcuts-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}
@media (max-width: 500px) {
    .shortcuts-grid { grid-template-columns: 1fr; }
}
.shortcut-group h4 {
    font-size: 0.78rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-muted);
    margin: 0 0 10px;
    font-weight: 600;
}
.shortcut-row {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 5px 0;
    font-size: 0.85rem;
    color: var(--text-secondary);
}
.shortcut-row kbd {
    display: inline-block;
    background: var(--bg-surface);
    border: 1px solid var(--border-color-hover);
    border-radius: 5px;
    padding: 2px 7px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    color: var(--text-primary);
    line-height: 1.4;
    box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}
.shortcut-row span {
    margin-left: auto;
    color: var(--text-muted);
    font-size: 0.8rem;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 1: Quick Reply Suggestion Chips
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.quick-reply-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    padding: 8px 12px;
    margin-top: 4px;
    animation: fadeSlideUp 0.3s ease-out;
}
@keyframes fadeSlideUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
.quick-reply-chip {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    padding: 7px 14px;
    border-radius: 20px;
    background: var(--bg-surface, #1e1e2e);
    border: 1px solid var(--border-color, #2d2d44);
    color: var(--text-secondary, #94a3b8);
    font-size: 0.82rem;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}
.quick-reply-chip:hover {
    background: var(--accent-color, #3b82f6);
    color: #fff;
    border-color: var(--accent-color, #3b82f6);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(59,130,246,0.3);
}
.quick-reply-chip .chip-icon {
    font-size: 0.9rem;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 2: Session Notes Panel
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.session-notes-toggle {
    position: fixed;
    right: 16px;
    bottom: 80px;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: var(--bg-surface, #1a1a2e);
    border: 1px solid var(--border-color, #2d2d44);
    color: var(--text-secondary, #94a3b8);
    font-size: 1.2rem;
    cursor: pointer;
    z-index: 900;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}
.session-notes-toggle:hover {
    background: var(--accent-color, #3b82f6);
    color: #fff;
}
.session-notes-toggle .notes-badge {
    position: absolute;
    top: -4px;
    right: -4px;
    min-width: 18px;
    height: 18px;
    border-radius: 9px;
    background: #ef4444;
    color: #fff;
    font-size: 0.65rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 4px;
}
.session-notes-panel {
    position: fixed;
    right: 16px;
    bottom: 130px;
    width: 320px;
    max-height: 400px;
    background: var(--bg-primary, #0f0f1a);
    border: 1px solid var(--border-color, #2d2d44);
    border-radius: 16px;
    z-index: 901;
    display: flex;
    flex-direction: column;
    box-shadow: 0 8px 32px rgba(0,0,0,0.5);
    animation: fadeSlideUp 0.25s ease-out;
}
.session-notes-panel.hidden { display: none; }
.session-notes-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color, #2d2d44);
}
.session-notes-header h3 {
    margin: 0;
    font-size: 0.9rem;
    color: var(--text-primary, #e2e8f0);
}
.session-notes-close {
    background: none;
    border: none;
    color: var(--text-muted, #64748b);
    cursor: pointer;
    font-size: 1.1rem;
    padding: 2px;
}
.session-notes-body {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
    max-height: 260px;
}
.session-note-item {
    padding: 8px 10px;
    margin-bottom: 6px;
    background: var(--bg-surface, #1e1e2e);
    border-radius: 8px;
    font-size: 0.82rem;
    color: var(--text-secondary, #94a3b8);
    position: relative;
}
.session-note-item .note-time {
    font-size: 0.7rem;
    color: var(--text-muted, #64748b);
    margin-top: 4px;
}
.session-note-item .note-delete {
    position: absolute;
    top: 4px;
    right: 6px;
    background: none;
    border: none;
    color: var(--text-muted, #64748b);
    cursor: pointer;
    font-size: 0.75rem;
    opacity: 0;
    transition: opacity 0.15s;
}
.session-note-item:hover .note-delete { opacity: 1; }
.session-notes-input {
    display: flex;
    gap: 8px;
    padding: 10px 12px;
    border-top: 1px solid var(--border-color, #2d2d44);
}
.session-notes-input input {
    flex: 1;
    background: var(--bg-surface, #1e1e2e);
    border: 1px solid var(--border-color, #2d2d44);
    border-radius: 8px;
    padding: 8px 10px;
    color: var(--text-primary, #e2e8f0);
    font-size: 0.82rem;
}
.session-notes-input button {
    background: var(--accent-color, #3b82f6);
    border: none;
    border-radius: 8px;
    color: #fff;
    padding: 8px 12px;
    cursor: pointer;
    font-size: 0.82rem;
    font-weight: 600;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 3: Enhanced Contradiction Display with animation
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.message-contradiction {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.08) 0%, rgba(245, 158, 11, 0.05) 100%);
    border: 1px solid rgba(239, 68, 68, 0.2);
    border-radius: 12px;
    padding: 14px 16px;
    margin: 10px 0;
    animation: contradictionPulse 0.6s ease-out;
}
@keyframes contradictionPulse {
    0% { opacity: 0; transform: scale(0.95); border-color: rgba(239,68,68,0.6); }
    50% { border-color: rgba(239,68,68,0.4); }
    100% { opacity: 1; transform: scale(1); border-color: rgba(239,68,68,0.2); }
}
.contradiction-item {
    background: var(--bg-tertiary, #2a2a3e);
    border-radius: 10px;
    padding: 14px;
    margin: 8px 0;
    border-left: 4px solid var(--accent-color, #00d4ff);
    transition: transform 0.2s ease;
}
.contradiction-item:hover {
    transform: translateX(2px);
}
.contradiction-item .contradiction-context {
    font-size: 0.75rem;
    color: var(--text-muted, #64748b);
    margin-top: 6px;
    font-style: italic;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 4: Interview Stats Badge in Header
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.interview-stats-badge {
    display: none;
    align-items: center;
    gap: 10px;
    padding: 4px 12px;
    background: var(--bg-surface, #1e1e2e);
    border: 1px solid var(--border-color, #2d2d44);
    border-radius: 20px;
    font-size: 0.75rem;
    color: var(--text-secondary, #94a3b8);
    white-space: nowrap;
}
.interview-stats-badge.visible {
    display: inline-flex;
}
.interview-stats-badge .stat-item {
    display: flex;
    align-items: center;
    gap: 4px;
}
.interview-stats-badge .stat-divider {
    width: 1px;
    height: 14px;
    background: var(--border-color, #2d2d44);
}
.interview-stats-badge .stat-icon {
    font-size: 0.8rem;
}
.interview-stats-badge .stat-val {
    font-weight: 600;
    color: var(--text-primary, #e2e8f0);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 5: Message Reactions (thumbs up/down)
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.msg-reactions {
    display: flex;
    gap: 4px;
    margin-top: 6px;
    opacity: 0;
    transition: opacity 0.2s ease;
}
.message-agent:hover .msg-reactions { opacity: 1; }
.msg-reaction-btn {
    background: var(--bg-surface, #1e1e2e);
    border: 1px solid var(--border-color, #2d2d44);
    border-radius: 14px;
    padding: 3px 8px;
    font-size: 0.72rem;
    cursor: pointer;
    color: var(--text-muted, #64748b);
    transition: all 0.15s ease;
    display: flex;
    align-items: center;
    gap: 3px;
}
.msg-reaction-btn:hover {
    background: var(--bg-tertiary, #2a2a3e);
    color: var(--text-primary, #e2e8f0);
}
.msg-reaction-btn.active {
    background: rgba(59,130,246,0.15);
    border-color: rgba(59,130,246,0.3);
    color: #60a5fa;
}
.msg-reaction-btn.active.negative {
    background: rgba(239,68,68,0.1);
    border-color: rgba(239,68,68,0.2);
    color: #f87171;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 6: Export Chat Transcript Button
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.export-chat-btn {
    position: fixed;
    right: 16px;
    bottom: 28px;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: var(--bg-surface, #1a1a2e);
    border: 1px solid var(--border-color, #2d2d44);
    color: var(--text-secondary, #94a3b8);
    font-size: 1.1rem;
    cursor: pointer;
    z-index: 900;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}
.export-chat-btn:hover {
    background: var(--accent-color, #3b82f6);
    color: #fff;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 7: Focus Mode / Do Not Disturb Indicator
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.focus-mode-indicator {
    display: none;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    background: rgba(34, 197, 94, 0.1);
    border: 1px solid rgba(34, 197, 94, 0.2);
    border-radius: 14px;
    font-size: 0.72rem;
    color: #4ade80;
    font-weight: 500;
    animation: focusFadeIn 0.3s ease-out;
}
.focus-mode-indicator.active { display: inline-flex; }
@keyframes focusFadeIn {
    from { opacity: 0; transform: scale(0.9); }
    to { opacity: 1; transform: scale(1); }
}
.focus-mode-indicator .focus-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #4ade80;
    animation: focusPulse 2s ease-in-out infinite;
}
@keyframes focusPulse {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 1; }
}

/* Mobile responsive for new features */
@media (max-width: 768px) {
    .session-notes-toggle { right: 12px; bottom: 70px; width: 38px; height: 38px; }
    .session-notes-panel { right: 8px; bottom: 115px; width: calc(100vw - 24px); max-width: 340px; }
    .export-chat-btn { right: 12px; bottom: 22px; width: 38px; height: 38px; }
    .interview-stats-badge { display: none !important; }
    .quick-reply-container { padding: 6px 8px; gap: 6px; }
    .quick-reply-chip { padding: 6px 10px; font-size: 0.78rem; }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 8: Chat Message Search Overlay
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.chat-search-overlay {
    position: sticky;
    top: 0;
    z-index: 100;
    padding: 0;
    animation: searchSlideIn 0.2s ease-out;
}
@keyframes searchSlideIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}
.chat-search-bar {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: var(--glass-bg-elevated, rgba(22, 30, 44, 0.92));
    backdrop-filter: var(--glass-blur);
    border-bottom: 1px solid var(--glass-border);
    border-radius: 0 0 12px 12px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.3);
}
.chat-search-icon { font-size: 1rem; opacity: 0.6; }
.chat-search-input {
    flex: 1;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    padding: 6px 10px;
    color: var(--text-primary, #e8ecf4);
    font-size: 0.88rem;
    outline: none;
    min-width: 0;
}
.chat-search-input:focus { border-color: var(--accent-blue); }
.chat-search-count {
    font-size: 0.75rem;
    color: var(--text-muted, #8b95a5);
    white-space: nowrap;
    min-width: 60px;
    text-align: center;
}
.chat-search-nav {
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 6px;
    color: var(--text-primary, #e8ecf4);
    padding: 4px 8px;
    cursor: pointer;
    font-size: 0.75rem;
    transition: background 0.15s;
}
.chat-search-nav:hover { background: rgba(255,255,255,0.12); }
.chat-search-close {
    background: none;
    border: none;
    color: var(--text-muted, #8b95a5);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 2px 6px;
    line-height: 1;
}
.chat-search-close:hover { color: var(--accent-red); }
.chat-search-highlight {
    background: rgba(251, 191, 36, 0.08) !important;
    border-left: 3px solid var(--accent-amber) !important;
}
.chat-search-active {
    background: rgba(251, 191, 36, 0.18) !important;
    border-left: 3px solid var(--accent-amber) !important;
    box-shadow: 0 0 0 1px rgba(251, 191, 36, 0.3);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 9: Message Pinning / Bookmarking
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.msg-pin-btn {
    position: absolute;
    top: 6px;
    right: 6px;
    background: none;
    border: none;
    font-size: 0.8rem;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.2s, transform 0.2s;
    padding: 2px 4px;
    border-radius: 4px;
    z-index: 5;
}
.message:hover .msg-pin-btn { opacity: 0.5; }
.msg-pin-btn:hover { opacity: 1 !important; transform: scale(1.2); }
.msg-pin-btn.pinned {
    opacity: 1 !important;
    filter: drop-shadow(0 0 4px rgba(96, 165, 250, 0.5));
}
.message { position: relative; }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 11: Auto-Save Indicator
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.auto-save-indicator {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 0.7rem;
    color: var(--text-muted, #8b95a5);
    transition: all 0.3s ease;
    white-space: nowrap;
}
.auto-save-indicator .save-icon { font-size: 0.75rem; }
.auto-save-indicator .save-text { font-weight: 500; }
.auto-save-indicator.saving {
    color: var(--accent-amber);
    background: rgba(251, 191, 36, 0.08);
}
.auto-save-indicator.saving .save-icon { animation: saveRotate 1s linear infinite; }
@keyframes saveRotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
.auto-save-indicator.saved {
    color: var(--accent-green);
    background: rgba(74, 222, 128, 0.08);
}
.auto-save-indicator.error {
    color: var(--accent-red);
    background: rgba(248, 113, 113, 0.08);
}
.auto-save-indicator.fade { opacity: 0.3; }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 12: Double-Click Copy Flash
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.message.copy-flash {
    animation: copyFlash 0.6s ease-out;
}
@keyframes copyFlash {
    0% { box-shadow: 0 0 0 0 rgba(96, 165, 250, 0.4); }
    30% { box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.2); }
    100% { box-shadow: none; }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 13: Follow-up Actions after /summary and /timeline
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.followup-actions {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    margin: 4px 0;
    animation: followupFadeIn 0.3s ease-out;
}
@keyframes followupFadeIn {
    from { opacity: 0; transform: translateY(6px); }
    to { opacity: 1; transform: translateY(0); }
}
.followup-label {
    font-size: 0.75rem;
    color: var(--text-muted, #8b95a5);
    font-weight: 500;
    margin-right: 4px;
}
.followup-btn {
    background: rgba(96, 165, 250, 0.08);
    border: 1px solid rgba(96, 165, 250, 0.15);
    border-radius: 16px;
    padding: 5px 12px;
    font-size: 0.78rem;
    color: var(--accent-blue);
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
}
.followup-btn:hover {
    background: rgba(96, 165, 250, 0.16);
    border-color: rgba(96, 165, 250, 0.3);
    transform: translateY(-1px);
}

/* Mobile adjustments for new features */
@media (max-width: 768px) {
    .chat-search-bar { padding: 6px 8px; gap: 4px; }
    .chat-search-count { min-width: auto; font-size: 0.7rem; }
    .auto-save-indicator { display: none !important; }
    .followup-actions { padding: 6px 8px; }
    .followup-btn { padding: 4px 10px; font-size: 0.74rem; }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 14: Interview Phase Progress Bar
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.phase-progress {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0;
    padding: 6px 16px;
    background: rgba(15, 23, 42, 0.6);
    border-bottom: 1px solid rgba(96, 165, 250, 0.1);
    backdrop-filter: blur(8px);
    overflow-x: auto;
}
.phase-step {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    color: rgba(148, 163, 184, 0.5);
    transition: all 0.3s ease;
    white-space: nowrap;
}
.phase-step.active {
    color: #60a5fa;
    background: rgba(96, 165, 250, 0.1);
    font-weight: 600;
}
.phase-step.completed {
    color: #34d399;
}
.phase-step.completed .phase-icon::after {
    content: '‚úì';
    font-size: 0.6rem;
    position: absolute;
    top: -2px;
    right: -4px;
}
.phase-icon {
    font-size: 1rem;
    position: relative;
}
.phase-label {
    font-size: 0.7rem;
}
.phase-connector {
    display: inline-block;
    width: 24px;
    height: 1px;
    background: rgba(148, 163, 184, 0.2);
    margin: 0 4px;
}
.phase-step.completed + .phase-step .phase-connector,
.phase-step.completed ~ .phase-connector {
    background: rgba(52, 211, 153, 0.4);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 16: Evidence Extraction
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.evidence-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 8px;
    margin-top: 8px;
}
.evidence-card {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 12px;
    background: rgba(96, 165, 250, 0.06);
    border: 1px solid rgba(96, 165, 250, 0.15);
    border-radius: 10px;
    transition: border-color 0.2s;
}
.evidence-card:hover {
    border-color: rgba(96, 165, 250, 0.35);
}
.evidence-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
}
.evidence-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 0;
}
.evidence-name {
    font-weight: 600;
    color: #e2e8f0;
    font-size: 0.85rem;
}
.evidence-context {
    font-size: 0.75rem;
    color: rgba(148, 163, 184, 0.7);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
.evidence-speaker {
    font-size: 0.68rem;
    color: rgba(96, 165, 250, 0.6);
    font-style: italic;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 17: Session Duration Live Timer
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.session-timer {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 3px 10px;
    background: rgba(96, 165, 250, 0.08);
    border: 1px solid rgba(96, 165, 250, 0.15);
    border-radius: 16px;
    font-size: 0.78rem;
    color: #94a3b8;
    font-family: 'JetBrains Mono', monospace;
    white-space: nowrap;
}
.timer-icon {
    font-size: 0.85rem;
}
.timer-value {
    min-width: 42px;
    text-align: center;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   IMPROVEMENT 18: Message Timestamps
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.msg-timestamp {
    display: inline-block;
    font-size: 0.65rem;
    color: rgba(148, 163, 184, 0.35);
    margin-left: 8px;
    font-family: 'JetBrains Mono', monospace;
    cursor: default;
    vertical-align: middle;
    transition: color 0.2s;
}
.message:hover .msg-timestamp {
    color: rgba(148, 163, 184, 0.6);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   Mobile Responsive for new features
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
@media (max-width: 768px) {
    .phase-progress { padding: 4px 8px; gap: 0; }
    .phase-label { display: none; }
    .phase-step { padding: 4px 8px; }
    .phase-connector { width: 12px; }
    .evidence-grid { grid-template-columns: 1fr; }
    .session-timer { padding: 2px 6px; font-size: 0.7rem; }
}

/* ‚ïê‚ïê‚ïê IMPROVEMENT 21: Interview Quality Score Widget ‚ïê‚ïê‚ïê */
.quality-score-widget {
    display: flex; align-items: center; gap: 4px; cursor: pointer;
    background: rgba(99,102,241,0.1); border-radius: 8px; padding: 3px 8px;
    transition: background 0.2s;
}
.quality-score-widget:hover { background: rgba(99,102,241,0.2); }
.qs-icon { font-size: 0.85rem; }
.qs-label { font-size: 0.65rem; color: var(--text-muted, #888); text-transform: uppercase; letter-spacing: 0.5px; }
.qs-ring { position: relative; width: 28px; height: 28px; }
.qs-ring svg { width: 100%; height: 100%; transform: rotate(-90deg); }
.qs-bg { fill: none; stroke: rgba(99,102,241,0.15); stroke-width: 3; }
.qs-fill { fill: none; stroke: #6366f1; stroke-width: 3; stroke-linecap: round; transition: stroke-dasharray 0.5s ease; }
.qs-value { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; font-size: 0.6rem; font-weight: 700; color: #6366f1; }
.quality-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 6px; margin-top: 8px; }
.quality-cat { display: flex; align-items: center; gap: 6px; padding: 6px 10px; border-radius: 6px; font-size: 0.85rem; background: rgba(255,255,255,0.05); }
.quality-cat.covered { background: rgba(34,197,94,0.1); }
.quality-cat.missing { opacity: 0.6; }
.qc-icon { font-size: 1rem; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 22: Per-message Read Aloud ‚ïê‚ïê‚ïê */
.read-aloud-btn {
    background: none; border: none; cursor: pointer; font-size: 0.75rem; opacity: 0;
    transition: opacity 0.2s, transform 0.15s; padding: 2px 4px; border-radius: 4px;
}
.message.agent:hover .read-aloud-btn, .read-aloud-btn:focus { opacity: 0.7; }
.read-aloud-btn:hover { opacity: 1; transform: scale(1.15); }
.read-aloud-btn.speaking { opacity: 1; animation: pulse-speak 0.6s infinite alternate; }
@keyframes pulse-speak { from { transform: scale(1); } to { transform: scale(1.2); } }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 23: Sentiment Timeline ‚ïê‚ïê‚ïê */
.sentiment-timeline {
    display: flex; align-items: center; gap: 2px; padding: 10px 0; overflow-x: auto;
    flex-wrap: nowrap;
}
.st-point {
    display: flex; flex-direction: column; align-items: center; gap: 2px;
    padding: 4px 6px; border-radius: 8px; min-width: 40px;
    transition: transform 0.15s;
}
.st-point:hover { transform: scale(1.1); }
.st-point.pos { background: rgba(34,197,94,0.12); }
.st-point.neg { background: rgba(239,68,68,0.12); }
.st-point.neu { background: rgba(148,163,184,0.1); }
.st-dot { width: 8px; height: 8px; border-radius: 50%; }
.st-point.pos .st-dot { background: #22c55e; }
.st-point.neg .st-dot { background: #ef4444; }
.st-point.neu .st-dot { background: #94a3b8; }
.st-emoji { font-size: 1rem; }
.st-num { font-size: 0.6rem; color: var(--text-muted, #888); }
.st-connector { width: 16px; height: 2px; background: rgba(148,163,184,0.3); flex-shrink: 0; }
.st-summary {
    display: flex; gap: 16px; margin-top: 8px; padding-top: 8px;
    border-top: 1px solid rgba(148,163,184,0.15); font-size: 0.8rem;
}
.st-stat { display: flex; align-items: center; gap: 4px; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 24: Interview Info Checklist ‚ïê‚ïê‚ïê */
.info-checklist {
    position: fixed; bottom: 80px; right: 16px; z-index: 200;
    background: var(--surface-card, #1a1a2e); border: 1px solid rgba(99,102,241,0.2);
    border-radius: 12px; width: 220px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    transition: all 0.25s ease;
}
.info-checklist.collapsed .ic-body { display: none; }
.ic-header {
    display: flex; align-items: center; gap: 6px; padding: 10px 12px; cursor: pointer;
    border-radius: 12px; user-select: none;
}
.ic-header:hover { background: rgba(99,102,241,0.08); }
.ic-title { font-size: 0.8rem; font-weight: 600; flex: 1; }
.ic-count { font-size: 0.7rem; color: #6366f1; font-weight: 700; background: rgba(99,102,241,0.15); padding: 1px 6px; border-radius: 8px; }
.ic-arrow { font-size: 0.65rem; color: var(--text-muted, #888); transition: transform 0.2s; }
.ic-body { padding: 0 8px 8px; }
.ic-item {
    display: flex; align-items: center; gap: 6px; padding: 4px 6px; font-size: 0.78rem;
    border-radius: 6px; transition: background 0.15s;
}
.ic-item:hover { background: rgba(99,102,241,0.06); }
.ic-item.checked { opacity: 1; }
.ic-check { font-size: 0.85rem; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 25: Session Tags ‚ïê‚ïê‚ïê */
.tag-list { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
.session-tag {
    display: inline-flex; align-items: center; gap: 4px;
    background: rgba(99,102,241,0.15); color: #818cf8; border-radius: 12px;
    padding: 3px 10px; font-size: 0.78rem; font-weight: 500;
}
.tag-remove {
    background: none; border: none; color: #818cf8; cursor: pointer; font-size: 0.9rem;
    padding: 0 2px; opacity: 0.6; transition: opacity 0.15s;
}
.tag-remove:hover { opacity: 1; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 26: Scroll Navigation ‚ïê‚ïê‚ïê */
.scroll-nav {
    position: absolute; right: 12px; bottom: 12px; display: flex; flex-direction: column;
    gap: 4px; opacity: 0; pointer-events: none; transition: opacity 0.25s; z-index: 50;
}
.scroll-nav.visible { opacity: 1; pointer-events: auto; }
.scroll-btn {
    width: 32px; height: 32px; border-radius: 50%; border: 1px solid rgba(99,102,241,0.3);
    background: var(--surface-card, #1a1a2e); cursor: pointer; font-size: 0.85rem;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2); transition: all 0.15s;
}
.scroll-btn:hover { background: rgba(99,102,241,0.15); border-color: #6366f1; transform: scale(1.1); }

@media (max-width: 768px) {
    .quality-score-widget { padding: 2px 5px; }
    .qs-label { display: none; }
    .info-checklist { right: 8px; bottom: 70px; width: 190px; }
    .sentiment-timeline { flex-wrap: wrap; }
}

/* ‚ïê‚ïê‚ïê IMPROVEMENT 28: Key Fact Auto-Highlighting ‚ïê‚ïê‚ïê */
.fact-highlight {
    display: inline;
    padding: 1px 5px;
    border-radius: 4px;
    font-size: 0.92em;
    font-weight: 500;
    white-space: nowrap;
}
.fact-time { background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.25); }
.fact-date { background: rgba(168, 85, 247, 0.15); color: #c084fc; border: 1px solid rgba(168, 85, 247, 0.25); }
.fact-location { background: rgba(34, 197, 94, 0.15); color: #4ade80; border: 1px solid rgba(34, 197, 94, 0.25); }
.fact-measure { background: rgba(251, 191, 36, 0.15); color: #fbbf24; border: 1px solid rgba(251, 191, 36, 0.2); }
.fact-desc { background: rgba(244, 114, 182, 0.15); color: #f472b6; border: 1px solid rgba(244, 114, 182, 0.2); }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 29: Witness Profile Card ‚ïê‚ïê‚ïê */
.witness-profile-card {
    position: fixed;
    left: 12px;
    top: 80px;
    width: 220px;
    background: rgba(15, 15, 25, 0.95);
    border: 1px solid rgba(59, 130, 246, 0.25);
    border-radius: 12px;
    z-index: 100;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    overflow: hidden;
}
.witness-profile-card.collapsed .wpc-body { display: none; }
.wpc-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    cursor: pointer;
    background: rgba(59, 130, 246, 0.1);
    border-bottom: 1px solid rgba(59, 130, 246, 0.15);
}
.wpc-header:hover { background: rgba(59, 130, 246, 0.18); }
.wpc-icon { font-size: 1.2em; }
.wpc-title { font-weight: 600; color: #e2e8f0; font-size: 0.85rem; flex: 1; }
.wpc-expand { color: #64748b; font-size: 0.75em; transition: transform 0.2s; }
.wpc-body { padding: 10px 12px; }
.wpc-field { display: flex; flex-direction: column; margin-bottom: 6px; }
.wpc-field label { font-size: 0.7rem; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px; }
.wpc-field span { font-size: 0.82rem; color: #cbd5e1; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 30: AI Follow-up Suggestions ‚ïê‚ïê‚ïê */
.ai-suggestion-bar {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: rgba(59, 130, 246, 0.08);
    border: 1px solid rgba(59, 130, 246, 0.15);
    border-radius: 10px;
    margin: 6px 0;
    flex-wrap: wrap;
    animation: fadeSlideIn 0.3s ease;
}
.aisb-label { font-size: 0.78rem; color: #94a3b8; white-space: nowrap; }
.ai-suggestion-chip {
    background: rgba(59, 130, 246, 0.15);
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: 16px;
    padding: 4px 12px;
    font-size: 0.78rem;
    color: #93c5fd;
    cursor: pointer;
    transition: all 0.2s;
    max-width: 250px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
.ai-suggestion-chip:hover {
    background: rgba(59, 130, 246, 0.3);
    color: #bfdbfe;
    transform: translateY(-1px);
}
.ai-suggestion-dismiss {
    background: none;
    border: none;
    color: #64748b;
    cursor: pointer;
    font-size: 0.85rem;
    padding: 2px 6px;
    margin-left: auto;
}
.ai-suggestion-dismiss:hover { color: #f87171; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 31: Message Context Menu ‚ïê‚ïê‚ïê */
.msg-context-menu {
    position: fixed;
    z-index: 10000;
    background: rgba(15, 15, 30, 0.98);
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: 10px;
    padding: 4px;
    min-width: 160px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.5);
    display: flex;
    flex-direction: column;
    animation: fadeSlideIn 0.15s ease;
}
.ctx-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: none;
    border: none;
    color: #cbd5e1;
    font-size: 0.82rem;
    cursor: pointer;
    border-radius: 6px;
    text-align: left;
    transition: background 0.15s;
}
.ctx-item:hover { background: rgba(59, 130, 246, 0.2); color: #fff; }
.msg-highlighted {
    border-left: 3px solid #fbbf24 !important;
    background: rgba(251, 191, 36, 0.08) !important;
}

/* ‚ïê‚ïê‚ïê IMPROVEMENT 32: Investigation Report ‚ïê‚ïê‚ïê */
.investigation-report {
    background: rgba(15, 15, 30, 0.6);
    border: 1px solid rgba(59, 130, 246, 0.2);
    border-radius: 12px;
    padding: 16px;
    max-width: 100%;
}
.investigation-report h3 { margin: 0 0 12px; font-size: 1.1rem; color: #e2e8f0; }
.ir-section {
    margin-bottom: 12px;
    padding: 10px;
    background: rgba(30, 30, 60, 0.4);
    border-radius: 8px;
    border: 1px solid rgba(59, 130, 246, 0.1);
}
.ir-section b { display: block; margin-bottom: 6px; color: #93c5fd; font-size: 0.85rem; }
.ir-row { display: flex; justify-content: space-between; font-size: 0.82rem; color: #94a3b8; padding: 2px 0; }
.ir-row span:first-child { color: #64748b; }
.ir-stmt { font-size: 0.8rem; color: #94a3b8; padding: 4px 0; border-bottom: 1px solid rgba(59, 130, 246, 0.06); }
.ir-stmt em { color: #fbbf24; }
.ir-footer { text-align: center; font-size: 0.72rem; color: #475569; margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(59, 130, 246, 0.1); }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 33: Quick Incident Templates ‚ïê‚ïê‚ïê */
.quick-templates-bar {
    padding: 16px;
    background: rgba(15, 15, 30, 0.5);
    border: 1px solid rgba(59, 130, 246, 0.15);
    border-radius: 14px;
    margin-bottom: 12px;
    animation: fadeSlideIn 0.4s ease;
    transition: opacity 0.3s, transform 0.3s;
}
.quick-templates-bar.qt-fade { opacity: 0; transform: translateY(-10px); pointer-events: none; }
.qt-label { font-size: 0.88rem; color: #94a3b8; margin-bottom: 10px; display: block; }
.qt-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
    gap: 8px;
}
.qt-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 14px 8px;
    background: rgba(30, 30, 60, 0.6);
    border: 1px solid rgba(59, 130, 246, 0.15);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
    color: #cbd5e1;
}
.qt-btn:hover {
    background: rgba(59, 130, 246, 0.2);
    border-color: rgba(59, 130, 246, 0.4);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
}
.qt-icon { font-size: 1.5em; }
.qt-text { font-size: 0.78rem; font-weight: 500; }

@keyframes fadeSlideIn {
    from { opacity: 0; transform: translateY(-6px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Mobile responsive for new features */
@media (max-width: 768px) {
    .witness-profile-card { display: none; }
    .qt-grid { grid-template-columns: repeat(2, 1fr); }
    .ai-suggestion-chip { max-width: 180px; }
    .investigation-report { padding: 10px; }
}

/* ‚ïê‚ïê‚ïê IMPROVEMENT 34: Credibility Gauge ‚ïê‚ïê‚ïê */
.credibility-gauge {
    background: rgba(15, 15, 30, 0.7);
    border: 1px solid rgba(59, 130, 246, 0.15);
    border-radius: 12px;
    margin: 8px 0;
    overflow: hidden;
    transition: all 0.3s ease;
}
.credibility-gauge.collapsed .cg-body { display: none; }
.cg-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 14px;
    cursor: pointer;
    font-size: 0.85rem;
    color: #94a3b8;
    font-weight: 600;
}
.cg-header:hover { background: rgba(59, 130, 246, 0.08); }
.cg-score { font-size: 1rem; color: #60a5fa; font-weight: 700; }
.cg-body { padding: 0 14px 12px; }
.cg-bar-wrap {
    height: 6px;
    background: rgba(30, 41, 59, 0.6);
    border-radius: 3px;
    overflow: hidden;
    margin-bottom: 8px;
}
.cg-bar {
    height: 100%;
    border-radius: 3px;
    transition: width 0.8s ease, background 0.5s ease;
    background: #60a5fa;
}
.cg-assessment { font-size: 0.78rem; color: #94a3b8; margin-bottom: 6px; }
.cg-row {
    display: flex;
    justify-content: space-between;
    font-size: 0.72rem;
    color: #64748b;
    padding: 2px 0;
    text-transform: capitalize;
}

/* Credibility report in chat */
.credibility-report { padding: 14px; }
.credibility-report h4 { margin: 0 0 10px; font-size: 1rem; color: #e2e8f0; }
.cr-bars { display: flex; flex-direction: column; gap: 6px; }
.cr-bar-row { display: flex; align-items: center; gap: 8px; }
.cr-label { font-size: 0.78rem; color: #94a3b8; width: 100px; text-transform: capitalize; }
.cr-track { flex: 1; height: 5px; background: rgba(30, 41, 59, 0.6); border-radius: 3px; overflow: hidden; }
.cr-fill { height: 100%; border-radius: 3px; transition: width 0.6s ease; }
.cr-val { font-size: 0.75rem; color: #64748b; width: 35px; text-align: right; }
.cr-flag { font-size: 0.78rem; color: #fbbf24; margin-top: 6px; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 35: Extracted Timeline ‚ïê‚ïê‚ïê */
.extracted-timeline { padding: 14px; }
.extracted-timeline h4 { margin: 0 0 12px; color: #e2e8f0; font-size: 1rem; }
.et-track { position: relative; padding-left: 20px; border-left: 2px solid rgba(59, 130, 246, 0.3); }
.et-event { position: relative; margin-bottom: 14px; padding-left: 12px; }
.et-dot {
    position: absolute;
    left: -25px;
    top: 4px;
    width: 8px;
    height: 8px;
    background: #60a5fa;
    border-radius: 50%;
    border: 2px solid rgba(15, 15, 30, 0.9);
}
.et-time { font-size: 0.82rem; color: #60a5fa; font-weight: 600; margin-bottom: 2px; }
.et-ctx { font-size: 0.78rem; color: #94a3b8; line-height: 1.4; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 36: Session Comparison ‚ïê‚ïê‚ïê */
.session-comparison { padding: 14px; }
.session-comparison h4 { margin: 0 0 12px; color: #e2e8f0; font-size: 1rem; }
.sc-pair { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
.sc-card {
    flex: 1;
    background: rgba(30, 30, 60, 0.5);
    border: 1px solid rgba(59, 130, 246, 0.15);
    border-radius: 10px;
    padding: 10px;
    font-size: 0.82rem;
    color: #cbd5e1;
}
.sc-card b { color: #93c5fd; display: block; margin-bottom: 4px; }
.sc-card small { color: #64748b; font-size: 0.72rem; }
.sc-vs { font-size: 0.9rem; font-weight: 700; color: #fbbf24; padding: 4px 8px; }
.sc-stat {
    display: flex;
    justify-content: space-between;
    font-size: 0.82rem;
    color: #94a3b8;
    padding: 4px 0;
    border-bottom: 1px solid rgba(59, 130, 246, 0.06);
}
.sc-stat span:last-child { color: #e2e8f0; font-weight: 600; }
.sc-match { font-size: 0.82rem; color: #34d399; margin-top: 6px; }
.sc-keywords { font-size: 0.75rem; color: #64748b; margin-top: 8px; word-break: break-word; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 37: Word Cloud ‚ïê‚ïê‚ïê */
.word-cloud { padding: 14px; }
.word-cloud h4 { margin: 0 0 12px; color: #e2e8f0; font-size: 1rem; }
.wc-container {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 6px 10px;
    padding: 16px;
    background: rgba(15, 15, 30, 0.5);
    border-radius: 12px;
    border: 1px solid rgba(59, 130, 246, 0.1);
    min-height: 80px;
}
.wc-word {
    display: inline-block;
    cursor: default;
    transition: transform 0.2s;
    font-weight: 500;
}
.wc-word:hover { transform: scale(1.15); }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 39: Auto-Summary ‚ïê‚ïê‚ïê */
.auto-summary {
    background: rgba(15, 15, 30, 0.6);
    border: 1px solid rgba(59, 130, 246, 0.15);
    border-radius: 12px;
    overflow: hidden;
}
.auto-summary h4 { margin: 0 0 8px; color: #e2e8f0; font-size: 0.95rem; padding: 12px 14px 0; }
.auto-summary p { font-size: 0.82rem; color: #94a3b8; line-height: 1.5; margin: 0; padding: 0 14px; }
.as-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 14px;
    cursor: pointer;
    font-size: 0.85rem;
    color: #93c5fd;
    font-weight: 600;
}
.as-header:hover { background: rgba(59, 130, 246, 0.06); }
.as-toggle { transition: transform 0.3s; }
.auto-summary.as-collapsed .as-body { display: none; }
.auto-summary.as-collapsed .as-toggle { transform: rotate(-90deg); }
.as-body { padding: 0 14px 12px; }
.as-points { list-style: none; padding: 0; margin: 8px 0 0; }
.as-points li { font-size: 0.78rem; color: #94a3b8; padding: 3px 0; border-left: 2px solid rgba(59, 130, 246, 0.3); padding-left: 8px; margin-bottom: 4px; }

/* ‚îÄ‚îÄ IMPROVEMENT 41: Bookmarks ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.bookmarks-list { padding: 12px; }
.bookmarks-list h4 { margin: 0 0 10px; color: #e2e8f0; }
.bm-item { background: rgba(59, 130, 246, 0.08); border-left: 3px solid #3b82f6; padding: 8px 10px; margin-bottom: 8px; border-radius: 4px; }
.bm-meta { display: flex; justify-content: space-between; font-size: 0.72rem; color: #64748b; margin-bottom: 4px; }
.bm-label { background: #3b82f6; color: white; padding: 1px 6px; border-radius: 3px; font-weight: 600; }
.bm-preview { font-size: 0.8rem; color: #94a3b8; font-style: italic; margin: 4px 0; }
.bm-note { font-size: 0.78rem; color: #60a5fa; }

/* ‚îÄ‚îÄ IMPROVEMENT 42: Contradiction Report ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.contradiction-report { padding: 12px; }
.contradiction-report h4 { margin: 0 0 10px; color: #e2e8f0; }
.ctr-summary { display: flex; align-items: center; gap: 14px; margin-bottom: 12px; }
.ctr-score { width: 60px; height: 60px; border: 3px solid; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; }
.ctr-count { font-size: 1.3rem; font-weight: 700; color: #e2e8f0; }
.ctr-label { font-size: 0.6rem; color: #94a3b8; text-transform: uppercase; }
.ctr-assess { font-size: 0.85rem; color: #cbd5e1; }
.ctr-list { display: flex; flex-direction: column; gap: 8px; }
.ctr-item { background: rgba(239, 68, 68, 0.06); border-left: 3px solid rgba(239, 68, 68, 0.4); padding: 8px 10px; border-radius: 4px; }
.ctr-head { font-size: 0.82rem; font-weight: 600; color: #e2e8f0; margin-bottom: 4px; }
.ctr-sev-high { background: #ef4444; color: white; padding: 1px 5px; border-radius: 3px; font-size: 0.65rem; font-weight: 700; }
.ctr-sev-med { background: #eab308; color: #1a1a2e; padding: 1px 5px; border-radius: 3px; font-size: 0.65rem; font-weight: 700; }
.ctr-excerpts { font-size: 0.75rem; color: #94a3b8; }
.ctr-ex-a, .ctr-ex-b { padding: 2px 0; }
.ctr-corrections { margin-top: 12px; }
.ctr-corrections h5 { margin: 0 0 6px; color: #eab308; font-size: 0.82rem; }
.ctr-corr-item { font-size: 0.75rem; color: #94a3b8; padding: 3px 0; border-left: 2px solid rgba(234, 179, 8, 0.3); padding-left: 8px; margin-bottom: 4px; }

/* ‚îÄ‚îÄ IMPROVEMENT 43: Markdown Export ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.md-export { padding: 12px; }
.md-export h4 { margin: 0 0 8px; color: #e2e8f0; }
.md-export-area { width: 100%; background: #0f172a; color: #e2e8f0; border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; padding: 10px; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; resize: vertical; }

/* ‚îÄ‚îÄ IMPROVEMENT 44: Evidence Links ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.evidence-links { padding: 12px; }
.evidence-links h4 { margin: 0 0 10px; color: #e2e8f0; }
.evl-cross { margin-bottom: 12px; padding: 8px; background: rgba(59, 130, 246, 0.08); border-radius: 6px; }
.evl-cross b { color: #60a5fa; font-size: 0.8rem; display: block; margin-bottom: 6px; }
.evl-item { display: flex; align-items: center; gap: 8px; padding: 4px 0; font-size: 0.8rem; }
.evl-cross-item { background: rgba(59, 130, 246, 0.05); padding: 4px 8px; border-radius: 4px; margin-top: 4px; }
.evl-icon { font-size: 1rem; }
.evl-ref { font-weight: 600; color: #e2e8f0; }
.evl-type { background: rgba(255,255,255,0.08); padding: 1px 6px; border-radius: 3px; font-size: 0.68rem; color: #94a3b8; }
.evl-stmts { color: #64748b; font-size: 0.72rem; margin-left: auto; }
.evl-count { color: #60a5fa; font-size: 0.72rem; margin-left: auto; }

/* ‚îÄ‚îÄ IMPROVEMENT 46: Statement Diff ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.stmt-diff { padding: 12px; }
.stmt-diff h4 { margin: 0 0 10px; color: #e2e8f0; }
.sd-pair { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px; }
.sd-card { background: rgba(255,255,255,0.03); border-radius: 6px; padding: 8px 10px; font-size: 0.78rem; }
.sd-card b { color: #e2e8f0; font-size: 0.75rem; display: block; margin-bottom: 4px; }
.sd-card p { color: #94a3b8; margin: 0; line-height: 1.4; }
.sd-card-a { border-left: 3px solid #ef4444; }
.sd-card-b { border-left: 3px solid #22c55e; }
.sd-stats { display: flex; align-items: center; gap: 14px; margin-bottom: 8px; }
.sd-sim { font-size: 1rem; font-weight: 700; }
.sd-changes { display: flex; gap: 10px; font-size: 0.78rem; }
.sd-added { color: #22c55e; }
.sd-removed { color: #ef4444; }
.sd-words-added, .sd-words-removed { font-size: 0.75rem; margin-bottom: 4px; }
.sd-words-added b { color: #22c55e; }
.sd-words-removed b { color: #ef4444; }
.sd-w-add { background: rgba(34, 197, 94, 0.15); padding: 1px 4px; border-radius: 3px; color: #22c55e; }
.sd-w-rem { background: rgba(239, 68, 68, 0.15); padding: 1px 4px; border-radius: 3px; color: #ef4444; text-decoration: line-through; }

/* ‚îÄ‚îÄ IMPROVEMENT 47: Completeness Checker ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.completeness-check { padding: 12px; }
.completeness-check h4 { margin: 0 0 10px; color: #e2e8f0; }
.cc-score { display: flex; align-items: center; gap: 14px; margin-bottom: 14px; }
.cc-ring { width: 64px; height: 64px; border-radius: 50%; background: conic-gradient(var(--color) calc(var(--pct) * 3.6deg), rgba(255,255,255,0.05) 0); display: flex; align-items: center; justify-content: center; position: relative; }
.cc-ring::before { content: ''; position: absolute; width: 48px; height: 48px; border-radius: 50%; background: #0f172a; }
.cc-pct { position: relative; z-index: 1; font-size: 0.9rem; font-weight: 700; color: #e2e8f0; }
.cc-assess { font-size: 0.85rem; color: #cbd5e1; }
.cc-ratio { font-size: 0.72rem; color: #64748b; }
.cc-areas { display: flex; flex-direction: column; gap: 4px; }
.cc-area { display: flex; align-items: center; gap: 8px; padding: 4px 6px; border-radius: 4px; font-size: 0.78rem; }
.cc-covered { opacity: 1; }
.cc-missing { opacity: 0.5; }
.cc-icon { font-size: 1rem; width: 22px; text-align: center; }
.cc-name { flex: 1; color: #e2e8f0; }
.cc-check { font-size: 0.7rem; }
.cc-bar { flex: 0 0 80px; height: 4px; background: rgba(255,255,255,0.06); border-radius: 2px; overflow: hidden; }
.cc-fill { height: 100%; border-radius: 2px; transition: width 0.5s ease; }
.cc-suggestions { margin-top: 10px; padding: 8px 10px; background: rgba(59, 130, 246, 0.08); border-radius: 6px; }
.cc-suggestions b { color: #60a5fa; font-size: 0.82rem; }
.cc-sug { font-size: 0.78rem; color: #94a3b8; padding: 3px 0; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 49: Key Quotes ‚ïê‚ïê‚ïê */
.key-quotes-panel { background: rgba(15,23,42,0.6); border-radius: 10px; padding: 14px; }
.key-quotes-panel h4 { margin: 0 0 10px; color: #e2e8f0; font-size: 0.95rem; }
.kq-item { padding: 10px 12px; background: rgba(255,255,255,0.04); border-left: 3px solid #a78bfa; border-radius: 6px; margin-bottom: 8px; }
.kq-text { color: #cbd5e1; font-style: italic; font-size: 0.88rem; line-height: 1.5; margin-bottom: 6px; }
.kq-meta { display: flex; flex-wrap: wrap; gap: 6px; align-items: center; }
.kq-tag { font-size: 0.7rem; padding: 2px 7px; background: rgba(167,139,250,0.15); color: #c4b5fd; border-radius: 10px; }
.kq-importance { font-size: 0.75rem; margin-left: auto; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 50: Cooperation Score ‚ïê‚ïê‚ïê */
.cooperation-panel { background: rgba(15,23,42,0.6); border-radius: 10px; padding: 14px; }
.cooperation-panel h4 { margin: 0 0 10px; color: #e2e8f0; font-size: 0.95rem; }
.coop-score-row { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
.coop-gauge { flex: 1; height: 10px; background: rgba(255,255,255,0.06); border-radius: 5px; overflow: hidden; }
.coop-fill { height: 100%; border-radius: 5px; transition: width 0.6s ease; }
.coop-val { font-weight: 700; font-size: 1.1rem; min-width: 60px; text-align: right; }
.coop-level { text-align: center; font-weight: 600; font-size: 0.9rem; color: #e2e8f0; margin-bottom: 6px; letter-spacing: 0.5px; }
.coop-assessment { color: #94a3b8; font-size: 0.82rem; text-align: center; margin-bottom: 10px; }
.coop-indicators { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; }
.coop-ind { display: flex; justify-content: space-between; padding: 5px 8px; background: rgba(255,255,255,0.03); border-radius: 5px; font-size: 0.78rem; }
.coop-ind span { color: #94a3b8; }
.coop-ind b { color: #e2e8f0; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 51: Annotations ‚ïê‚ïê‚ïê */
.annotations-panel { background: rgba(15,23,42,0.6); border-radius: 10px; padding: 14px; }
.annotations-panel h4 { margin: 0 0 10px; color: #e2e8f0; font-size: 0.95rem; }
.ann-item { padding: 8px 10px; background: rgba(251,191,36,0.06); border-left: 3px solid #fbbf24; border-radius: 6px; margin-bottom: 6px; }
.ann-text { color: #cbd5e1; font-size: 0.85rem; margin-bottom: 4px; }
.ann-meta { display: flex; gap: 12px; font-size: 0.72rem; color: #64748b; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 52: Cross-Session Search ‚ïê‚ïê‚ïê */
.search-all-panel { background: rgba(15,23,42,0.6); border-radius: 10px; padding: 14px; }
.search-all-panel h4 { margin: 0 0 10px; color: #e2e8f0; font-size: 0.95rem; }
.sa-result { padding: 10px; background: rgba(255,255,255,0.03); border-radius: 6px; margin-bottom: 8px; }
.sa-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; color: #e2e8f0; font-size: 0.88rem; }
.sa-count { font-size: 0.72rem; padding: 2px 8px; background: rgba(59,130,246,0.15); color: #60a5fa; border-radius: 10px; }
.sa-snippet { font-size: 0.82rem; color: #94a3b8; padding: 4px 8px; margin-top: 4px; background: rgba(255,255,255,0.02); border-radius: 4px; line-height: 1.4; }
.sa-snippet mark { background: rgba(250,204,21,0.3); color: #fef08a; border-radius: 2px; padding: 0 2px; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 53: Highlights ‚ïê‚ïê‚ïê */
.highlights-panel { background: rgba(15,23,42,0.6); border-radius: 10px; padding: 14px; }
.highlights-panel h4 { margin: 0 0 10px; color: #e2e8f0; font-size: 0.95rem; }
.hl-item { padding: 10px 12px; background: rgba(255,255,255,0.04); border-radius: 8px; margin-bottom: 8px; position: relative; }
.hl-bar { height: 4px; background: rgba(255,255,255,0.06); border-radius: 2px; overflow: hidden; margin-bottom: 8px; }
.hl-fill { height: 100%; background: linear-gradient(90deg, #f59e0b, #ef4444); border-radius: 2px; transition: width 0.5s ease; }
.hl-text { color: #cbd5e1; font-style: italic; font-size: 0.85rem; line-height: 1.5; margin-bottom: 6px; }
.hl-meta { display: flex; flex-wrap: wrap; gap: 6px; align-items: center; }
.hl-tag { font-size: 0.7rem; padding: 2px 7px; background: rgba(245,158,11,0.12); color: #fbbf24; border-radius: 10px; }
.hl-words { font-size: 0.7rem; color: #64748b; margin-left: auto; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 56: Outline Generator ‚ïê‚ïê‚ïê */
.outline-panel { background: rgba(15,23,42,0.6); border-radius: 10px; padding: 14px; }
.outline-panel h4 { margin: 0 0 10px; color: #e2e8f0; font-size: 0.95rem; }
.outline-topics { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 12px; }
.ol-topic-badge { font-size: 0.72rem; padding: 3px 10px; background: rgba(99,102,241,0.12); color: #818cf8; border-radius: 12px; text-transform: capitalize; }
.ol-section { display: flex; gap: 10px; padding: 8px 10px; background: rgba(255,255,255,0.03); border-radius: 6px; margin-bottom: 6px; align-items: flex-start; }
.ol-num { flex: 0 0 28px; height: 28px; display: flex; align-items: center; justify-content: center; background: rgba(99,102,241,0.15); color: #818cf8; border-radius: 6px; font-size: 0.78rem; font-weight: 700; }
.ol-body { flex: 1; min-width: 0; }
.ol-header { display: flex; align-items: center; gap: 6px; font-size: 0.82rem; color: #e2e8f0; margin-bottom: 4px; }
.ol-topics-text { text-transform: capitalize; color: #94a3b8; font-size: 0.78rem; }
.ol-wc { margin-left: auto; font-size: 0.7rem; color: #64748b; }
.ol-preview { color: #94a3b8; font-size: 0.8rem; line-height: 1.4; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 57: Reliability Timeline ‚ïê‚ïê‚ïê */
.reliability-panel { background: rgba(15,23,42,0.6); border-radius: 10px; padding: 14px; }
.reliability-panel h4 { margin: 0 0 12px; color: #e2e8f0; font-size: 0.95rem; }
.rel-chart { display: flex; align-items: flex-end; gap: 3px; padding: 10px 4px; background: rgba(255,255,255,0.02); border-radius: 8px; min-height: 70px; }
.rel-bar-wrap { display: flex; flex-direction: column; align-items: center; flex: 1; min-width: 12px; }
.rel-bar { width: 100%; max-width: 24px; border-radius: 3px 3px 0 0; transition: height 0.4s ease; }
.rel-label { font-size: 0.6rem; color: #64748b; margin-top: 3px; }
.rel-legend { display: flex; gap: 14px; justify-content: center; margin-top: 10px; }
.rel-leg-item { display: flex; align-items: center; gap: 5px; font-size: 0.72rem; color: #94a3b8; }
.rel-dot { width: 8px; height: 8px; border-radius: 50%; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 58: PII Redaction ‚ïê‚ïê‚ïê */
.redact-panel { background: rgba(15,23,42,0.6); border-radius: 10px; padding: 14px; }
.redact-panel h4 { margin: 0 0 10px; color: #e2e8f0; font-size: 0.95rem; }
.redact-severity { display: flex; gap: 8px; margin-bottom: 12px; }
.redact-sev-badge { font-size: 0.72rem; padding: 3px 10px; border-radius: 12px; font-weight: 600; }
.redact-crit { background: rgba(239,68,68,0.15); color: #f87171; }
.redact-high { background: rgba(245,158,11,0.15); color: #fbbf24; }
.redact-med { background: rgba(59,130,246,0.15); color: #60a5fa; }
.redact-stmt { padding: 10px; background: rgba(255,255,255,0.03); border-radius: 6px; margin-bottom: 8px; }
.redact-stmt-header { font-size: 0.82rem; color: #e2e8f0; font-weight: 600; margin-bottom: 6px; }
.redact-item { padding: 4px 8px; border-radius: 4px; margin-bottom: 4px; font-size: 0.8rem; color: #cbd5e1; border-left: 3px solid transparent; }
.redact-item.redact-crit { border-left-color: #ef4444; background: rgba(239,68,68,0.06); }
.redact-item.redact-high { border-left-color: #f59e0b; background: rgba(245,158,11,0.06); }
.redact-item.redact-med { border-left-color: #3b82f6; background: rgba(59,130,246,0.06); }
.redact-item code { background: rgba(255,255,255,0.08); padding: 1px 5px; border-radius: 3px; font-size: 0.78rem; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 59: Question Analyzer ‚ïê‚ïê‚ïê */
.questions-panel { background: rgba(15,23,42,0.6); border-radius: 10px; padding: 14px; }
.questions-panel h4 { margin: 0 0 10px; color: #e2e8f0; font-size: 0.95rem; }
.qa-types { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 12px; }
.qa-type-badge { font-size: 0.72rem; padding: 3px 10px; background: rgba(168,85,247,0.12); color: #c084fc; border-radius: 12px; text-transform: capitalize; }
.qa-item { display: flex; align-items: flex-start; gap: 8px; padding: 6px 8px; background: rgba(255,255,255,0.03); border-radius: 6px; margin-bottom: 4px; }
.qa-icon { flex: 0 0 20px; font-size: 0.9rem; }
.qa-text { flex: 1; color: #cbd5e1; font-size: 0.82rem; line-height: 1.4; }
.qa-meta { flex: 0 0 auto; font-size: 0.68rem; padding: 2px 7px; background: rgba(255,255,255,0.06); color: #94a3b8; border-radius: 10px; text-transform: capitalize; }
.qa-more { text-align: center; color: #64748b; font-size: 0.78rem; margin-top: 6px; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 60: Session Pinning ‚ïê‚ïê‚ïê */
.pins-panel { background: rgba(15,23,42,0.6); border-radius: 10px; padding: 14px; }
.pins-panel h4 { margin: 0 0 10px; color: #e2e8f0; font-size: 0.95rem; }
.pin-item { padding: 10px 12px; background: rgba(255,255,255,0.04); border-left: 3px solid #f59e0b; border-radius: 6px; margin-bottom: 6px; cursor: pointer; transition: background 0.2s; }
.pin-item:hover { background: rgba(255,255,255,0.08); }
.pin-title { color: #e2e8f0; font-size: 0.88rem; font-weight: 600; }
.pin-meta { color: #64748b; font-size: 0.72rem; margin-top: 3px; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 62: Summary Card ‚ïê‚ïê‚ïê */
.summary-card { background: linear-gradient(135deg, rgba(15,23,42,0.8), rgba(30,41,59,0.8)); border-radius: 12px; padding: 16px; border: 1px solid rgba(99,102,241,0.2); }
.sc-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.sc-title { color: #e2e8f0; font-size: 1.05rem; font-weight: 700; }
.sc-status { font-size: 0.7rem; padding: 3px 10px; border-radius: 12px; text-transform: uppercase; font-weight: 600; }
.sc-status-active { background: rgba(34,197,94,0.15); color: #4ade80; }
.sc-status-completed { background: rgba(59,130,246,0.15); color: #60a5fa; }
.sc-status-unknown, .sc-status- { background: rgba(148,163,184,0.15); color: #94a3b8; }
.sc-opener { color: #94a3b8; font-style: italic; font-size: 0.82rem; line-height: 1.5; margin-bottom: 12px; padding: 8px 12px; background: rgba(255,255,255,0.03); border-radius: 6px; border-left: 3px solid #6366f1; }
.sc-stats { display: flex; gap: 12px; margin-bottom: 12px; }
.sc-stat { flex: 1; text-align: center; padding: 8px 6px; background: rgba(255,255,255,0.04); border-radius: 8px; }
.sc-stat-num { display: block; font-size: 1.2rem; font-weight: 700; color: #e2e8f0; }
.sc-stat-label { display: block; font-size: 0.68rem; color: #64748b; text-transform: capitalize; margin-top: 2px; }
.sc-section { color: #94a3b8; font-size: 0.8rem; padding: 4px 0; line-height: 1.5; }
.sc-section b { color: #e2e8f0; }
.sc-footer { margin-top: 10px; padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.06); color: #475569; font-size: 0.7rem; text-align: center; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 63: Statement Gap Detector ‚ïê‚ïê‚ïê */
.gaps-panel { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.gaps-header { font-size: 1.05rem; margin-bottom: 10px; color: var(--text-primary, #e0e0e0); }
.gaps-severity { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 12px; }
.gaps-sev-badge { padding: 3px 10px; border-radius: 12px; font-size: 0.82rem; background: rgba(255,255,255,0.07); }
.gaps-sev-critical { border-left: 3px solid #ff4444; }
.gaps-sev-high { border-left: 3px solid #ff8800; }
.gaps-sev-medium { border-left: 3px solid #ffcc00; }
.gaps-sev-low { border-left: 3px solid #44cc44; }
.gap-item { padding: 10px 12px; margin: 6px 0; border-radius: 8px; background: rgba(255,255,255,0.04); border-left: 3px solid #666; }
.gap-item.gap-critical { border-left-color: #ff4444; }
.gap-item.gap-high { border-left-color: #ff8800; }
.gap-item.gap-medium { border-left-color: #ffcc00; }
.gap-item.gap-low { border-left-color: #44cc44; }
.gap-type { font-size: 0.95rem; margin-bottom: 4px; text-transform: capitalize; }
.gap-sev { font-size: 0.75rem; opacity: 0.6; margin-left: 6px; }
.gap-context { font-style: italic; color: var(--text-secondary, #aaa); font-size: 0.88rem; padding: 4px 0; }
.gap-meta { font-size: 0.78rem; opacity: 0.5; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 64: Comparison Matrix ‚ïê‚ïê‚ïê */
.matrix-panel { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.matrix-header { font-size: 1.05rem; margin-bottom: 12px; }
.matrix-table { width: 100%; border-collapse: collapse; margin: 8px 0; }
.matrix-table th, .matrix-table td { padding: 8px 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.08); font-size: 0.9rem; }
.matrix-table th { background: rgba(255,255,255,0.06); font-weight: 600; }
.matrix-table tr:hover { background: rgba(255,255,255,0.03); }
.matrix-overlap { margin-top: 12px; padding: 10px; background: rgba(100,149,237,0.1); border-radius: 8px; font-size: 0.9rem; }
.matrix-tip { margin-top: 8px; font-size: 0.82rem; opacity: 0.6; font-style: italic; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 65: Legal Glossary ‚ïê‚ïê‚ïê */
.glossary-panel { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.glossary-header { font-size: 1.05rem; margin-bottom: 12px; color: var(--text-primary, #e0e0e0); }
.glossary-item { padding: 8px 12px; margin: 5px 0; border-radius: 8px; background: rgba(255,255,255,0.04); border-left: 3px solid #6C63FF; }
.glossary-term { font-size: 0.95rem; text-transform: capitalize; }
.glossary-count { font-size: 0.78rem; opacity: 0.55; margin-left: 4px; }
.glossary-def { font-size: 0.85rem; color: var(--text-secondary, #aaa); margin-top: 3px; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 66: Complexity Score ‚ïê‚ïê‚ïê */
.complexity-panel { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.complexity-header { font-size: 1.05rem; margin-bottom: 12px; }
.complexity-score { display: flex; align-items: center; gap: 16px; margin-bottom: 14px; }
.complexity-num { font-size: 2.2rem; font-weight: 700; color: #6C63FF; line-height: 1; }
.complexity-level { font-size: 1rem; text-transform: capitalize; opacity: 0.8; }
.complexity-metrics { display: flex; flex-direction: column; gap: 6px; }
.cm-row { display: flex; justify-content: space-between; padding: 6px 10px; background: rgba(255,255,255,0.04); border-radius: 6px; font-size: 0.88rem; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 69: Emotional Arc ‚ïê‚ïê‚ïê */
.arc-panel { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.arc-header { font-size: 1.05rem; margin-bottom: 12px; }
.arc-visual { display: flex; align-items: flex-end; gap: 3px; height: 80px; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 12px; }
.arc-bar { min-width: 14px; background: linear-gradient(to top, #6C63FF, #a78bfa); border-radius: 4px 4px 0 0; display: flex; align-items: flex-start; justify-content: center; transition: height 0.3s; cursor: pointer; }
.arc-bar:hover { opacity: 0.8; }
.arc-bar-icon { font-size: 0.7rem; margin-top: 2px; }
.arc-totals { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 10px; }
.arc-emo-tag { padding: 3px 8px; background: rgba(255,255,255,0.06); border-radius: 10px; font-size: 0.82rem; }
.arc-shifts { font-size: 0.85rem; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 8px; margin-bottom: 8px; }
.arc-shift { font-size: 0.82rem; margin: 2px 0; }
.arc-meta { font-size: 0.78rem; opacity: 0.5; text-align: right; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 72: Response Patterns ‚ïê‚ïê‚ïê */
.patterns-panel { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.patterns-header { font-size: 1.05rem; margin-bottom: 12px; color: var(--text-primary, #e0e0e0); }
.patterns-score { display: flex; align-items: center; gap: 12px; padding: 10px 14px; background: rgba(255,255,255,0.04); border-radius: 8px; margin-bottom: 12px; }
.patterns-num { font-size: 2rem; font-weight: 700; line-height: 1; }
.patterns-level { font-size: 0.95rem; text-transform: uppercase; font-weight: 600; }
.patterns-meta { font-size: 0.82rem; opacity: 0.5; margin-left: auto; }
.patterns-summary { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; }
.pat-tag { padding: 4px 10px; background: rgba(108,99,255,0.15); border-radius: 10px; font-size: 0.85rem; }
.patterns-list { display: flex; flex-direction: column; gap: 6px; }
.pat-item { padding: 8px 12px; background: rgba(255,255,255,0.03); border-radius: 8px; font-size: 0.88rem; }
.pat-preview { font-size: 0.8rem; opacity: 0.55; margin-top: 3px; font-style: italic; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 73: Power Phrases ‚ïê‚ïê‚ïê */
.power-panel { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.power-header { font-size: 1.05rem; margin-bottom: 12px; color: var(--text-primary, #e0e0e0); }
.power-cats { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; }
.power-cat-tag { padding: 4px 10px; background: rgba(255,200,0,0.12); border-radius: 10px; font-size: 0.85rem; }
.power-list { display: flex; flex-direction: column; gap: 6px; }
.power-item { padding: 8px 12px; background: rgba(255,255,255,0.03); border-radius: 8px; font-size: 0.88rem; display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.power-icon { font-size: 1.1rem; }
.power-cat { font-size: 0.78rem; text-transform: uppercase; color: #6C63FF; font-weight: 600; }
.power-excerpt { font-style: italic; opacity: 0.85; flex: 1; min-width: 150px; }
.power-stmt { font-size: 0.75rem; opacity: 0.45; }
.power-empty { padding: 12px; text-align: center; opacity: 0.5; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 74: Prep Checklist ‚ïê‚ïê‚ïê */
.prep-panel { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.prep-header { font-size: 1.05rem; margin-bottom: 12px; color: var(--text-primary, #e0e0e0); }
.prep-score { display: flex; align-items: center; gap: 12px; margin-bottom: 8px; }
.prep-num { font-size: 2.2rem; font-weight: 700; color: #6C63FF; line-height: 1; }
.prep-label { font-size: 0.9rem; opacity: 0.6; }
.prep-rec { font-size: 0.85rem; margin-left: auto; padding: 3px 10px; background: rgba(108,99,255,0.15); border-radius: 8px; }
.prep-bar { height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; margin-bottom: 14px; overflow: hidden; }
.prep-fill { height: 100%; border-radius: 3px; transition: width 0.5s; }
.prep-items { display: flex; flex-direction: column; gap: 5px; margin-bottom: 10px; }
.prep-item { padding: 8px 12px; background: rgba(255,255,255,0.03); border-radius: 8px; font-size: 0.88rem; display: flex; align-items: center; gap: 8px; }
.prep-icon { font-size: 1.1rem; }
.prep-status { margin-left: auto; font-size: 0.8rem; font-weight: 600; }
.prep-counts { font-size: 0.78rem; opacity: 0.5; text-align: right; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 75: Corroboration ‚ïê‚ïê‚ïê */
.corrob-panel { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.corrob-header { font-size: 1.05rem; margin-bottom: 8px; color: var(--text-primary, #e0e0e0); }
.corrob-meta { font-size: 0.82rem; opacity: 0.5; margin-bottom: 12px; }
.corrob-list { display: flex; flex-direction: column; gap: 8px; }
.corrob-item { padding: 10px 12px; background: rgba(255,255,255,0.04); border-radius: 8px; border-left: 3px solid #6C63FF; }
.corrob-strength { font-size: 0.9rem; font-weight: 600; margin-bottom: 4px; }
.corrob-source { font-size: 0.85rem; opacity: 0.8; }
.corrob-match { font-size: 0.82rem; opacity: 0.6; margin-top: 2px; }
.corrob-entities { font-size: 0.78rem; color: #6C63FF; margin-top: 3px; }
.corrob-empty { padding: 12px; text-align: center; opacity: 0.5; }

/* ‚ïê‚ïê‚ïê IMPROVEMENT 76: Heatmap ‚ïê‚ïê‚ïê */
.heatmap-panel { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.heatmap-header { font-size: 1.05rem; margin-bottom: 8px; color: var(--text-primary, #e0e0e0); }
.heatmap-meta { font-size: 0.82rem; opacity: 0.55; margin-bottom: 10px; }
.heatmap-visual { display: flex; align-items: flex-end; gap: 2px; height: 80px; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 10px; }
.heatmap-bar { min-width: 10px; flex: 1; border-radius: 3px 3px 0 0; transition: height 0.3s; cursor: pointer; }
.heatmap-bar:hover { opacity: 0.75; }
.heatmap-legend { display: flex; gap: 12px; font-size: 0.8rem; opacity: 0.6; margin-bottom: 10px; }
.heatmap-zones { font-size: 0.85rem; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 8px; }
.heatmap-zone { display: inline-block; padding: 2px 8px; margin: 2px; background: rgba(255,68,68,0.15); border-radius: 6px; font-size: 0.82rem; }

/* ‚îÄ‚îÄ Facts Panel ‚îÄ‚îÄ */
.facts-panel { padding: 12px; }
.facts-summary { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px; }
.fact-badge { display: inline-block; padding: 4px 10px; background: rgba(108,99,255,0.12); border-radius: 8px; font-size: 0.85rem; font-weight: 600; }
.facts-list { display: flex; flex-direction: column; gap: 4px; margin-bottom: 10px; }
.fact-item { display: flex; align-items: center; gap: 6px; padding: 4px 8px; background: rgba(255,255,255,0.03); border-radius: 6px; font-size: 0.88rem; }
.fact-icon { font-size: 1rem; }
.fact-type { text-transform: uppercase; font-size: 0.7rem; opacity: 0.5; min-width: 60px; }
.facts-events { padding: 8px; background: rgba(255,255,255,0.03); border-radius: 8px; }
.fact-event { font-size: 0.85rem; padding: 2px 0; opacity: 0.8; }

/* ‚îÄ‚îÄ Profile Panel ‚îÄ‚îÄ */
.profile-panel { padding: 12px; }
.profile-summary { font-size: 0.92rem; padding: 8px 12px; background: rgba(108,99,255,0.08); border-radius: 8px; margin-bottom: 12px; line-height: 1.5; }
.profile-meters { display: flex; flex-direction: column; gap: 8px; margin-bottom: 12px; }
.profile-meter { display: flex; align-items: center; gap: 8px; }
.pm-label { font-size: 0.82rem; min-width: 120px; opacity: 0.7; }
.pm-bar-bg { flex: 1; height: 10px; background: rgba(255,255,255,0.08); border-radius: 5px; overflow: hidden; }
.pm-bar { height: 100%; border-radius: 5px; transition: width 0.6s ease; }
.pm-value { font-size: 0.82rem; font-weight: 700; min-width: 40px; text-align: right; }
.profile-traits { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 10px; }
.profile-trait { padding: 3px 10px; background: rgba(255,255,255,0.06); border-radius: 12px; font-size: 0.82rem; }
.profile-markers { font-size: 0.82rem; opacity: 0.6; padding: 6px; }

/* ‚îÄ‚îÄ Question Score Panel ‚îÄ‚îÄ */
.qscore-panel { padding: 12px; }
.qscore-overall { text-align: center; padding: 16px; border: 2px solid; border-radius: 12px; margin-bottom: 12px; }
.qscore-number { font-size: 2.2rem; font-weight: 800; display: block; }
.qscore-label { font-size: 0.82rem; opacity: 0.5; }
.qscore-dist { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 12px; }
.qscore-type { font-size: 0.85rem; }
.qscore-section { margin-bottom: 10px; }
.qscore-item { padding: 6px 10px; margin: 4px 0; background: rgba(255,255,255,0.03); border-radius: 6px; font-size: 0.85rem; }
.qscore-item.good { border-left: 3px solid #44aa44; }
.qscore-item.weak { border-left: 3px solid #ff4444; }
.qscore-badge { float: right; font-weight: 700; font-size: 0.82rem; }
.qscore-tip { font-size: 0.82rem; padding: 4px 8px; opacity: 0.7; }

/* ‚îÄ‚îÄ Contradiction Map ‚îÄ‚îÄ */
.contradmap-panel { padding: 12px; }
.contradmap-summary { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px; align-items: center; }
.cm-badge { padding: 4px 10px; border-radius: 8px; font-size: 0.85rem; font-weight: 600; }
.cm-badge.high { background: rgba(255,68,68,0.15); }
.cm-badge.medium { background: rgba(255,136,0,0.15); }
.cm-badge.low { background: rgba(68,170,68,0.15); }
.cm-total { font-size: 0.82rem; opacity: 0.5; }
.contradmap-item { padding: 10px; margin-bottom: 8px; background: rgba(255,255,255,0.03); border-radius: 8px; }
.cm-pair { font-size: 0.88rem; margin-bottom: 4px; }
.cm-sev { float: right; font-weight: 700; font-size: 0.82rem; }
.cm-text { font-size: 0.82rem; opacity: 0.7; padding: 2px 0; font-style: italic; }
.cm-vs { text-align: center; font-size: 0.75rem; opacity: 0.4; }
.cm-conflicts { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 6px; }
.cm-conflict { padding: 2px 8px; background: rgba(255,68,68,0.1); border-radius: 6px; font-size: 0.78rem; }
.contradmap-empty { text-align: center; padding: 20px; opacity: 0.5; }

/* ‚îÄ‚îÄ Entity Network ‚îÄ‚îÄ */
.entities-panel { padding: 12px; }
.entities-summary { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px; }
.ent-badge { padding: 4px 10px; border-radius: 8px; font-size: 0.85rem; font-weight: 600; }
.ent-badge.person { background: rgba(108,99,255,0.12); }
.ent-badge.location { background: rgba(68,170,68,0.12); }
.ent-badge.org { background: rgba(255,136,0,0.12); }
.ent-badge.date { background: rgba(68,136,255,0.12); }
.entities-list { display: flex; flex-direction: column; gap: 4px; margin-bottom: 10px; }
.entity-item { display: flex; align-items: center; gap: 6px; padding: 4px 8px; background: rgba(255,255,255,0.03); border-radius: 6px; font-size: 0.88rem; }
.entity-item.person { border-left: 3px solid #6c63ff; }
.entity-item.location { border-left: 3px solid #44aa44; }
.entity-item.organization { border-left: 3px solid #ff8800; }
.entity-item.date { border-left: 3px solid #4488ff; }
.ent-icon { font-size: 1rem; }
.ent-type { font-size: 0.7rem; text-transform: uppercase; opacity: 0.4; }
.ent-count { font-size: 0.78rem; opacity: 0.5; }
.entities-connections { padding: 8px; background: rgba(255,255,255,0.03); border-radius: 8px; }
.ent-connection { font-size: 0.85rem; padding: 2px 0; }

/* ‚îÄ‚îÄ Testimony Themes ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.themes-panel { padding: 12px; }
.themes-header { display: flex; gap: 12px; align-items: center; margin-bottom: 12px; flex-wrap: wrap; }
.theme-dominant { font-size: 1rem; padding: 4px 10px; background: rgba(108,99,255,0.12); border-radius: 8px; }
.theme-count { font-size: 0.85rem; opacity: 0.5; }
.themes-list { display: flex; flex-direction: column; gap: 10px; margin-bottom: 12px; }
.theme-item { padding: 8px 10px; background: rgba(255,255,255,0.03); border-radius: 8px; border-left: 3px solid #6c63ff; }
.theme-name { font-weight: 600; font-size: 0.95rem; margin-bottom: 4px; }
.theme-bar-wrap { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; }
.theme-bar { height: 6px; background: linear-gradient(90deg, #6c63ff, #a78bfa); border-radius: 3px; min-width: 4px; transition: width 0.3s; }
.theme-mentions { font-size: 0.78rem; opacity: 0.5; white-space: nowrap; }
.theme-keywords { display: flex; flex-wrap: wrap; gap: 4px; }
.theme-kw { font-size: 0.75rem; padding: 2px 6px; background: rgba(108,99,255,0.08); border-radius: 4px; }
.themes-words { margin-top: 10px; }
.themes-words h5 { margin: 0 0 6px; font-size: 0.9rem; }
.word-cloud-mini { display: flex; flex-wrap: wrap; gap: 6px; align-items: baseline; }
.word-cloud-mini .word-item { opacity: 0.8; }
.word-cloud-mini .word-item sup { font-size: 0.6em; opacity: 0.5; }

/* ‚îÄ‚îÄ Cross-Examination Planner ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.crossex-panel { padding: 12px; }
.crossex-summary { display: flex; gap: 12px; align-items: center; margin-bottom: 10px; flex-wrap: wrap; }
.crossex-total { font-weight: 600; }
.crossex-high { color: #ff4444; font-size: 0.85rem; }
.crossex-med { color: #ffaa00; font-size: 0.85rem; }
.crossex-strategies { display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 10px; }
.strategy-tag { font-size: 0.78rem; padding: 2px 8px; background: rgba(108,99,255,0.1); border-radius: 6px; }
.crossex-questions { display: flex; flex-direction: column; gap: 8px; }
.crossex-q { padding: 10px; background: rgba(255,255,255,0.03); border-radius: 8px; border-left: 3px solid #888; }
.crossex-q.prio-high { border-left-color: #ff4444; }
.crossex-q.prio-med { border-left-color: #ffaa00; }
.crossex-q-head { display: flex; gap: 8px; align-items: center; margin-bottom: 4px; }
.crossex-num { font-weight: 700; font-size: 0.85rem; opacity: 0.4; }
.crossex-type { font-weight: 600; font-size: 0.88rem; }
.crossex-prio { font-size: 0.72rem; padding: 1px 6px; border-radius: 4px; text-transform: uppercase; }
.crossex-prio.prio-high { background: rgba(255,68,68,0.15); color: #ff4444; }
.crossex-prio.prio-med { background: rgba(255,170,0,0.15); color: #ffaa00; }
.crossex-target { font-size: 0.85rem; opacity: 0.6; font-style: italic; margin-bottom: 4px; overflow: hidden; text-overflow: ellipsis; }
.crossex-suggest { font-size: 0.9rem; color: #6c63ff; font-weight: 500; }
.crossex-empty { opacity: 0.5; text-align: center; padding: 16px; }

/* ‚îÄ‚îÄ Witness Consistency Score ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.consistency-panel { padding: 12px; }
.consistency-score-ring { display: flex; justify-content: center; margin-bottom: 10px; }
.score-circle { width: 80px; height: 80px; border-radius: 50%; border: 4px solid; display: flex; flex-direction: column; align-items: center; justify-content: center; }
.score-value { font-size: 1.8rem; font-weight: 800; line-height: 1; }
.score-label { font-size: 0.7rem; opacity: 0.5; }
.consistency-assessment { text-align: center; font-weight: 600; font-size: 1rem; margin-bottom: 10px; }
.consistency-stats { display: flex; gap: 12px; justify-content: center; margin-bottom: 12px; font-size: 0.85rem; flex-wrap: wrap; }
.consistency-issues { display: flex; flex-direction: column; gap: 6px; }
.consistency-issue { display: flex; gap: 8px; align-items: flex-start; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 8px; }
.consistency-issue.sev-high { border-left: 3px solid #ff4444; }
.consistency-issue.sev-medium { border-left: 3px solid #ffaa00; }
.consistency-issue.sev-low { border-left: 3px solid #ff8800; }
.consistency-issue.sev-positive { border-left: 3px solid #44aa44; }
.issue-icon { font-size: 1.1rem; }
.issue-detail { font-size: 0.85rem; opacity: 0.6; }
.issue-impact { font-weight: 700; font-size: 0.85rem; margin-left: auto; white-space: nowrap; }

/* ‚îÄ‚îÄ Key Admission Tracker ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.admissions-panel { padding: 12px; }
.admissions-header { display: flex; gap: 12px; align-items: center; margin-bottom: 10px; flex-wrap: wrap; }
.admissions-total { font-weight: 600; }
.admissions-weight { font-size: 0.85rem; opacity: 0.5; }
.admissions-sig { font-weight: 600; font-size: 0.9rem; }
.admissions-cats { display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 10px; }
.admission-cat-badge { font-size: 0.78rem; padding: 3px 8px; background: rgba(108,99,255,0.1); border-radius: 6px; }
.admissions-list { display: flex; flex-direction: column; gap: 6px; }
.admission-item { display: flex; gap: 8px; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 8px; border-left: 3px solid #6c63ff; }
.admission-icon { font-size: 1.1rem; flex-shrink: 0; }
.admission-content { flex: 1; min-width: 0; }
.admission-text { font-size: 0.88rem; font-style: italic; opacity: 0.8; margin-bottom: 4px; overflow: hidden; text-overflow: ellipsis; }
.admission-meta { display: flex; gap: 8px; font-size: 0.78rem; }
.admission-type { font-weight: 600; }
.admission-wt { opacity: 0.5; }
.admissions-empty { opacity: 0.5; text-align: center; padding: 16px; }

/* ‚îÄ‚îÄ Testimony Duration Estimator ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.duration-panel { padding: 12px; }
.duration-meters { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 8px; margin-bottom: 12px; }
.duration-meter { display: flex; flex-direction: column; align-items: center; padding: 10px; background: rgba(255,255,255,0.03); border-radius: 10px; }
.dur-icon { font-size: 1.5rem; }
.dur-val { font-size: 1.3rem; font-weight: 800; color: #6c63ff; }
.dur-label { font-size: 0.75rem; opacity: 0.5; text-align: center; }
.duration-words { display: flex; flex-direction: column; gap: 4px; margin-bottom: 12px; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 8px; }
.dur-word-row { display: flex; justify-content: space-between; font-size: 0.88rem; }
.duration-segments h5 { margin: 0 0 6px; font-size: 0.9rem; }
.dur-seg { display: flex; align-items: center; gap: 6px; margin-bottom: 3px; }
.dur-seg-role { font-size: 0.9rem; }
.dur-seg-bar-wrap { flex: 1; height: 8px; background: rgba(255,255,255,0.05); border-radius: 4px; overflow: hidden; }
.dur-seg-bar { height: 100%; border-radius: 4px; transition: width 0.3s; }
.dur-seg-words { font-size: 0.75rem; opacity: 0.5; width: 40px; text-align: right; }

/* ‚îÄ‚îÄ Credibility Report ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.credibility-panel { padding: 16px; }
.credibility-panel h4 { margin: 0 0 14px; font-size: 1.1rem; }
.cred-overall { display: flex; align-items: center; gap: 16px; margin-bottom: 16px; padding: 14px; background: rgba(108,99,255,0.08); border-radius: 10px; }
.cred-score-ring { width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.2rem; background: conic-gradient(#6c63ff calc(var(--score) * 1%), rgba(255,255,255,0.08) 0); color: #fff; }
.cred-assessment { flex: 1; font-size: 0.92rem; opacity: 0.85; line-height: 1.4; }
.cred-meters { display: flex; flex-direction: column; gap: 8px; margin-bottom: 14px; }
.cred-meter { display: flex; align-items: center; gap: 8px; }
.cred-label { width: 120px; font-size: 0.85rem; }
.cred-bar-bg { flex: 1; height: 10px; background: rgba(255,255,255,0.06); border-radius: 5px; overflow: hidden; }
.cred-bar { height: 100%; border-radius: 5px; transition: width 0.4s ease; }
.cred-val { width: 30px; text-align: right; font-weight: 600; font-size: 0.85rem; }
.cred-flags, .cred-strengths { margin-bottom: 10px; }
.cred-flags h5, .cred-strengths h5 { font-size: 0.9rem; margin: 0 0 6px; }
.cred-flag { padding: 5px 10px; background: rgba(244,67,54,0.1); border-radius: 6px; margin-bottom: 4px; font-size: 0.85rem; }
.cred-strength { padding: 5px 10px; background: rgba(76,175,80,0.1); border-radius: 6px; margin-bottom: 4px; font-size: 0.85rem; }
.cred-stats { text-align: center; opacity: 0.5; font-size: 0.8rem; margin-top: 10px; }

/* ‚îÄ‚îÄ Word Cloud ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.wordcloud-panel { padding: 16px; }
.wordcloud-panel h4 { margin: 0 0 14px; font-size: 1.1rem; }
.wc-cloud { padding: 16px; background: rgba(255,255,255,0.03); border-radius: 10px; text-align: center; line-height: 2.2; margin-bottom: 14px; min-height: 100px; }
.wc-word { display: inline-block; padding: 2px 6px; cursor: default; transition: transform 0.2s; }
.wc-word:hover { transform: scale(1.15); }
.wc-categories { margin-bottom: 12px; }
.wc-categories h5 { font-size: 0.9rem; margin: 0 0 8px; }
.wc-cat { display: flex; align-items: center; gap: 8px; margin-bottom: 5px; }
.wc-cat-name { width: 80px; font-size: 0.82rem; text-transform: capitalize; }
.wc-cat-bar-bg { flex: 1; height: 8px; background: rgba(255,255,255,0.06); border-radius: 4px; overflow: hidden; }
.wc-cat-bar { height: 100%; background: #6c63ff; border-radius: 4px; }
.wc-cat-pct { width: 35px; text-align: right; font-size: 0.82rem; opacity: 0.7; }
.wc-bigrams { margin-bottom: 10px; }
.wc-bigrams h5 { font-size: 0.9rem; margin: 0 0 6px; }
.wc-bigram { display: inline-block; padding: 3px 10px; background: rgba(108,99,255,0.12); border-radius: 12px; margin: 2px 4px; font-size: 0.82rem; }
.wc-stats { text-align: center; opacity: 0.5; font-size: 0.8rem; margin-top: 8px; }

/* ‚îÄ‚îÄ Deposition Cost Calculator ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.depocost-panel { padding: 16px; }
.depocost-panel h4 { margin: 0 0 14px; font-size: 1.1rem; }
.dc-total { display: flex; justify-content: space-between; align-items: center; padding: 16px; background: linear-gradient(135deg, rgba(76,175,80,0.15), rgba(108,99,255,0.1)); border-radius: 10px; margin-bottom: 14px; }
.dc-total-label { font-size: 1rem; opacity: 0.8; }
.dc-total-val { font-size: 1.6rem; font-weight: 700; color: #4caf50; }
.dc-stats { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 14px; }
.dc-stat { padding: 6px 12px; background: rgba(255,255,255,0.05); border-radius: 8px; font-size: 0.85rem; }
.dc-breakdown { margin-bottom: 14px; }
.dc-breakdown h5 { font-size: 0.9rem; margin: 0 0 8px; }
.dc-row { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
.dc-row-label { width: 130px; font-size: 0.85rem; }
.dc-row-bar-bg { flex: 1; height: 10px; background: rgba(255,255,255,0.06); border-radius: 5px; overflow: hidden; }
.dc-row-bar { height: 100%; background: #4caf50; border-radius: 5px; transition: width 0.4s; }
.dc-row-val { width: 80px; text-align: right; font-weight: 600; font-size: 0.85rem; }
.dc-notes { margin-top: 10px; }
.dc-notes h5 { font-size: 0.9rem; margin: 0 0 6px; }
.dc-note { font-size: 0.82rem; opacity: 0.6; margin-bottom: 3px; }

/* ‚îÄ‚îÄ Readability Score ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.readability-panel { padding: 16px; }
.readability-panel h4 { margin: 0 0 14px; font-size: 1.1rem; }
.read-summary { text-align: center; padding: 14px; background: rgba(108,99,255,0.08); border-radius: 10px; margin-bottom: 14px; }
.read-level { font-size: 1.3rem; font-weight: 700; margin-bottom: 6px; }
.read-audience { font-size: 0.88rem; opacity: 0.75; margin-bottom: 4px; }
.read-grade { font-size: 0.85rem; opacity: 0.6; }
.read-scores { margin-bottom: 14px; }
.read-scores h5 { font-size: 0.9rem; margin: 0 0 8px; }
.read-score-row { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
.read-score-label { width: 160px; font-size: 0.82rem; }
.read-score-bar-bg { flex: 1; height: 10px; background: rgba(255,255,255,0.06); border-radius: 5px; overflow: hidden; }
.read-score-bar { height: 100%; border-radius: 5px; transition: width 0.4s; }
.read-score-val { min-width: 90px; text-align: right; font-size: 0.82rem; }
.read-score-val small { opacity: 0.5; }
.read-text-stats { margin-bottom: 10px; }
.read-text-stats h5 { font-size: 0.9rem; margin: 0 0 8px; }
.read-stat-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
.read-stat { text-align: center; padding: 10px 6px; background: rgba(255,255,255,0.04); border-radius: 8px; }
.read-stat .rs-val { display: block; font-size: 1.2rem; font-weight: 700; color: #6c63ff; }
.read-stat .rs-label { display: block; font-size: 0.75rem; opacity: 0.5; margin-top: 2px; }

/* ‚îÄ‚îÄ Key Dates ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.keydates-panel { padding: 16px; }
.keydates-panel h4 { margin: 0 0 14px; font-size: 1.1rem; }
.kd-summary { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 14px; }
.kd-badge { padding: 5px 12px; background: rgba(108,99,255,0.12); border-radius: 12px; font-size: 0.82rem; }
.kd-dates, .kd-times { margin-bottom: 12px; }
.kd-dates h5, .kd-times h5, .kd-seq h5 { font-size: 0.9rem; margin: 0 0 8px; }
.kd-date, .kd-time { display: flex; align-items: flex-start; gap: 8px; padding: 6px 10px; background: rgba(255,255,255,0.03); border-radius: 6px; margin-bottom: 4px; }
.kd-icon { font-size: 1rem; }
.kd-val { font-weight: 600; font-size: 0.88rem; white-space: nowrap; }
.kd-ctx { font-size: 0.78rem; opacity: 0.5; flex: 1; overflow: hidden; text-overflow: ellipsis; }
.kd-seq { margin-bottom: 10px; }
.kd-seq-list { display: flex; gap: 6px; flex-wrap: wrap; }
.kd-seq-tag { padding: 4px 10px; background: rgba(67,170,139,0.12); border-radius: 10px; font-size: 0.82rem; }

/* ‚îÄ‚îÄ Sentiment Timeline ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.sentiment-timeline-result h3 { margin: 0 0 12px; color: #7c4dff; }
.sentiment-summary { display: flex; gap: 16px; flex-wrap: wrap; margin-bottom: 12px; }
.sentiment-stat { background: rgba(124,77,255,0.1); padding: 4px 10px; border-radius: 6px; font-size: 0.9em; }
.sentiment-chart { display: flex; align-items: flex-end; gap: 3px; padding: 10px 0; min-height: 60px; border-bottom: 2px solid rgba(124,77,255,0.2); margin-bottom: 10px; }
.sentiment-bar-wrap { display: flex; flex-direction: column; align-items: center; flex: 1; }
.sentiment-bar { width: 100%; min-width: 8px; border-radius: 3px 3px 0 0; transition: height 0.3s; }
.sentiment-label { font-size: 0.65em; color: #999; margin-top: 2px; }
.sentiment-dist { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 8px; }
.mood-badge { padding: 3px 8px; border-radius: 12px; font-size: 0.85em; }
.mood-badge.mood-positive { background: rgba(76,175,80,0.15); color: #4CAF50; }
.mood-badge.mood-negative { background: rgba(244,67,54,0.15); color: #f44336; }
.mood-badge.mood-hedging { background: rgba(255,152,0,0.15); color: #FF9800; }
.mood-badge.mood-neutral { background: rgba(158,158,158,0.15); color: #9E9E9E; }

/* ‚îÄ‚îÄ Objection Analyzer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.objections-result h3 { margin: 0 0 12px; color: #5c6bc0; }
.obj-summary { display: flex; gap: 16px; flex-wrap: wrap; margin-bottom: 12px; }
.obj-stat { background: rgba(92,107,192,0.1); padding: 4px 10px; border-radius: 6px; font-size: 0.9em; }
.obj-rulings { display: flex; gap: 12px; margin-bottom: 12px; padding: 8px; background: rgba(0,0,0,0.03); border-radius: 8px; }
.ruling { padding: 3px 8px; border-radius: 6px; font-size: 0.9em; }
.ruling.sustained { color: #4CAF50; }
.ruling.overruled { color: #f44336; }
.ruling.rate { color: #FF9800; font-weight: 600; }
.obj-types { display: flex; flex-direction: column; gap: 4px; }
.obj-type-row { display: flex; justify-content: space-between; padding: 6px 10px; background: rgba(92,107,192,0.06); border-radius: 6px; text-transform: capitalize; }
.obj-type-count { font-weight: 700; color: #5c6bc0; }
.obj-none { color: #999; font-style: italic; }

/* ‚îÄ‚îÄ Impeachment Finder ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.impeach-result h3 { margin: 0 0 12px; color: #e53935; }
.impeach-summary { display: flex; gap: 16px; flex-wrap: wrap; margin-bottom: 12px; }
.impeach-stat { background: rgba(229,57,53,0.08); padding: 4px 10px; border-radius: 6px; font-size: 0.9em; }
.potential-strong { color: #e53935; font-weight: 700; }
.potential-moderate { color: #FF9800; font-weight: 600; }
.potential-weak { color: #4CAF50; }
.impeach-types { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 10px; }
.impeach-type-badge { padding: 4px 10px; border-radius: 12px; background: rgba(229,57,53,0.08); font-size: 0.85em; }
.impeach-items { display: flex; flex-direction: column; gap: 6px; }
.impeach-item { padding: 8px 10px; border-radius: 6px; background: rgba(0,0,0,0.02); border-left: 3px solid #FF9800; font-size: 0.9em; }
.impeach-item.high { border-left-color: #e53935; }
.impeach-sev { margin-right: 4px; }
.impeach-cat { font-weight: 600; text-transform: capitalize; }
.impeach-none { color: #999; font-style: italic; }

/* ‚îÄ‚îÄ Legal Citation Extractor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.citations-result h3 { margin: 0 0 12px; color: #00897b; }
.cit-summary { display: flex; gap: 16px; flex-wrap: wrap; margin-bottom: 12px; }
.cit-stat { background: rgba(0,137,123,0.1); padding: 4px 10px; border-radius: 6px; font-size: 0.9em; }
.cit-breakdown { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 10px; }
.cit-type-badge { padding: 4px 10px; border-radius: 12px; background: rgba(0,137,123,0.08); font-size: 0.85em; text-transform: capitalize; }
.cit-list { display: flex; flex-direction: column; gap: 5px; }
.cit-item { display: flex; align-items: center; gap: 10px; padding: 6px 10px; background: rgba(0,0,0,0.02); border-radius: 6px; }
.cit-type { font-size: 0.75em; text-transform: uppercase; color: #00897b; font-weight: 600; min-width: 100px; }
.cit-item code { font-size: 0.9em; color: #333; background: rgba(0,137,123,0.06); padding: 2px 6px; border-radius: 4px; }
.cit-none { color: #999; font-style: italic; }

/* ‚îÄ‚îÄ Testimony Comparison ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.compare-result h3 { margin: 0 0 12px; color: #1565c0; }
.compare-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
.compare-side { flex: 1; padding: 8px 12px; background: rgba(21,101,192,0.06); border-radius: 8px; font-size: 0.9em; }
.compare-vs { font-weight: 700; color: #1565c0; font-size: 1.1em; }
.compare-stats { display: flex; gap: 16px; flex-wrap: wrap; margin-bottom: 12px; }
.compare-stat { background: rgba(21,101,192,0.08); padding: 4px 10px; border-radius: 6px; font-size: 0.9em; }
.compare-entities { margin-bottom: 10px; }
.entity-tag { display: inline-block; padding: 2px 8px; margin: 2px; background: rgba(21,101,192,0.1); border-radius: 10px; font-size: 0.85em; }
.compare-contradictions h4 { margin: 8px 0 6px; color: #e53935; }
.contradiction-item { padding: 8px 10px; margin-bottom: 6px; border-radius: 6px; background: rgba(229,57,53,0.04); border-left: 3px solid #e53935; }
.contradiction-topic { font-weight: 600; margin-bottom: 4px; }
.contradiction-a, .contradiction-b { font-size: 0.88em; color: #555; margin: 2px 0; }

/* ‚îÄ‚îÄ Witness Stance Tracker ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.stance-result h3 { margin: 0 0 12px; color: #7b1fa2; }
.stance-summary { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 12px; }
.stance-badge { padding: 4px 12px; background: rgba(123,31,162,0.08); border-radius: 8px; font-size: 0.9em; }
.stance-distrib { display: flex; flex-direction: column; gap: 6px; margin-bottom: 12px; }
.stance-bar-item { display: flex; align-items: center; gap: 8px; }
.stance-label { min-width: 90px; font-size: 0.85em; text-transform: capitalize; font-weight: 600; }
.stance-bar-track { flex: 1; height: 16px; background: rgba(0,0,0,0.06); border-radius: 8px; overflow: hidden; }
.stance-bar-fill { height: 100%; border-radius: 8px; transition: width 0.3s ease; }
.stance-pct { min-width: 40px; text-align: right; font-size: 0.85em; font-weight: 600; }
.stance-shifts { margin-top: 10px; }
.stance-shift-item { padding: 4px 8px; margin: 3px 0; font-size: 0.88em; background: rgba(123,31,162,0.04); border-radius: 4px; }
.shift-from { color: #e53935; }
.shift-to { color: #4caf50; }

/* ‚îÄ‚îÄ Testimony Summary Bullets ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.bullets-result h3 { margin: 0 0 12px; color: #00695c; }
.bullets-stats { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 12px; }
.bullet-stat { padding: 4px 12px; background: rgba(0,105,92,0.08); border-radius: 8px; font-size: 0.9em; }
.bullets-list { display: flex; flex-direction: column; gap: 5px; margin-bottom: 10px; }
.bullet-item { display: flex; align-items: flex-start; gap: 8px; padding: 6px 10px; background: rgba(0,0,0,0.02); border-radius: 6px; border-left: 3px solid #00695c; }
.bullet-item.bullet-fact { border-left-color: #1565c0; }
.bullet-item.bullet-admission { border-left-color: #4caf50; }
.bullet-item.bullet-denial { border-left-color: #e53935; }
.bullet-icon { font-size: 0.9em; flex-shrink: 0; }
.bullet-text { flex: 1; font-size: 0.88em; }
.bullet-type-badge { font-size: 0.72em; padding: 2px 6px; border-radius: 8px; background: rgba(0,105,92,0.1); text-transform: uppercase; font-weight: 600; }
.bullets-section { margin-top: 8px; }
.key-fact-item { padding: 3px 8px; margin: 2px 0; font-size: 0.88em; background: rgba(21,101,192,0.05); border-radius: 4px; }

/* ‚îÄ‚îÄ Expert Witness Evaluator ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.expert-result h3 { margin: 0 0 12px; color: #4527a0; }
.expert-overall { display: flex; align-items: center; gap: 14px; margin-bottom: 14px; }
.expert-grade { font-size: 1.4em; font-weight: 800; padding: 6px 16px; border-radius: 10px; }
.grade-strong { background: rgba(76,175,80,0.15); color: #2e7d32; }
.grade-adequate { background: rgba(255,152,0,0.15); color: #e65100; }
.grade-weak { background: rgba(229,57,53,0.15); color: #c62828; }
.expert-score { font-size: 1.2em; font-weight: 700; }
.expert-admiss { padding: 4px 12px; border-radius: 8px; font-size: 0.9em; }
.expert-admiss.yes { background: rgba(76,175,80,0.1); color: #2e7d32; }
.expert-admiss.no { background: rgba(255,152,0,0.1); color: #e65100; }
.daubert-scores { display: flex; flex-direction: column; gap: 6px; margin-bottom: 12px; }
.daubert-row { display: flex; align-items: center; gap: 8px; }
.daubert-label { min-width: 110px; font-size: 0.85em; text-transform: capitalize; font-weight: 600; }
.daubert-bar-track { flex: 1; height: 14px; background: rgba(0,0,0,0.06); border-radius: 7px; overflow: hidden; }
.daubert-bar-fill { height: 100%; border-radius: 7px; transition: width 0.3s ease; }
.daubert-val { min-width: 40px; text-align: right; font-size: 0.85em; font-weight: 600; }
.expert-section { margin-top: 8px; }
.expert-item { padding: 3px 8px; margin: 2px 0; font-size: 0.88em; border-radius: 4px; }
.expert-item.good { background: rgba(76,175,80,0.06); }
.expert-item.warn { background: rgba(255,152,0,0.06); }

/* ‚îÄ‚îÄ Privilege Log Detector ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.priv-result h3 { margin: 0 0 12px; color: #b71c1c; }
.priv-summary { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 12px; }
.priv-stat { padding: 4px 12px; border-radius: 8px; font-size: 0.9em; background: rgba(183,28,28,0.06); }
.priv-stat.risk-critical { background: rgba(183,28,28,0.15); color: #b71c1c; }
.priv-stat.risk-elevated { background: rgba(255,152,0,0.15); color: #e65100; }
.priv-stat.risk-low { background: rgba(76,175,80,0.1); color: #2e7d32; }
.priv-stat.risk-none { background: rgba(158,158,158,0.1); color: #616161; }
.priv-types { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 10px; }
.priv-type-badge { padding: 4px 10px; border-radius: 12px; background: rgba(183,28,28,0.06); font-size: 0.85em; }
.priv-flags { display: flex; flex-direction: column; gap: 6px; margin-bottom: 10px; }
.priv-flag { padding: 8px 10px; border-radius: 6px; background: rgba(0,0,0,0.02); border-left: 3px solid #b71c1c; }
.priv-flag.sev-high { border-left-color: #c62828; background: rgba(198,40,40,0.04); }
.priv-flag.sev-medium { border-left-color: #ff9800; background: rgba(255,152,0,0.04); }
.priv-seg { font-weight: 600; margin-right: 8px; font-size: 0.85em; }
.priv-trigger { font-style: italic; color: #b71c1c; margin-right: 8px; font-size: 0.85em; }
.priv-sev { font-size: 0.72em; padding: 2px 6px; border-radius: 8px; background: rgba(183,28,28,0.1); text-transform: uppercase; font-weight: 600; }
.priv-snippet { font-size: 0.82em; color: #555; margin-top: 4px; }
.priv-rec { margin-top: 10px; padding: 8px 12px; background: rgba(183,28,28,0.06); border-radius: 6px; font-size: 0.9em; font-weight: 600; }

/* ‚îÄ‚îÄ Testimony Strength Meter ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.strength-result h3 { margin: 0 0 12px; color: #0d47a1; }
.strength-header { display: flex; align-items: center; gap: 16px; margin-bottom: 14px; }
.strength-grade { font-size: 2em; font-weight: 900; padding: 8px 20px; border-radius: 12px; background: rgba(13,71,161,0.08); }
.grade-A { color: #2e7d32; background: rgba(76,175,80,0.12); }
.grade-B { color: #1565c0; background: rgba(21,101,192,0.12); }
.grade-C { color: #e65100; background: rgba(255,152,0,0.12); }
.grade-D { color: #c62828; background: rgba(229,57,53,0.12); }
.grade-F { color: #b71c1c; background: rgba(183,28,28,0.15); }
.strength-overall { font-size: 1.4em; font-weight: 800; }
.strength-ready { padding: 4px 14px; border-radius: 8px; font-size: 0.9em; font-weight: 600; }
.strength-ready.yes { background: rgba(76,175,80,0.1); color: #2e7d32; }
.strength-ready.no { background: rgba(255,152,0,0.1); color: #e65100; }
.strength-scores { display: flex; flex-direction: column; gap: 6px; margin-bottom: 12px; }
.str-row { display: flex; align-items: center; gap: 8px; }
.str-label { min-width: 100px; font-size: 0.85em; text-transform: capitalize; font-weight: 600; }
.str-bar-track { flex: 1; height: 14px; background: rgba(0,0,0,0.06); border-radius: 7px; overflow: hidden; }
.str-bar-fill { height: 100%; border-radius: 7px; transition: width 0.3s ease; }
.str-val { min-width: 30px; text-align: right; font-size: 0.85em; font-weight: 600; }
.str-section { margin-top: 8px; }
.str-item { padding: 3px 8px; margin: 2px 0; font-size: 0.88em; border-radius: 4px; }
.str-item.good { background: rgba(76,175,80,0.06); }
.str-item.warn { background: rgba(255,152,0,0.06); }
.str-rec { margin-top: 10px; padding: 8px 12px; background: rgba(13,71,161,0.06); border-radius: 6px; font-size: 0.9em; font-weight: 600; }

/* ‚îÄ‚îÄ Behavioral Cues ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.behavior-container { background: var(--card-bg, #fff); border-radius: 12px; padding: 18px; border-left: 4px solid #9c27b0; }
.behavior-header { font-size: 1.2em; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
.behavior-icon { font-size: 1.3em; }
.behavior-summary { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 14px; }
.behavior-stat { padding: 4px 12px; background: rgba(0,0,0,0.04); border-radius: 6px; font-size: 0.9em; }
.impact-low { color: #2e7d32; }
.impact-moderate { color: #e65100; }
.impact-high { color: #c62828; font-weight: 700; }
.behavior-totals { display: flex; flex-direction: column; gap: 6px; margin-bottom: 14px; }
.behavior-type-bar { display: flex; align-items: center; gap: 8px; font-size: 0.88em; }
.behavior-type-bar span:first-child { min-width: 140px; text-transform: capitalize; }
.beh-bar-track { flex: 1; height: 12px; background: rgba(0,0,0,0.06); border-radius: 6px; overflow: hidden; }
.beh-bar-fill { height: 100%; border-radius: 6px; transition: width 0.3s ease; }
.beh-count { min-width: 28px; text-align: right; font-weight: 600; }
.behavior-details { display: flex; flex-direction: column; gap: 8px; }
.behavior-cue-item { padding: 8px 10px; background: rgba(0,0,0,0.02); border-radius: 6px; }
.beh-seg { font-weight: 600; font-size: 0.8em; color: #666; margin-right: 8px; }
.beh-tag { display: inline-block; padding: 2px 8px; border-radius: 10px; font-size: 0.78em; margin: 2px; font-weight: 500; }
.beh-hesitation { background: rgba(255,152,0,0.12); color: #e65100; }
.beh-evasion { background: rgba(229,57,53,0.12); color: #c62828; }
.beh-confidence { background: rgba(76,175,80,0.12); color: #2e7d32; }
.beh-deception_indicator { background: rgba(198,40,40,0.15); color: #b71c1c; }
.beh-preview { font-size: 0.82em; color: #888; margin-top: 4px; font-style: italic; }

/* ‚îÄ‚îÄ Case Brief ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.brief-container { background: var(--card-bg, #fff); border-radius: 12px; padding: 18px; border-left: 4px solid #1565c0; }
.brief-header { font-size: 1.2em; font-weight: 700; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
.brief-icon { font-size: 1.3em; }
.brief-meta { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 14px; font-size: 0.88em; color: #666; }
.brief-complexity { padding: 2px 10px; border-radius: 8px; font-weight: 600; text-transform: uppercase; font-size: 0.82em; }
.brief-detailed { background: rgba(21,101,192,0.1); color: #1565c0; }
.brief-moderate { background: rgba(255,152,0,0.1); color: #e65100; }
.brief-brief { background: rgba(120,144,156,0.1); color: #546e7a; }
.brief-section { margin-bottom: 14px; }
.brief-section h4 { margin: 0 0 6px; font-size: 0.95em; }
.brief-section p { margin: 0; font-size: 0.9em; line-height: 1.5; }
.brief-fact { padding: 5px 10px; margin: 3px 0; background: rgba(0,0,0,0.02); border-radius: 4px; font-size: 0.88em; display: flex; gap: 8px; }
.brief-num { font-weight: 700; color: #1565c0; min-width: 20px; }
.brief-tags { display: flex; flex-wrap: wrap; gap: 6px; }
.brief-party { padding: 3px 10px; background: rgba(21,101,192,0.08); border-radius: 10px; font-size: 0.82em; color: #1565c0; }
.brief-time { padding: 3px 10px; background: rgba(255,152,0,0.08); border-radius: 10px; font-size: 0.82em; color: #e65100; }
.brief-footer { font-size: 0.82em; color: #888; margin-top: 10px; padding-top: 8px; border-top: 1px solid rgba(0,0,0,0.06); }

/* ‚îÄ‚îÄ Pacing Analysis ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.pacing-container { background: var(--card-bg, #fff); border-radius: 12px; padding: 18px; border-left: 4px solid #ff9800; }
.pacing-header { font-size: 1.2em; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
.pacing-icon { font-size: 1.3em; }
.pacing-summary { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 14px; }
.pacing-stat { display: flex; flex-direction: column; align-items: center; padding: 8px 14px; background: rgba(0,0,0,0.03); border-radius: 8px; min-width: 70px; }
.pacing-val { font-size: 1.3em; font-weight: 800; }
.pacing-label { font-size: 0.75em; color: #888; text-transform: uppercase; }
.pace-verbose { color: #1565c0; }
.pace-balanced { color: #ff9800; }
.pace-terse { color: #e53935; }
.pacing-chart { display: flex; align-items: flex-end; gap: 3px; height: 80px; margin-bottom: 8px; padding: 0 4px; }
.pacing-bar { min-width: 8px; flex: 1; border-radius: 3px 3px 0 0; transition: height 0.3s ease; cursor: help; }
.pacing-legend { display: flex; gap: 14px; font-size: 0.82em; justify-content: center; }
.pacing-leg-item { font-weight: 600; }

/* ‚îÄ‚îÄ Narrative Arc ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.narrative-container { background: var(--card-bg, #fff); border-radius: 12px; padding: 18px; border-left: 4px solid #e53935; }
.narrative-header { font-size: 1.2em; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
.narrative-icon { font-size: 1.3em; }
.narrative-meta { display: flex; gap: 14px; flex-wrap: wrap; margin-bottom: 14px; font-size: 0.9em; }
.narrative-phases { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 14px; }
.narrative-phase { display: flex; align-items: center; gap: 6px; padding: 4px 10px; background: rgba(0,0,0,0.03); border-radius: 6px; font-size: 0.88em; }
.narr-phase-icon { font-size: 1.1em; }
.narr-phase-name { text-transform: capitalize; }
.narr-phase-count { padding: 2px 8px; border-radius: 8px; color: #fff; font-size: 0.8em; font-weight: 600; min-width: 20px; text-align: center; }
.narrative-arc-chart { display: flex; align-items: flex-end; gap: 3px; height: 70px; margin-bottom: 10px; }
.narr-bar { min-width: 8px; flex: 1; border-radius: 3px 3px 0 0; transition: height 0.3s ease; cursor: help; }
.narrative-turns { font-size: 0.88em; margin-top: 8px; }
.narr-turn { display: inline-block; padding: 2px 8px; margin: 2px; background: rgba(0,0,0,0.04); border-radius: 6px; font-weight: 500; }

/* ‚îÄ‚îÄ Credibility Comparison ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.credcomp-container { background: var(--card-bg, #fff); border-radius: 12px; padding: 18px; border-left: 4px solid #2e7d32; }
.credcomp-header { font-size: 1.2em; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
.credcomp-icon { font-size: 1.3em; }
.credcomp-sessions { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 14px; }
.credcomp-session { padding: 12px; background: rgba(0,0,0,0.02); border-radius: 8px; }
.credcomp-label { font-size: 0.78em; text-transform: uppercase; color: #888; font-weight: 600; }
.credcomp-title { font-weight: 600; margin: 4px 0 8px; font-size: 0.95em; }
.credcomp-overall { font-size: 2em; font-weight: 800; color: #1565c0; margin-bottom: 8px; }
.credcomp-overall span { font-size: 0.4em; color: #888; }
.credcomp-metric { display: flex; align-items: center; gap: 6px; margin: 4px 0; font-size: 0.85em; }
.credcomp-metric-name { min-width: 80px; text-transform: capitalize; }
.credcomp-bar-track { flex: 1; height: 10px; background: rgba(0,0,0,0.06); border-radius: 5px; overflow: hidden; }
.credcomp-bar-fill { height: 100%; border-radius: 5px; transition: width 0.3s ease; }
.credcomp-metric-val { min-width: 24px; text-align: right; font-weight: 600; font-size: 0.88em; }
.credcomp-verdict { margin-top: 10px; padding: 10px 14px; background: rgba(46,125,50,0.06); border-radius: 8px; font-size: 0.95em; }

/* ‚îÄ‚îÄ Oath Analysis ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.oath-container { background: var(--card-bg, #fff); border-radius: 12px; padding: 18px; border-left: 4px solid #5e35b1; }
.oath-header { font-size: 1.2em; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
.oath-icon { font-size: 1.3em; }
.oath-status { padding: 10px 16px; border-radius: 8px; font-weight: 600; text-align: center; margin-bottom: 14px; }
.oath-status.oath-found { background: rgba(76,175,80,0.1); color: #2e7d32; }
.oath-status.oath-missing { background: rgba(255,152,0,0.1); color: #e65100; }
.oath-metrics { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 14px; }
.oath-metric { flex: 1; min-width: 100px; text-align: center; padding: 10px; background: rgba(94,53,177,0.04); border-radius: 8px; }
.oath-val { display: block; font-size: 1.4em; font-weight: 800; color: #5e35b1; }
.oath-label { font-size: 0.78em; color: #888; }
.oath-val.oath-conf-high { color: #2e7d32; }
.oath-val.oath-conf-moderate { color: #ff6f00; }
.oath-val.oath-conf-low { color: #c62828; }
.oath-val.oath-risk-elevated { color: #c62828; }
.oath-val.oath-risk-moderate { color: #ff6f00; }
.oath-val.oath-risk-low { color: #2e7d32; }
.oath-ratio-section { margin-bottom: 12px; }
.oath-ratio-row { display: flex; align-items: center; gap: 8px; margin: 6px 0; font-size: 0.88em; }
.oath-ratio-row span:first-child { min-width: 120px; }
.oath-ratio-track { flex: 1; height: 10px; background: rgba(0,0,0,0.06); border-radius: 5px; overflow: hidden; }
.oath-ratio-fill { height: 100%; border-radius: 5px; transition: width 0.3s ease; }
.oath-detail-section { margin-top: 12px; }
.oath-detail-section h4 { font-size: 0.95em; margin-bottom: 8px; }
.oath-item { display: flex; flex-wrap: wrap; gap: 6px; padding: 6px 10px; margin: 4px 0; border-radius: 6px; font-size: 0.88em; align-items: center; }
.oath-item.qual { background: rgba(255,152,0,0.06); }
.oath-item.cert { background: rgba(76,175,80,0.06); }
.oath-seg { font-weight: 600; color: #5e35b1; min-width: 50px; }
.oath-marker { padding: 2px 8px; border-radius: 4px; background: rgba(0,0,0,0.06); font-weight: 500; }
.oath-snippet { width: 100%; color: #666; font-size: 0.88em; margin-top: 2px; }
.oath-footer { margin-top: 10px; font-size: 0.82em; color: #888; text-align: right; }

/* ‚îÄ‚îÄ Exhibit Tracker ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.exhibits-container { background: var(--card-bg, #fff); border-radius: 12px; padding: 18px; border-left: 4px solid #00695c; }
.exhibits-header { font-size: 1.2em; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
.exhibits-icon { font-size: 1.3em; }
.exhibits-summary { display: flex; gap: 14px; flex-wrap: wrap; margin-bottom: 14px; }
.exh-stat { text-align: center; padding: 10px 16px; background: rgba(0,105,92,0.04); border-radius: 8px; min-width: 80px; }
.exh-stat strong { display: block; font-size: 1.3em; color: #00695c; }
.exh-stat span { font-size: 0.78em; color: #888; }
.exh-types { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; }
.exh-type-badge { padding: 4px 10px; background: rgba(0,105,92,0.06); border-radius: 8px; font-size: 0.85em; }
.exh-list { display: flex; flex-direction: column; gap: 8px; }
.exh-item { padding: 8px 12px; background: rgba(0,0,0,0.02); border-radius: 8px; }
.exh-id { font-weight: 700; color: #00695c; margin-right: 8px; }
.exh-bar-track { height: 8px; background: rgba(0,0,0,0.06); border-radius: 4px; overflow: hidden; margin: 6px 0; }
.exh-bar-fill { height: 100%; border-radius: 4px; background: #00897b; transition: width 0.3s; }
.exh-mentions { font-weight: 600; font-size: 0.88em; color: #00695c; }
.exh-context { font-size: 0.82em; color: #666; margin-top: 4px; }
.exh-empty { padding: 16px; text-align: center; color: #888; font-style: italic; }
.exh-footer { margin-top: 10px; font-size: 0.82em; color: #888; text-align: right; }

/* ‚îÄ‚îÄ Memory Quality ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.memory-container { background: var(--card-bg, #fff); border-radius: 12px; padding: 18px; border-left: 4px solid #0277bd; }
.memory-header { font-size: 1.2em; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
.memory-icon { font-size: 1.3em; }
.memory-top { display: flex; align-items: center; gap: 16px; margin-bottom: 14px; }
.memory-grade { font-size: 2.2em; font-weight: 800; width: 56px; height: 56px; display: flex; align-items: center; justify-content: center; border-radius: 12px; }
.memory-grade.grade-A { background: rgba(76,175,80,0.12); color: #2e7d32; }
.memory-grade.grade-B { background: rgba(33,150,243,0.12); color: #1565c0; }
.memory-grade.grade-C { background: rgba(255,152,0,0.12); color: #e65100; }
.memory-grade.grade-D { background: rgba(229,57,53,0.12); color: #c62828; }
.memory-grade.grade-F { background: rgba(183,28,28,0.12); color: #b71c1c; }
.memory-score { font-size: 2em; font-weight: 800; color: #0277bd; }
.memory-score span { font-size: 0.4em; color: #888; }
.memory-scores { display: flex; flex-direction: column; gap: 6px; margin-bottom: 14px; }
.mem-dim { display: flex; align-items: center; gap: 8px; font-size: 0.88em; }
.mem-dim-icon { font-size: 1.1em; min-width: 20px; }
.mem-dim-name { min-width: 110px; text-transform: capitalize; }
.mem-bar-track { flex: 1; height: 10px; background: rgba(0,0,0,0.06); border-radius: 5px; overflow: hidden; }
.mem-bar-fill { height: 100%; border-radius: 5px; transition: width 0.3s ease; }
.mem-dim-val { min-width: 28px; text-align: right; font-weight: 600; }
.mem-section { margin-top: 10px; }
.mem-item { padding: 4px 10px; margin: 3px 0; border-radius: 6px; font-size: 0.88em; }
.mem-item.good { background: rgba(76,175,80,0.06); color: #2e7d32; }
.mem-item.warn { background: rgba(255,152,0,0.06); color: #e65100; }
.mem-rec { margin-top: 10px; padding: 10px 14px; background: rgba(2,119,189,0.06); border-radius: 8px; font-size: 0.92em; }
.mem-footer { margin-top: 8px; font-size: 0.82em; color: #888; text-align: right; }

/* ‚îÄ‚îÄ Legal Issues ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.issues-container { background: var(--card-bg, #fff); border-radius: 12px; padding: 18px; border-left: 4px solid #bf360c; }
.issues-header { font-size: 1.2em; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
.issues-icon { font-size: 1.3em; }
.issues-summary { display: flex; gap: 14px; flex-wrap: wrap; margin-bottom: 14px; }
.iss-stat { text-align: center; padding: 10px 16px; background: rgba(191,54,12,0.04); border-radius: 8px; min-width: 80px; }
.iss-stat strong { display: block; font-size: 1.3em; color: #bf360c; }
.iss-stat span { font-size: 0.78em; color: #888; }
.iss-stat.primary strong { font-size: 1em; }
.iss-list { display: flex; flex-direction: column; gap: 10px; }
.iss-item { padding: 12px; background: rgba(0,0,0,0.02); border-radius: 8px; border-left: 3px solid transparent; }
.iss-item.sev-high { border-left-color: #c62828; }
.iss-item.sev-medium { border-left-color: #ff6f00; }
.iss-item.sev-low { border-left-color: #4caf50; }
.iss-item-header { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
.iss-name { font-weight: 700; font-size: 1.05em; }
.iss-sev { font-size: 0.75em; font-weight: 700; padding: 2px 8px; border-radius: 4px; background: rgba(0,0,0,0.04); }
.iss-count { font-size: 0.85em; color: #888; margin-left: auto; }
.iss-keywords { display: flex; gap: 4px; flex-wrap: wrap; margin-bottom: 6px; }
.iss-kw { padding: 2px 8px; background: rgba(191,54,12,0.08); border-radius: 4px; font-size: 0.82em; color: #bf360c; }
.iss-segment { font-size: 0.85em; color: #666; padding: 4px 8px; margin: 2px 0; background: rgba(0,0,0,0.02); border-radius: 4px; }
.iss-seg-num { font-weight: 600; color: #bf360c; margin-right: 6px; }
.iss-empty { padding: 16px; text-align: center; color: #888; font-style: italic; }
.iss-rec { margin-top: 10px; padding: 10px 14px; background: rgba(191,54,12,0.06); border-radius: 8px; font-size: 0.92em; }
.iss-footer { margin-top: 8px; font-size: 0.82em; color: #888; text-align: right; }

/* ‚îÄ‚îÄ Redline / Self-Contradiction ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.redline-container { background: var(--card-bg, #fff); border-radius: 12px; padding: 18px; border-left: 4px solid #c62828; }
.redline-header { font-size: 1.2em; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
.redline-icon { font-size: 1.3em; }
.redline-summary { display: flex; gap: 14px; flex-wrap: wrap; margin-bottom: 14px; }
.rl-stat { text-align: center; padding: 10px 16px; background: rgba(198,40,40,0.04); border-radius: 8px; min-width: 80px; }
.rl-stat strong { display: block; font-size: 1.3em; color: #c62828; }
.rl-stat span { font-size: 0.78em; color: #888; }
.rl-sev { font-weight: 700; padding: 3px 10px; border-radius: 6px; font-size: 0.88em; }
.rl-sev.sev-high { background: rgba(198,40,40,0.12); color: #c62828; }
.rl-sev.sev-moderate { background: rgba(255,111,0,0.12); color: #e65100; }
.rl-sev.sev-low { background: rgba(76,175,80,0.12); color: #2e7d32; }
.rl-sev.sev-none { background: rgba(76,175,80,0.12); color: #2e7d32; }
.rl-list { display: flex; flex-direction: column; gap: 12px; }
.rl-item { padding: 12px; background: rgba(198,40,40,0.02); border-radius: 8px; border: 1px solid rgba(198,40,40,0.1); }
.rl-item-header { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.rl-num { font-weight: 700; color: #c62828; }
.rl-distance { font-size: 0.82em; color: #888; margin-left: auto; }
.rl-conflicts { display: flex; gap: 4px; flex-wrap: wrap; margin-bottom: 8px; }
.rl-conflict-tag { padding: 2px 8px; background: rgba(198,40,40,0.1); border-radius: 4px; font-size: 0.82em; color: #c62828; font-weight: 600; }
.rl-pair { display: grid; grid-template-columns: 1fr auto 1fr; gap: 8px; align-items: start; }
.rl-stmt { padding: 8px 10px; border-radius: 6px; font-size: 0.88em; }
.rl-stmt.rl-a { background: rgba(198,40,40,0.04); }
.rl-stmt.rl-b { background: rgba(33,150,243,0.04); }
.rl-seg { font-weight: 600; font-size: 0.82em; display: block; margin-bottom: 4px; }
.rl-stmt.rl-a .rl-seg { color: #c62828; }
.rl-stmt.rl-b .rl-seg { color: #1565c0; }
.rl-stmt p { margin: 0; color: #555; }
.rl-vs { font-size: 1.2em; color: #888; padding-top: 12px; }
.rl-topics { font-size: 0.82em; color: #888; margin-top: 6px; font-style: italic; }
.rl-empty { padding: 16px; text-align: center; color: #2e7d32; font-weight: 500; }
.rl-rec { margin-top: 10px; padding: 10px 14px; background: rgba(198,40,40,0.06); border-radius: 8px; font-size: 0.92em; }
.rl-footer { margin-top: 8px; font-size: 0.82em; color: #888; text-align: right; }

/* ‚îÄ‚îÄ Evasion Pattern Detector ‚îÄ‚îÄ */
.evasion-container { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.evasion-container h3 { margin: 0 0 12px; color: var(--text-primary, #e0e0e0); }
.evasion-summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 14px; }
.evasion-stat { text-align: center; background: var(--bg-tertiary, #16213e); border-radius: 8px; padding: 10px; }
.evasion-stat-val { display: block; font-size: 1.3em; font-weight: 700; color: var(--accent, #00d4ff); }
.evasion-stat-label { font-size: 0.75em; color: var(--text-secondary, #aaa); }
.evasion-risk-minimal { color: #4caf50; }
.evasion-risk-low { color: #8bc34a; }
.evasion-risk-moderate { color: #ff9800; }
.evasion-risk-high { color: #f44336; }
.evasion-breakdown { margin-bottom: 12px; }
.evasion-bar-row { display: flex; align-items: center; gap: 8px; margin: 4px 0; }
.evasion-bar-label { width: 100px; font-size: 0.8em; color: var(--text-secondary, #aaa); text-transform: capitalize; }
.evasion-bar-track { flex: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden; }
.evasion-bar-fill { height: 100%; border-radius: 4px; transition: width 0.4s; }
.evasion-cat-deflection { background: #e91e63; }
.evasion-cat-non_answer { background: #ff5722; }
.evasion-cat-vagueness { background: #ff9800; }
.evasion-cat-topic_change { background: #9c27b0; }
.evasion-bar-count { font-size: 0.8em; width: 30px; text-align: right; color: var(--text-secondary, #aaa); }
.evasion-patterns { margin: 10px 0; }
.evasion-patterns h4 { margin: 0 0 8px; font-size: 0.9em; color: var(--text-primary, #e0e0e0); }
.evasion-pattern-item { background: rgba(255,255,255,0.04); border-radius: 6px; padding: 8px; margin: 4px 0; }
.evasion-cat-badge { font-size: 0.7em; padding: 2px 6px; border-radius: 4px; background: rgba(255,255,255,0.1); color: #ddd; text-transform: capitalize; }
.evasion-marker { font-size: 0.85em; color: #ff9800; margin-left: 8px; font-style: italic; }
.evasion-excerpt { font-size: 0.78em; color: var(--text-secondary, #888); margin-top: 4px; }
.evasion-rec { background: rgba(255,152,0,0.1); border-left: 3px solid #ff9800; padding: 8px 12px; margin: 10px 0; font-size: 0.85em; border-radius: 0 6px 6px 0; }
.evasion-footer { text-align: center; font-size: 0.75em; color: var(--text-secondary, #888); margin-top: 8px; }

/* ‚îÄ‚îÄ Power Dynamics Analyzer ‚îÄ‚îÄ */
.power-container { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.power-container h3 { margin: 0 0 12px; color: var(--text-primary, #e0e0e0); }
.power-summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 14px; }
.power-stat { text-align: center; background: var(--bg-tertiary, #16213e); border-radius: 8px; padding: 10px; }
.power-stat-val { display: block; font-size: 1.2em; font-weight: 700; color: var(--accent, #00d4ff); text-transform: capitalize; }
.power-stat-label { font-size: 0.75em; color: var(--text-secondary, #aaa); }
.power-meters { margin-bottom: 12px; }
.power-meter-row { display: flex; align-items: center; gap: 8px; margin: 6px 0; }
.power-meter-label { width: 90px; font-size: 0.85em; color: var(--text-secondary, #aaa); }
.power-meter-track { flex: 1; height: 10px; background: rgba(255,255,255,0.1); border-radius: 5px; overflow: hidden; }
.power-meter-fill { height: 100%; border-radius: 5px; transition: width 0.4s; }
.power-dom { background: linear-gradient(90deg, #f44336, #e91e63); }
.power-sub { background: linear-gradient(90deg, #4caf50, #8bc34a); }
.power-res { background: linear-gradient(90deg, #ff9800, #ffc107); }
.power-exchanges { margin: 10px 0; }
.power-exchanges h4 { margin: 0 0 8px; font-size: 0.9em; color: var(--text-primary, #e0e0e0); }
.power-exchange-item { background: rgba(255,255,255,0.04); border-radius: 6px; padding: 8px; margin: 4px 0; }
.power-type-badge { font-size: 0.7em; padding: 2px 6px; border-radius: 4px; text-transform: capitalize; }
.power-type-dominance { background: rgba(244,67,54,0.2); color: #f44336; }
.power-type-submission { background: rgba(76,175,80,0.2); color: #4caf50; }
.power-type-resistance { background: rgba(255,152,0,0.2); color: #ff9800; }
.power-marker { font-size: 0.85em; color: #ba68c8; margin-left: 8px; font-style: italic; }
.power-excerpt { font-size: 0.78em; color: var(--text-secondary, #888); margin-top: 4px; }
.power-rec { background: rgba(156,39,176,0.1); border-left: 3px solid #9c27b0; padding: 8px 12px; margin: 10px 0; font-size: 0.85em; border-radius: 0 6px 6px 0; }
.power-footer { text-align: center; font-size: 0.75em; color: var(--text-secondary, #888); margin-top: 8px; }

/* ‚îÄ‚îÄ Emotional Volatility Index ‚îÄ‚îÄ */
.volatility-container { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.volatility-container h3 { margin: 0 0 12px; color: var(--text-primary, #e0e0e0); }
.volatility-summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 14px; }
.volatility-stat { text-align: center; background: var(--bg-tertiary, #16213e); border-radius: 8px; padding: 10px; }
.volatility-stat-val { display: block; font-size: 1.3em; font-weight: 700; color: var(--accent, #00d4ff); }
.volatility-stat-label { font-size: 0.75em; color: var(--text-secondary, #aaa); }
.volatility-stable { color: #4caf50; }
.volatility-low { color: #8bc34a; }
.volatility-moderate { color: #ff9800; }
.volatility-high { color: #f44336; }
.volatility-distribution { margin-bottom: 12px; }
.volatility-distribution h4 { margin: 0 0 8px; font-size: 0.9em; color: var(--text-primary, #e0e0e0); }
.volatility-emo-row { display: flex; align-items: center; gap: 8px; margin: 4px 0; }
.volatility-emo-icon { font-size: 1.1em; width: 24px; text-align: center; }
.volatility-emo-label { width: 70px; font-size: 0.8em; color: var(--text-secondary, #aaa); text-transform: capitalize; }
.volatility-emo-track { flex: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden; }
.volatility-emo-fill { height: 100%; border-radius: 4px; transition: width 0.4s; }
.volatility-emo-anger { background: #f44336; }
.volatility-emo-fear { background: #9c27b0; }
.volatility-emo-sadness { background: #2196f3; }
.volatility-emo-joy { background: #4caf50; }
.volatility-emo-surprise { background: #ff9800; }
.volatility-emo-disgust { background: #795548; }
.volatility-emo-neutral { background: #607d8b; }
.volatility-shifts { margin: 10px 0; }
.volatility-shifts h4 { margin: 0 0 8px; font-size: 0.9em; color: var(--text-primary, #e0e0e0); }
.volatility-shift-item { display: flex; align-items: center; gap: 8px; padding: 6px; background: rgba(255,255,255,0.04); border-radius: 6px; margin: 3px 0; font-size: 0.85em; }
.volatility-shift-from { color: #ef5350; }
.volatility-shift-arrow { color: var(--text-secondary, #888); }
.volatility-shift-to { color: #66bb6a; }
.volatility-shift-seg { margin-left: auto; font-size: 0.75em; color: var(--text-secondary, #888); }
.volatility-rec { background: rgba(33,150,243,0.1); border-left: 3px solid #2196f3; padding: 8px 12px; margin: 10px 0; font-size: 0.85em; border-radius: 0 6px 6px 0; }
.volatility-footer { text-align: center; font-size: 0.75em; color: var(--text-secondary, #888); margin-top: 8px; }

/* ‚îÄ‚îÄ Witness Preparation Detector ‚îÄ‚îÄ */
.prep-container { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.prep-container h3 { margin: 0 0 12px; color: var(--text-primary, #e0e0e0); }
.prep-summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 14px; }
.prep-stat { text-align: center; background: var(--bg-tertiary, #16213e); border-radius: 8px; padding: 10px; }
.prep-stat-val { display: block; font-size: 1.2em; font-weight: 700; color: var(--accent, #00d4ff); text-transform: capitalize; }
.prep-stat-label { font-size: 0.75em; color: var(--text-secondary, #aaa); }
.prep-assess-highly_prepared { color: #f44336; }
.prep-assess-moderately_prepared { color: #ff9800; }
.prep-assess-spontaneous { color: #4caf50; }
.prep-assess-mixed { color: #2196f3; }
.prep-breakdown { margin-bottom: 12px; }
.prep-breakdown h4 { margin: 0 0 8px; font-size: 0.9em; color: var(--text-primary, #e0e0e0); }
.prep-bar-row { display: flex; align-items: center; gap: 8px; margin: 4px 0; }
.prep-bar-label { width: 120px; font-size: 0.8em; color: var(--text-secondary, #aaa); text-transform: capitalize; }
.prep-bar-track { flex: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden; }
.prep-bar-fill { height: 100%; border-radius: 4px; transition: width 0.4s; }
.prep-cat-scripted_phrases { background: #e91e63; }
.prep-cat-legal_hedging { background: #ff5722; }
.prep-cat-over_precision { background: #ff9800; }
.prep-cat-rehearsed_narrative { background: #9c27b0; }
.prep-bar-count { font-size: 0.8em; width: 30px; text-align: right; color: var(--text-secondary, #aaa); }
.prep-signals { margin: 10px 0; }
.prep-signals h4 { margin: 0 0 8px; font-size: 0.9em; color: var(--text-primary, #e0e0e0); }
.prep-signal-item { background: rgba(255,255,255,0.04); border-radius: 6px; padding: 8px; margin: 4px 0; }
.prep-cat-badge { font-size: 0.7em; padding: 2px 6px; border-radius: 4px; background: rgba(255,255,255,0.1); color: #ddd; text-transform: capitalize; }
.prep-marker { font-size: 0.85em; color: #ff9800; margin-left: 8px; font-style: italic; }
.prep-excerpt { font-size: 0.78em; color: var(--text-secondary, #888); margin-top: 4px; }
.prep-rec { background: rgba(233,30,99,0.1); border-left: 3px solid #e91e63; padding: 8px 12px; margin: 10px 0; font-size: 0.85em; border-radius: 0 6px 6px 0; }
.prep-footer { text-align: center; font-size: 0.75em; color: var(--text-secondary, #888); margin-top: 8px; }

/* ‚îÄ‚îÄ Key Admission Extractor ‚îÄ‚îÄ */
.admit-container { background: var(--bg-secondary, #1a1a2e); border-radius: 12px; padding: 16px; margin: 8px 0; }
.admit-container h3 { margin: 0 0 12px; color: var(--text-primary, #e0e0e0); }
.admit-summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 14px; }
.admit-stat { text-align: center; background: var(--bg-tertiary, #16213e); border-radius: 8px; padding: 10px; }
.admit-stat-val { display: block; font-size: 1.2em; font-weight: 700; color: var(--accent, #00d4ff); text-transform: capitalize; }
.admit-stat-label { font-size: 0.75em; color: var(--text-secondary, #aaa); }
.admit-breakdown { margin-bottom: 12px; }
.admit-breakdown h4 { margin: 0 0 8px; font-size: 0.9em; color: var(--text-primary, #e0e0e0); }
.admit-bar-row { display: flex; align-items: center; gap: 8px; margin: 4px 0; }
.admit-bar-label { width: 120px; font-size: 0.8em; color: var(--text-secondary, #aaa); text-transform: capitalize; }
.admit-bar-track { flex: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden; }
.admit-bar-fill { height: 100%; border-radius: 4px; transition: width 0.4s; }
.admit-cat-direct_admission { background: #f44336; }
.admit-cat-concession { background: #ff9800; }
.admit-cat-reluctant_admission { background: #ffc107; }
.admit-cat-against_interest { background: #e91e63; }
.admit-bar-count { font-size: 0.8em; width: 30px; text-align: right; color: var(--text-secondary, #aaa); }
.admit-list { margin: 10px 0; }
.admit-list h4 { margin: 0 0 8px; font-size: 0.9em; color: var(--text-primary, #e0e0e0); }
.admit-item { background: rgba(255,255,255,0.04); border-radius: 6px; padding: 10px; margin: 5px 0; border-left: 3px solid transparent; }
.admit-sig-high { border-left-color: #f44336; }
.admit-sig-medium { border-left-color: #ff9800; }
.admit-item-header { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; margin-bottom: 4px; }
.admit-cat-badge { font-size: 0.7em; padding: 2px 6px; border-radius: 4px; background: rgba(255,255,255,0.1); color: #ddd; text-transform: capitalize; }
.admit-sig-badge { font-size: 0.65em; padding: 2px 5px; border-radius: 3px; text-transform: uppercase; }
.admit-sig-badge.admit-sig-high { background: rgba(244,67,54,0.2); color: #f44336; }
.admit-sig-badge.admit-sig-medium { background: rgba(255,152,0,0.2); color: #ff9800; }
.admit-trigger { font-size: 0.85em; color: #ba68c8; font-style: italic; }
.admit-text { font-size: 0.78em; color: var(--text-secondary, #888); }
.admit-rec { background: rgba(244,67,54,0.1); border-left: 3px solid #f44336; padding: 8px 12px; margin: 10px 0; font-size: 0.85em; border-radius: 0 6px 6px 0; }
.admit-footer { text-align: center; font-size: 0.75em; color: var(--text-secondary, #888); margin-top: 8px; }

/* ‚îÄ‚îÄ Questioning Strategy Generator ‚îÄ‚îÄ */
.strategy-container { background: var(--card-bg, #1e1e2e); border-radius: 12px; padding: 16px; margin: 8px 0; border: 1px solid rgba(255,152,0,0.3); }
.strategy-container h3 { margin: 0 0 12px; color: #ff9800; }
.strategy-summary { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 12px; }
.strategy-stat { text-align: center; padding: 10px 6px; background: rgba(255,152,0,0.08); border-radius: 8px; }
.strategy-stat-val { display: block; font-size: 1.3em; font-weight: 700; color: #ff9800; }
.strategy-stat-label { display: block; font-size: 0.7em; color: var(--text-secondary, #999); margin-top: 2px; }
.strategy-list { display: flex; flex-direction: column; gap: 10px; }
.strategy-card { background: rgba(255,152,0,0.06); border-radius: 8px; padding: 12px; border-left: 3px solid #ff9800; }
.strategy-card.strategy-prio-high { border-left-color: #f44336; }
.strategy-card.strategy-prio-medium { border-left-color: #ff9800; }
.strategy-card.strategy-prio-low { border-left-color: #4caf50; }
.strategy-card-header { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
.strategy-type { font-weight: 600; font-size: 0.9em; text-transform: capitalize; }
.strategy-prio-badge { font-size: 0.7em; padding: 2px 8px; border-radius: 10px; font-weight: 600; text-transform: uppercase; }
.strategy-prio-badge.strategy-prio-high { background: rgba(244,67,54,0.2); color: #f44336; }
.strategy-prio-badge.strategy-prio-medium { background: rgba(255,152,0,0.2); color: #ff9800; }
.strategy-prio-badge.strategy-prio-low { background: rgba(76,175,80,0.2); color: #4caf50; }
.strategy-count { font-size: 0.75em; color: var(--text-secondary, #999); margin-left: auto; }
.strategy-approach { font-size: 0.85em; margin-bottom: 6px; color: var(--text-primary, #ddd); }
.strategy-questions ul { margin: 4px 0 0; padding-left: 18px; font-size: 0.82em; color: var(--text-secondary, #bbb); }
.strategy-questions li { margin-bottom: 3px; }
.strategy-empty { text-align: center; padding: 16px; color: #4caf50; }
.strategy-rec { background: rgba(255,152,0,0.1); border-left: 3px solid #ff9800; padding: 8px 12px; margin: 10px 0; font-size: 0.85em; border-radius: 0 6px 6px 0; }
.strategy-footer { text-align: center; font-size: 0.75em; color: var(--text-secondary, #888); margin-top: 8px; }

/* ‚îÄ‚îÄ Confidence Map ‚îÄ‚îÄ */
.confmap-container { background: var(--card-bg, #1e1e2e); border-radius: 12px; padding: 16px; margin: 8px 0; border: 1px solid rgba(33,150,243,0.3); }
.confmap-container h3 { margin: 0 0 12px; color: #2196f3; }
.confmap-summary { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 12px; }
.confmap-stat { text-align: center; padding: 10px 6px; background: rgba(33,150,243,0.08); border-radius: 8px; }
.confmap-stat-val { display: block; font-size: 1.3em; font-weight: 700; color: #2196f3; }
.confmap-stat-label { display: block; font-size: 0.7em; color: var(--text-secondary, #999); margin-top: 2px; }
.confmap-high { color: #4caf50 !important; }
.confmap-low { color: #f44336 !important; }
.confmap-trend-increasing { color: #4caf50 !important; }
.confmap-trend-decreasing { color: #f44336 !important; }
.confmap-trend-stable { color: #ff9800 !important; }
.confmap-dist { margin: 10px 0; }
.confmap-bar-row { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; font-size: 0.85em; }
.confmap-bar-label { width: 60px; font-weight: 600; }
.confmap-bar-track { flex: 1; height: 14px; background: rgba(255,255,255,0.08); border-radius: 7px; overflow: hidden; }
.confmap-bar-fill { height: 100%; border-radius: 7px; transition: width 0.4s; }
.confmap-fill-high { background: linear-gradient(90deg, #4caf50, #66bb6a); }
.confmap-fill-med { background: linear-gradient(90deg, #ff9800, #ffb74d); }
.confmap-fill-low { background: linear-gradient(90deg, #f44336, #ef5350); }
.confmap-heatmap { margin: 12px 0; }
.confmap-heatmap h4 { margin: 0 0 8px; font-size: 0.9em; }
.confmap-heatmap-grid { display: flex; flex-wrap: wrap; gap: 4px; }
.confmap-cell { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 6px; font-size: 0.7em; font-weight: 600; cursor: default; }
.confmap-cell-high { background: rgba(76,175,80,0.3); color: #4caf50; }
.confmap-cell-medium { background: rgba(255,152,0,0.3); color: #ff9800; }
.confmap-cell-low { background: rgba(244,67,54,0.3); color: #f44336; }
.confmap-rec { background: rgba(33,150,243,0.1); border-left: 3px solid #2196f3; padding: 8px 12px; margin: 10px 0; font-size: 0.85em; border-radius: 0 6px 6px 0; }
.confmap-footer { text-align: center; font-size: 0.75em; color: var(--text-secondary, #888); margin-top: 8px; }

/* ‚îÄ‚îÄ Witness Profile ‚îÄ‚îÄ */
.wprofile-container { background: var(--card-bg, #1e1e2e); border-radius: 12px; padding: 16px; margin: 8px 0; border: 1px solid rgba(156,39,176,0.3); }
.wprofile-container h3 { margin: 0 0 12px; color: #ab47bc; }
.wprofile-summary { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 12px; }
.wprofile-stat { text-align: center; padding: 10px 6px; background: rgba(156,39,176,0.08); border-radius: 8px; }
.wprofile-stat-val { display: block; font-size: 1.1em; font-weight: 700; color: #ab47bc; text-transform: capitalize; }
.wprofile-stat-label { display: block; font-size: 0.7em; color: var(--text-secondary, #999); margin-top: 2px; }
.wprofile-stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-bottom: 12px; }
.wprofile-metric { text-align: center; padding: 8px; background: rgba(156,39,176,0.05); border-radius: 6px; }
.wprofile-metric-label { display: block; font-size: 0.7em; color: var(--text-secondary, #999); }
.wprofile-metric-val { display: block; font-size: 1em; font-weight: 600; color: var(--text-primary, #ddd); }
.wprofile-bars { margin: 10px 0; }
.wprofile-bar-row { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; font-size: 0.85em; }
.wprofile-bar-label { width: 130px; font-weight: 500; }
.wprofile-bar-track { flex: 1; height: 12px; background: rgba(255,255,255,0.08); border-radius: 6px; overflow: hidden; }
.wprofile-bar-fill { height: 100%; border-radius: 6px; transition: width 0.4s; }
.wprofile-coop { background: linear-gradient(90deg, #4caf50, #66bb6a); }
.wprofile-resist { background: linear-gradient(90deg, #f44336, #ef5350); }
.wprofile-detail { background: linear-gradient(90deg, #2196f3, #42a5f5); }
.wprofile-emotion { background: linear-gradient(90deg, #ff9800, #ffb74d); }
.wprofile-strengths, .wprofile-weaknesses { margin: 8px 0; padding: 8px 12px; border-radius: 8px; }
.wprofile-strengths { background: rgba(76,175,80,0.08); }
.wprofile-weaknesses { background: rgba(244,67,54,0.08); }
.wprofile-strengths h4, .wprofile-weaknesses h4 { margin: 0 0 4px; font-size: 0.9em; }
.wprofile-strengths ul, .wprofile-weaknesses ul { margin: 0; padding-left: 18px; font-size: 0.82em; }
.wprofile-rec { background: rgba(156,39,176,0.1); border-left: 3px solid #ab47bc; padding: 8px 12px; margin: 10px 0; font-size: 0.85em; border-radius: 0 6px 6px 0; }
.wprofile-footer { text-align: center; font-size: 0.75em; color: var(--text-secondary, #888); margin-top: 8px; }

/* ‚îÄ‚îÄ Topic Segmentation ‚îÄ‚îÄ */
.topseg-container { background: var(--card-bg, #1e1e2e); border-radius: 12px; padding: 16px; margin: 8px 0; border: 1px solid rgba(0,150,136,0.3); }
.topseg-container h3 { margin: 0 0 12px; color: #26a69a; }
.topseg-summary { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 12px; }
.topseg-stat { text-align: center; padding: 10px 6px; background: rgba(0,150,136,0.08); border-radius: 8px; }
.topseg-stat-val { display: block; font-size: 1.2em; font-weight: 700; color: #26a69a; }
.topseg-stat-label { display: block; font-size: 0.7em; color: var(--text-secondary, #999); margin-top: 2px; }
.topseg-dist { margin: 10px 0; }
.topseg-dist h4 { margin: 0 0 8px; font-size: 0.9em; }
.topseg-bar-row { display: flex; align-items: center; gap: 8px; margin-bottom: 5px; font-size: 0.82em; }
.topseg-bar-label { width: 140px; font-weight: 500; text-transform: capitalize; }
.topseg-bar-track { flex: 1; height: 12px; background: rgba(255,255,255,0.08); border-radius: 6px; overflow: hidden; }
.topseg-bar-fill { height: 100%; border-radius: 6px; transition: width 0.4s; }
.topseg-missing { margin: 10px 0; }
.topseg-missing h4 { margin: 0 0 6px; font-size: 0.9em; }
.topseg-tags { display: flex; flex-wrap: wrap; gap: 6px; }
.topseg-missing-tag { padding: 3px 10px; background: rgba(244,67,54,0.15); color: #ef5350; border-radius: 12px; font-size: 0.75em; font-weight: 500; text-transform: capitalize; }
.topseg-timeline { margin: 10px 0; }
.topseg-timeline h4 { margin: 0 0 8px; font-size: 0.9em; }
.topseg-flow { display: flex; flex-direction: column; gap: 3px; }
.topseg-flow-item { display: flex; align-items: center; gap: 8px; padding: 4px 8px; font-size: 0.8em; border-radius: 4px; background: rgba(255,255,255,0.03); }
.topseg-flow-num { font-weight: 700; width: 24px; color: var(--text-secondary, #999); }
.topseg-flow-topic { text-transform: capitalize; font-weight: 500; }
.topseg-rec { background: rgba(0,150,136,0.1); border-left: 3px solid #26a69a; padding: 8px 12px; margin: 10px 0; font-size: 0.85em; border-radius: 0 6px 6px 0; }
.topseg-footer { text-align: center; font-size: 0.75em; color: var(--text-secondary, #888); margin-top: 8px; }

/* ‚îÄ‚îÄ Cross-Exam Weakness Finder ‚îÄ‚îÄ */
.xweak-container { background: var(--card-bg, #1e1e2e); border-radius: 12px; padding: 16px; margin: 8px 0; border: 1px solid rgba(233,30,99,0.3); }
.xweak-container h3 { margin: 0 0 12px; color: #ec407a; }
.xweak-summary { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 12px; }
.xweak-stat { text-align: center; padding: 10px 6px; background: rgba(233,30,99,0.08); border-radius: 8px; }
.xweak-stat-val { display: block; font-size: 1.3em; font-weight: 700; color: #ec407a; }
.xweak-stat-label { display: block; font-size: 0.7em; color: var(--text-secondary, #999); margin-top: 2px; }
.xweak-exploit-high { color: #f44336 !important; }
.xweak-exploit-medium { color: #ff9800 !important; }
.xweak-exploit-low { color: #4caf50 !important; }
.xweak-severity { display: flex; gap: 8px; justify-content: center; margin-bottom: 12px; }
.xweak-sev-badge { padding: 4px 12px; border-radius: 12px; font-size: 0.78em; font-weight: 600; }
.xweak-sev-high { background: rgba(244,67,54,0.15); color: #f44336; }
.xweak-sev-medium { background: rgba(255,152,0,0.15); color: #ff9800; }
.xweak-sev-low { background: rgba(76,175,80,0.15); color: #4caf50; }
.xweak-strategies { margin: 10px 0; }
.xweak-strategies h4 { margin: 0 0 8px; font-size: 0.9em; }
.xweak-strat-card { background: rgba(233,30,99,0.06); border-radius: 8px; padding: 10px; margin-bottom: 8px; border-left: 3px solid #ec407a; }
.xweak-strat-header { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; }
.xweak-strat-type { font-weight: 600; font-size: 0.9em; text-transform: capitalize; }
.xweak-strat-count { font-size: 0.75em; color: var(--text-secondary, #999); margin-left: auto; }
.xweak-strat-text { font-size: 0.82em; margin: 0; color: var(--text-secondary, #bbb); }
.xweak-list { margin: 10px 0; }
.xweak-list h4 { margin: 0 0 8px; font-size: 0.9em; }
.xweak-item { padding: 8px; border-radius: 6px; margin-bottom: 6px; background: rgba(255,255,255,0.03); }
.xweak-item.xweak-sev-high { border-left: 3px solid #f44336; }
.xweak-item.xweak-sev-medium { border-left: 3px solid #ff9800; }
.xweak-item.xweak-sev-low { border-left: 3px solid #4caf50; }
.xweak-item-header { display: flex; align-items: center; gap: 6px; margin-bottom: 4px; font-size: 0.85em; }
.xweak-type-badge { padding: 2px 8px; background: rgba(233,30,99,0.15); border-radius: 10px; font-size: 0.75em; font-weight: 600; text-transform: capitalize; }
.xweak-sev-dot { font-size: 0.7em; font-weight: 600; text-transform: uppercase; }
.xweak-marker { font-style: italic; color: var(--text-secondary, #999); font-size: 0.85em; }
.xweak-excerpt { font-size: 0.78em; color: var(--text-secondary, #888); }
.xweak-empty { text-align: center; padding: 16px; color: #4caf50; }
.xweak-rec { background: rgba(233,30,99,0.1); border-left: 3px solid #ec407a; padding: 8px 12px; margin: 10px 0; font-size: 0.85em; border-radius: 0 6px 6px 0; }
.xweak-footer { text-align: center; font-size: 0.75em; color: var(--text-secondary, #888); margin-top: 8px; }
